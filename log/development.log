DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)
  [1m[36m (48.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (42.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to SpreeOneTwo (20170531031931)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (120.2ms)[0m  [1mCREATE TABLE "spree_activators" ("id" serial primary key, "description" character varying, "expires_at" timestamp, "starts_at" timestamp, "name" character varying, "event_name" character varying, "type" character varying, "usage_limit" integer, "match_policy" character varying DEFAULT 'all', "code" character varying, "advertise" boolean DEFAULT 'f', "path" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (66.7ms)[0m  CREATE TABLE "spree_addresses" ("id" serial primary key, "firstname" character varying, "lastname" character varying, "address1" character varying, "address2" character varying, "city" character varying, "zipcode" character varying, "phone" character varying, "state_name" character varying, "alternative_phone" character varying, "company" character varying, "state_id" integer, "country_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (31.8ms)[0m  [1mCREATE  INDEX  "index_addresses_on_firstname" ON "spree_addresses"  ("firstname")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_addresses_on_lastname" ON "spree_addresses"  ("lastname")
  [1m[36m (77.6ms)[0m  [1mCREATE TABLE "spree_adjustments" ("id" serial primary key, "source_id" integer, "source_type" character varying, "adjustable_id" integer, "adjustable_type" character varying, "originator_id" integer, "originator_type" character varying, "amount" decimal(8,2), "label" character varying, "mandatory" boolean, "locked" boolean, "eligible" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (29.7ms)[0m  CREATE  INDEX  "index_adjustments_on_order_id" ON "spree_adjustments"  ("adjustable_id")
  [1m[36m (78.0ms)[0m  [1mCREATE TABLE "spree_assets" ("id" serial primary key, "viewable_id" integer, "viewable_type" character varying, "attachment_width" integer, "attachment_height" integer, "attachment_file_size" integer, "position" integer, "attachment_content_type" character varying, "attachment_file_name" character varying, "type" character varying(75), "attachment_updated_at" timestamp, "alt" text) [0m
  [1m[35m (31.9ms)[0m  CREATE  INDEX  "index_assets_on_viewable_id" ON "spree_assets"  ("viewable_id")
  [1m[36m (36.5ms)[0m  [1mCREATE  INDEX  "index_assets_on_viewable_type_and_type" ON "spree_assets"  ("viewable_type", "type")[0m
  [1m[35m (62.4ms)[0m  CREATE TABLE "spree_calculators" ("id" serial primary key, "type" character varying, "calculable_id" integer, "calculable_type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (66.9ms)[0m  [1mCREATE TABLE "spree_configurations" ("id" serial primary key, "name" character varying, "type" character varying(50), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (31.5ms)[0m  CREATE  INDEX  "index_spree_configurations_on_name_and_type" ON "spree_configurations"  ("name", "type")
  [1m[36m (80.6ms)[0m  [1mCREATE TABLE "spree_countries" ("id" serial primary key, "iso_name" character varying, "iso" character varying, "iso3" character varying, "name" character varying, "numcode" integer) [0m
  [1m[35m (64.3ms)[0m  CREATE TABLE "spree_credit_cards" ("id" serial primary key, "month" character varying, "year" character varying, "cc_type" character varying, "last_digits" character varying, "first_name" character varying, "last_name" character varying, "start_month" character varying, "start_year" character varying, "issue_number" character varying, "address_id" integer, "gateway_customer_profile_id" character varying, "gateway_payment_profile_id" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (79.7ms)[0m  [1mCREATE TABLE "spree_gateways" ("id" serial primary key, "type" character varying, "name" character varying, "description" text, "active" boolean DEFAULT 't', "environment" character varying DEFAULT 'development', "server" character varying DEFAULT 'test', "test_mode" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (98.3ms)[0m  CREATE TABLE "spree_inventory_units" ("id" serial primary key, "lock_version" integer DEFAULT 0, "state" character varying, "variant_id" integer, "order_id" integer, "shipment_id" integer, "return_authorization_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (55.0ms)[0m  [1mCREATE  INDEX  "index_inventory_units_on_order_id" ON "spree_inventory_units"  ("order_id")[0m
  [1m[35m (42.3ms)[0m  CREATE  INDEX  "index_inventory_units_on_shipment_id" ON "spree_inventory_units"  ("shipment_id")
  [1m[36m (31.9ms)[0m  [1mCREATE  INDEX  "index_inventory_units_on_variant_id" ON "spree_inventory_units"  ("variant_id")[0m
  [1m[35m (33.4ms)[0m  CREATE TABLE "spree_line_items" ("id" serial primary key, "variant_id" integer, "order_id" integer, "quantity" integer NOT NULL, "price" decimal(8,2) NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (43.0ms)[0m  [1mCREATE  INDEX  "index_spree_line_items_on_order_id" ON "spree_line_items"  ("order_id")[0m
  [1m[35m (43.2ms)[0m  CREATE  INDEX  "index_spree_line_items_on_variant_id" ON "spree_line_items"  ("variant_id")
  [1m[36m (67.0ms)[0m  [1mCREATE TABLE "spree_log_entries" ("id" serial primary key, "source_id" integer, "source_type" character varying, "details" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (66.6ms)[0m  CREATE TABLE "spree_mail_methods" ("id" serial primary key, "environment" character varying, "active" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (33.0ms)[0m  [1mCREATE TABLE "spree_option_types" ("id" serial primary key, "name" character varying(100), "presentation" character varying(100), "position" integer DEFAULT 0 NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "spree_option_types_prototypes" ("prototype_id" integer, "option_type_id" integer) 
  [1m[36m (77.4ms)[0m  [1mCREATE TABLE "spree_option_values" ("id" serial primary key, "position" integer, "name" character varying, "presentation" character varying, "option_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "spree_option_values_variants" ("variant_id" integer, "option_value_id" integer) 
  [1m[36m (31.2ms)[0m  [1mCREATE  INDEX  "index_option_values_variants_on_variant_id_and_option_value_id" ON "spree_option_values_variants"  ("variant_id", "option_value_id")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_option_values_variants_on_variant_id" ON "spree_option_values_variants"  ("variant_id")
  [1m[36m (65.8ms)[0m  [1mCREATE TABLE "spree_orders" ("id" serial primary key, "number" character varying(15), "item_total" decimal(8,2) DEFAULT 0.0 NOT NULL, "total" decimal(8,2) DEFAULT 0.0 NOT NULL, "state" character varying, "adjustment_total" decimal(8,2) DEFAULT 0.0 NOT NULL, "user_id" integer, "completed_at" timestamp, "bill_address_id" integer, "ship_address_id" integer, "payment_total" decimal(8,2) DEFAULT 0.0, "shipping_method_id" integer, "shipment_state" character varying, "payment_state" character varying, "email" character varying, "special_instructions" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (43.1ms)[0m  CREATE  INDEX  "index_spree_orders_on_number" ON "spree_orders"  ("number")
  [1m[36m (66.4ms)[0m  [1mCREATE TABLE "spree_payment_methods" ("id" serial primary key, "type" character varying, "name" character varying, "description" text, "active" boolean DEFAULT 't', "environment" character varying DEFAULT 'development', "deleted_at" timestamp, "display_on" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (66.3ms)[0m  CREATE TABLE "spree_payments" ("id" serial primary key, "amount" decimal(8,2) DEFAULT 0.0 NOT NULL, "order_id" integer, "source_id" integer, "source_type" character varying, "payment_method_id" integer, "state" character varying, "response_code" character varying, "avs_response" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (80.1ms)[0m  [1mCREATE TABLE "spree_preferences" ("id" serial primary key, "name" character varying(100), "owner_id" integer, "owner_type" character varying, "value" text, "key" character varying, "value_type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (30.9ms)[0m  CREATE UNIQUE INDEX  "index_spree_preferences_on_key" ON "spree_preferences"  ("key")
  [1m[36m (33.4ms)[0m  [1mCREATE TABLE "spree_product_option_types" ("id" serial primary key, "position" integer, "product_id" integer, "option_type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (77.9ms)[0m  CREATE TABLE "spree_product_properties" ("id" serial primary key, "value" character varying, "product_id" integer, "property_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_product_properties_on_product_id" ON "spree_product_properties"  ("product_id")[0m
  [1m[35m (99.6ms)[0m  CREATE TABLE "spree_products" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "description" text, "available_on" timestamp, "deleted_at" timestamp, "permalink" character varying, "meta_description" character varying, "meta_keywords" character varying, "tax_category_id" integer, "shipping_category_id" integer, "count_on_hand" integer DEFAULT 0 NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_products_on_available_on" ON "spree_products"  ("available_on")[0m
  [1m[35m (31.9ms)[0m  CREATE  INDEX  "index_spree_products_on_deleted_at" ON "spree_products"  ("deleted_at")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_products_on_name" ON "spree_products"  ("name")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_products_on_permalink" ON "spree_products"  ("permalink")
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "spree_products_taxons" ("product_id" integer, "taxon_id" integer) [0m
  [1m[35m (39.0ms)[0m  CREATE  INDEX  "index_spree_products_taxons_on_product_id" ON "spree_products_taxons"  ("product_id")
  [1m[36m (35.6ms)[0m  [1mCREATE  INDEX  "index_spree_products_taxons_on_taxon_id" ON "spree_products_taxons"  ("taxon_id")[0m
  [1m[35m (66.9ms)[0m  CREATE TABLE "spree_properties" ("id" serial primary key, "name" character varying, "presentation" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "spree_properties_prototypes" ("prototype_id" integer, "property_id" integer) [0m
  [1m[35m (66.2ms)[0m  CREATE TABLE "spree_prototypes" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (66.6ms)[0m  [1mCREATE TABLE "spree_return_authorizations" ("id" serial primary key, "number" character varying, "state" character varying, "amount" decimal(8,2) DEFAULT 0.0 NOT NULL, "order_id" integer, "reason" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (78.0ms)[0m  CREATE TABLE "spree_roles" ("id" serial primary key, "name" character varying) 
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "spree_roles_users" ("role_id" integer, "user_id" integer) [0m
  [1m[35m (31.5ms)[0m  CREATE  INDEX  "index_spree_roles_users_on_role_id" ON "spree_roles_users"  ("role_id")
  [1m[36m (54.4ms)[0m  [1mCREATE  INDEX  "index_spree_roles_users_on_user_id" ON "spree_roles_users"  ("user_id")[0m
  [1m[35m (78.9ms)[0m  CREATE TABLE "spree_shipments" ("id" serial primary key, "tracking" character varying, "number" character varying, "cost" decimal(8,2), "shipped_at" timestamp, "order_id" integer, "shipping_method_id" integer, "address_id" integer, "state" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_shipments_on_number" ON "spree_shipments"  ("number")[0m
  [1m[35m (66.9ms)[0m  CREATE TABLE "spree_shipping_categories" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (100.1ms)[0m  [1mCREATE TABLE "spree_shipping_methods" ("id" serial primary key, "name" character varying, "zone_id" integer, "display_on" character varying, "shipping_category_id" integer, "match_none" boolean, "match_all" boolean, "match_one" boolean, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (66.8ms)[0m  CREATE TABLE "spree_state_changes" ("id" serial primary key, "name" character varying, "previous_state" character varying, "stateful_id" integer, "user_id" integer, "stateful_type" character varying, "next_state" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (67.0ms)[0m  [1mCREATE TABLE "spree_states" ("id" serial primary key, "name" character varying, "abbr" character varying, "country_id" integer) [0m
  [1m[35m (66.7ms)[0m  CREATE TABLE "spree_tax_categories" ("id" serial primary key, "name" character varying, "description" character varying, "is_default" boolean DEFAULT 'f', "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (44.0ms)[0m  [1mCREATE TABLE "spree_tax_rates" ("id" serial primary key, "amount" decimal(8,5), "zone_id" integer, "tax_category_id" integer, "included_in_price" boolean DEFAULT 'f', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (67.0ms)[0m  CREATE TABLE "spree_taxonomies" ("id" serial primary key, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (66.4ms)[0m  [1mCREATE TABLE "spree_taxons" ("id" serial primary key, "parent_id" integer, "position" integer DEFAULT 0, "name" character varying NOT NULL, "permalink" character varying, "taxonomy_id" integer, "lft" integer, "rgt" integer, "icon_file_name" character varying, "icon_content_type" character varying, "icon_file_size" integer, "icon_updated_at" timestamp, "description" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_taxons_on_parent_id" ON "spree_taxons"  ("parent_id")
  [1m[36m (43.3ms)[0m  [1mCREATE  INDEX  "index_taxons_on_permalink" ON "spree_taxons"  ("permalink")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_taxons_on_taxonomy_id" ON "spree_taxons"  ("taxonomy_id")
  [1m[36m (66.4ms)[0m  [1mCREATE TABLE "spree_tokenized_permissions" ("id" serial primary key, "permissable_id" integer, "permissable_type" character varying, "token" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_tokenized_name_and_type" ON "spree_tokenized_permissions"  ("permissable_id", "permissable_type")
  [1m[36m (77.9ms)[0m  [1mCREATE TABLE "spree_trackers" ("id" serial primary key, "environment" character varying, "analytics_id" character varying, "active" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (67.3ms)[0m  CREATE TABLE "spree_users" ("id" serial primary key, "encrypted_password" character varying(128), "password_salt" character varying(128), "email" character varying, "remember_token" character varying, "persistence_token" character varying, "reset_password_token" character varying, "perishable_token" character varying, "sign_in_count" integer DEFAULT 0 NOT NULL, "failed_attempts" integer DEFAULT 0 NOT NULL, "last_request_at" timestamp, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "login" character varying, "ship_address_id" integer, "bill_address_id" integer, "authentication_token" character varying, "unlock_token" character varying, "locked_at" timestamp, "remember_created_at" timestamp, "reset_password_sent_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (77.0ms)[0m  [1mCREATE TABLE "spree_variants" ("id" serial primary key, "sku" character varying DEFAULT '' NOT NULL, "price" decimal(8,2) NOT NULL, "weight" decimal(8,2), "height" decimal(8,2), "width" decimal(8,2), "depth" decimal(8,2), "deleted_at" timestamp, "is_master" boolean DEFAULT 'f', "product_id" integer, "count_on_hand" integer DEFAULT 0 NOT NULL, "cost_price" decimal(8,2), "position" integer) [0m
  [1m[35m (42.9ms)[0m  CREATE  INDEX  "index_spree_variants_on_product_id" ON "spree_variants"  ("product_id")
  [1m[36m (78.1ms)[0m  [1mCREATE TABLE "spree_zone_members" ("id" serial primary key, "zoneable_id" integer, "zoneable_type" character varying, "zone_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (66.4ms)[0m  CREATE TABLE "spree_zones" ("id" serial primary key, "name" character varying, "description" character varying, "default_tax" boolean DEFAULT 'f', "zone_members_count" integer DEFAULT 0, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031931"]]
  [1m[35m (18.6ms)[0m  COMMIT
Migrating to SpreePromoOneTwo (20170531031932)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE TABLE "spree_products_promotion_rules" ("product_id" integer, "promotion_rule_id" integer) 
  [1m[36m (49.8ms)[0m  [1mCREATE  INDEX  "index_products_promotion_rules_on_product_id" ON "spree_products_promotion_rules"  ("product_id")[0m
  [1m[35m (29.7ms)[0m  CREATE  INDEX  "index_products_promotion_rules_on_promotion_rule_id" ON "spree_products_promotion_rules"  ("promotion_rule_id")
  [1m[36m (31.7ms)[0m  [1mCREATE TABLE "spree_promotion_action_line_items" ("id" serial primary key, "promotion_action_id" integer, "variant_id" integer, "quantity" integer DEFAULT 1) [0m
  [1m[35m (66.4ms)[0m  CREATE TABLE "spree_promotion_actions" ("id" serial primary key, "activator_id" integer, "position" integer, "type" character varying) 
  [1m[36m (77.5ms)[0m  [1mCREATE TABLE "spree_promotion_rules" ("id" serial primary key, "activator_id" integer, "user_id" integer, "product_group_id" integer, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (54.2ms)[0m  CREATE  INDEX  "index_promotion_rules_on_product_group_id" ON "spree_promotion_rules"  ("product_group_id")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_promotion_rules_on_user_id" ON "spree_promotion_rules"  ("user_id")[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "spree_promotion_rules_users" ("user_id" integer, "promotion_rule_id" integer) 
  [1m[36m (30.9ms)[0m  [1mCREATE  INDEX  "index_promotion_rules_users_on_promotion_rule_id" ON "spree_promotion_rules_users"  ("promotion_rule_id")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_promotion_rules_users_on_user_id" ON "spree_promotion_rules_users"  ("user_id")
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031932"]]
  [1m[35m (6.7ms)[0m  COMMIT
Migrating to AddTaxRateLabel (20170531031933)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (34.9ms)[0m  ALTER TABLE "spree_tax_rates" ADD "name" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031933"]]
  [1m[35m (6.5ms)[0m  COMMIT
Migrating to AddToggleTaxRateDisplay (20170531031934)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (69.3ms)[0m  ALTER TABLE "spree_tax_rates" ADD "show_rate_in_label" boolean DEFAULT 't'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031934"]]
  [1m[35m (5.8ms)[0m  COMMIT
Migrating to RemoveUnusedPreferenceColumns (20170531031935)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_preferences" DROP "name"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_preferences" DROP "owner_id"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_preferences" DROP "owner_type"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031935"]]
  [1m[35m (5.1ms)[0m  COMMIT
Migrating to AddLockVersionToVariant (20170531031936)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (105.4ms)[0m  ALTER TABLE "spree_variants" ADD "lock_version" integer DEFAULT 0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031936"]]
  [1m[35m (14.1ms)[0m  COMMIT
Migrating to AddStatesRequiredToCountries (20170531031937)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (72.2ms)[0m  ALTER TABLE "spree_countries" ADD "states_required" boolean DEFAULT 't'
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031937"]]
  [1m[35m (13.2ms)[0m  COMMIT
Migrating to AddOnDemandToProductAndVariant (20170531031938)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (285.6ms)[0m  ALTER TABLE "spree_products" ADD "on_demand" boolean DEFAULT 'f'
  [1m[36m (111.4ms)[0m  [1mALTER TABLE "spree_variants" ADD "on_demand" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031938"]]
  [1m[36m (10.4ms)[0m  [1mCOMMIT[0m
Migrating to RemoveNotNullConstraintFromProductsOnHand (20170531031939)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "spree_products" ALTER COLUMN "count_on_hand" TYPE integer[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_products" ALTER "count_on_hand" DROP NOT NULL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_variants" ALTER COLUMN "count_on_hand" TYPE integer[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_variants" ALTER "count_on_hand" DROP NOT NULL
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031939"]]
  [1m[35m (5.7ms)[0m  COMMIT
Migrating to SplitPricesFromVariants (20170531031940)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (66.3ms)[0m  CREATE TABLE "spree_prices" ("id" serial primary key, "variant_id" integer NOT NULL, "amount" decimal(8,2) NOT NULL, "currency" character varying) 
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_variants" DROP "price"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031940"]]
  [1m[35m (16.2ms)[0m  COMMIT
Migrating to RemoveNotNullFromSpreePricesAmount (20170531031941)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_prices" ALTER COLUMN "amount" TYPE decimal(8,2)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_prices" ALTER "amount" DROP NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031941"]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
Migrating to AddCurrencyToLineItems (20170531031942)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (33.1ms)[0m  [1mALTER TABLE "spree_line_items" ADD "currency" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031942"]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
Migrating to AddCurrencyToOrders (20170531031943)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_orders" ADD "currency" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031943"]]
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
Migrating to AddCostCurrencyToVariants (20170531031944)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_variants" ADD "cost_currency" character varying[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031944"]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
Migrating to RemoveDisplayOnFromPaymentMethods (20170531031945)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_payment_methods" DROP "display_on"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031945"]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Migrating to AddPositionToTaxonomies (20170531031946)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (68.1ms)[0m  [1mALTER TABLE "spree_taxonomies" ADD "position" integer DEFAULT 0[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031946"]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
Migrating to AddLastIpToSpreeOrders (20170531031947)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_orders" ADD "last_ip_address" character varying[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031947"]]
  [1m[36m (10.9ms)[0m  [1mCOMMIT[0m
Migrating to AddStateToSpreeAdjustments (20170531031948)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_adjustments" ADD "state" character varying[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_adjustments" DROP "locked"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031948"]]
  [1m[35m (7.1ms)[0m  COMMIT
Migrating to AddDisplayOnToSpreePaymentMethods (20170531031949)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_payment_methods" ADD "display_on" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031949"]]
  [1m[35m (8.1ms)[0m  COMMIT
Migrating to AddPositionToProductProperties (20170531031950)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (103.5ms)[0m  ALTER TABLE "spree_product_properties" ADD "position" integer DEFAULT 0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031950"]]
  [1m[35m (15.5ms)[0m  COMMIT
Migrating to AddIdentifierToSpreePayments (20170531031951)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_payments" ADD "identifier" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031951"]]
  [1m[35m (7.7ms)[0m  COMMIT
Migrating to AddOrderIdIndexToPayments (20170531031952)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (46.8ms)[0m  CREATE  INDEX  "index_spree_payments_on_order_id" ON "spree_payments"  ("order_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031952"]]
  [1m[35m (15.2ms)[0m  COMMIT
Migrating to AddPrimaryToSpreeProductsTaxons (20170531031953)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (161.1ms)[0m  ALTER TABLE "spree_products_taxons" ADD "id" serial primary key
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031953"]]
  [1m[35m (13.8ms)[0m  COMMIT
Migrating to CreateSpreeStockItems (20170531031954)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (49.6ms)[0m  CREATE TABLE "spree_stock_items" ("id" serial primary key, "stock_location_id" integer, "variant_id" integer, "count_on_hand" integer DEFAULT 0 NOT NULL, "lock_version" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_stock_items_on_stock_location_id" ON "spree_stock_items"  ("stock_location_id")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "stock_item_by_loc_and_var_id" ON "spree_stock_items"  ("stock_location_id", "variant_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031954"]]
  [1m[35m (12.5ms)[0m  COMMIT
Migrating to CreateSpreeStockLocations (20170531031955)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (63.3ms)[0m  CREATE TABLE "spree_stock_locations" ("id" serial primary key, "name" character varying, "address_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_stock_locations_on_address_id" ON "spree_stock_locations"  ("address_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031955"]]
  [1m[36m (11.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateDefaultStock (20170531031956)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (108.5ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "default" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "spree_stock_locations" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "default"], ["created_at", "2017-06-06 16:43:43.481954"], ["updated_at", "2017-06-06 16:43:43.481954"]]
  [1m[36mSpree::Variant Load (0.5ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL  ORDER BY "spree_variants"."id" ASC LIMIT 1000[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_variants" DROP "count_on_hand"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031956"]]
  [1m[35m (13.5ms)[0m  COMMIT
Migrating to AddOrderIdIndexToShipments (20170531031957)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (30.7ms)[0m  CREATE  INDEX  "index_spree_shipments_on_order_id" ON "spree_shipments"  ("order_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031957"]]
  [1m[35m (9.5ms)[0m  COMMIT
Migrating to ChangeMetaDescriptionOnSpreeProductsToText (20170531031958)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_products" ALTER COLUMN "meta_description" TYPE text
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031958"]]
  [1m[35m (7.9ms)[0m  COMMIT
Migrating to AddStockLocationIdToSpreeShipments (20170531031959)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipments" ADD "stock_location_id" integer
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031959"]]
  [1m[35m (7.7ms)[0m  COMMIT
Migrating to AddPendingToInventoryUnit (20170531031960)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (178.1ms)[0m  ALTER TABLE "spree_inventory_units" ADD "pending" boolean DEFAULT 't'
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_inventory_units" SET "pending" = 'f'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031960"]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
Migrating to RemoveOnDemandFromProductAndVariant (20170531031961)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_products" DROP "on_demand"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_variants" DROP "on_demand"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031961"]]
  [1m[35m (7.8ms)[0m  COMMIT
Migrating to CreateShippingMethodZone (20170531031962)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "shipping_methods_zones" ("shipping_method_id" integer, "zone_id" integer) 
  [1m[36mSpree::ShippingMethod Load (0.4ms)[0m  [1mSELECT "spree_shipping_methods".* FROM "spree_shipping_methods" WHERE "spree_shipping_methods"."deleted_at" IS NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_shipping_methods" DROP "zone_id"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031962"]]
  [1m[35m (34.2ms)[0m  COMMIT
Migrating to RemoveShippingCategoryIdFromShippingMethod (20170531031963)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipping_methods" DROP "shipping_category_id"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031963"]]
  [1m[35m (5.8ms)[0m  COMMIT
Migrating to CreateShippingMethodCategories (20170531031964)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (36.5ms)[0m  CREATE TABLE "spree_shipping_method_categories" ("id" serial primary key, "shipping_method_id" integer NOT NULL, "shipping_category_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (31.9ms)[0m  [1mCREATE  INDEX  "index_spree_shipping_method_categories_on_shipping_method_id" ON "spree_shipping_method_categories"  ("shipping_method_id")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_shipping_method_categories_on_shipping_category_id" ON "spree_shipping_method_categories"  ("shipping_category_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031964"]]
  [1m[35m (15.7ms)[0m  COMMIT
Migrating to AddTrackingUrlToSpreeShippingMethods (20170531031965)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipping_methods" ADD "tracking_url" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031965"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to CreateSpreeShippingRates (20170531031966)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (37.1ms)[0m  CREATE TABLE "spree_shipping_rates" ("id" serial primary key, "shipment_id" integer, "shipping_method_id" integer, "selected" boolean DEFAULT 'f', "cost" decimal(8,2), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (31.9ms)[0m  [1mCREATE UNIQUE INDEX  "spree_shipping_rates_join_index" ON "spree_shipping_rates"  ("shipment_id", "shipping_method_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031966"]]
  [1m[36m (14.9ms)[0m  [1mCOMMIT[0m
Migrating to RemoveCategoryMatchAttributesFromShippingMethod (20170531031967)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_shipping_methods" DROP "match_none"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_shipping_methods" DROP "match_one"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_shipping_methods" DROP "match_all"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031967"]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateStockMovements (20170531031968)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (72.0ms)[0m  [1mCREATE TABLE "spree_stock_movements" ("id" serial primary key, "stock_item_id" integer, "quantity" integer, "action" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_stock_movements_on_stock_item_id" ON "spree_stock_movements"  ("stock_item_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031968"]]
  [1m[35m (13.9ms)[0m  COMMIT
Migrating to AddAddressFieldsToStockLocation (20170531031969)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_locations" DROP "address_id"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "address1" character varying[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_stock_locations" ADD "address2" character varying
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "city" character varying[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_stock_locations" ADD "state_id" integer
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "state_name" character varying[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_stock_locations" ADD "country_id" integer
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "zipcode" character varying[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_stock_locations" ADD "phone" character varying
  [1m[36mSpree::Country Load (0.2ms)[0m  [1mSELECT  "spree_countries".* FROM "spree_countries" WHERE "spree_countries"."iso" = $1  ORDER BY "spree_countries"."id" ASC LIMIT 1[0m  [["iso", "US"]]
  [1m[35mSpree::Country Load (0.3ms)[0m  SELECT  "spree_countries".* FROM "spree_countries"  ORDER BY "spree_countries"."id" ASC LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_stock_locations" SET "country_id" = NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031969"]]
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
Migrating to AddActiveFieldToStockLocations (20170531031970)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (118.0ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "active" boolean DEFAULT 't'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031970"]]
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
Migrating to AddBackorderableToStockItem (20170531031971)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (118.9ms)[0m  [1mALTER TABLE "spree_stock_items" ADD "backorderable" boolean DEFAULT 't'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031971"]]
  [1m[36m (11.4ms)[0m  [1mCOMMIT[0m
Migrating to AddDefaultQuantityToStockMovement (20170531031972)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_stock_movements" ALTER COLUMN "quantity" TYPE integer[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_movements" ALTER COLUMN "quantity" SET DEFAULT 0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031972"]]
  [1m[35m (6.2ms)[0m  COMMIT
Migrating to AddSourceAndDestinationToStockMovements (20170531031973)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_movements" ADD "source_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_stock_movements" ADD "source_type" character varying[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_stock_movements" ADD "destination_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_stock_movements" ADD "destination_type" character varying[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031973"]]
  [1m[36m (6.7ms)[0m  [1mCOMMIT[0m
Migrating to ChangeOrdersTotalPrecision (20170531031974)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "spree_orders" ALTER COLUMN "item_total" TYPE decimal(10,2)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_orders" ALTER COLUMN "item_total" SET DEFAULT 0.0
  [1m[36m (0.3ms)[0m  [1mUPDATE "spree_orders" SET "item_total"=0.0 WHERE "item_total" IS NULL[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_orders" ALTER "item_total" SET NOT NULL
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_orders" ALTER COLUMN "total" TYPE decimal(10,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_orders" ALTER COLUMN "total" SET DEFAULT 0.0
  [1m[36m (0.1ms)[0m  [1mUPDATE "spree_orders" SET "total"=0.0 WHERE "total" IS NULL[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_orders" ALTER "total" SET NOT NULL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_orders" ALTER COLUMN "adjustment_total" TYPE decimal(10,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_orders" ALTER COLUMN "adjustment_total" SET DEFAULT 0.0
  [1m[36m (0.2ms)[0m  [1mUPDATE "spree_orders" SET "adjustment_total"=0.0 WHERE "adjustment_total" IS NULL[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_orders" ALTER "adjustment_total" SET NOT NULL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_orders" ALTER COLUMN "payment_total" TYPE decimal(10,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_orders" ALTER COLUMN "payment_total" SET DEFAULT 0.0
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031974"]]
  [1m[35m (10.2ms)[0m  COMMIT
Migrating to ChangeSpreePaymentsAmountPrecision (20170531031975)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_payments" ALTER COLUMN "amount" TYPE decimal(10,2)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_payments" ALTER COLUMN "amount" SET DEFAULT 0.0[0m
  [1m[35m (0.7ms)[0m  UPDATE "spree_payments" SET "amount"=0.0 WHERE "amount" IS NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_payments" ALTER "amount" SET NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031975"]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
Migrating to ChangeSpreeReturnAuthorizationAmountPrecision (20170531031976)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_return_authorizations" ALTER COLUMN "amount" TYPE decimal(10,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_return_authorizations" ALTER COLUMN "amount" SET DEFAULT 0.0
  [1m[36m (0.2ms)[0m  [1mUPDATE "spree_return_authorizations" SET "amount"=0.0 WHERE "amount" IS NULL[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_return_authorizations" ALTER "amount" SET NOT NULL
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031976"]]
  [1m[35m (6.6ms)[0m  COMMIT
Migrating to ChangeAdjustmentsAmountPrecision (20170531031977)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_adjustments" ALTER COLUMN "amount" TYPE decimal(10,2)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031977"]]
  [1m[35m (8.6ms)[0m  COMMIT
Migrating to AddOriginatorToStockMovement (20170531031978)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_movements" ADD "originator_id" integer
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_stock_movements" ADD "originator_type" character varying[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031978"]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
Migrating to DropSourceAndDestinationFromStockMovement (20170531031979)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_stock_movements" DROP "source_id"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_stock_movements" DROP "source_type"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_stock_movements" DROP "destination_id"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_stock_movements" DROP "destination_type"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031979"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to MigrateInventoryUnitSoldToOnHand (20170531031980)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_inventory_units" SET "state" = 'on_hand' WHERE "spree_inventory_units"."state" = $1  [["state", "sold"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031980"]]
  [1m[35m (7.9ms)[0m  COMMIT
Migrating to AddStockLocationToRma (20170531031981)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_return_authorizations" ADD "stock_location_id" integer
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031981"]]
  [1m[35m (6.6ms)[0m  COMMIT
Migrating to UpdateShipmentStateForCanceledOrders (20170531031982)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031982"]]
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
Migrating to AddSeoMetasToTaxons (20170531031983)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_taxons" ADD "meta_title" character varying[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_taxons" ADD "meta_description" character varying
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_taxons" ADD "meta_keywords" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031983"]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
Migrating to RemoveStockItemAndVariantLock (20170531031984)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_stock_items" DROP "lock_version"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_variants" DROP "lock_version"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031984"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to AddNameToSpreeCreditCards (20170531031985)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_credit_cards" ADD "name" character varying
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031985"]]
  [1m[35m (7.5ms)[0m  COMMIT
Migrating to UpdateNameFieldsOnSpreeCreditCards (20170531031986)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  UPDATE spree_credit_cards SET name = first_name || ' ' || last_name
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031986"]]
  [1m[35m (8.4ms)[0m  COMMIT
Migrating to AddIndexToSourceColumnsOnAdjustments (20170531031987)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (41.3ms)[0m  CREATE  INDEX  "index_spree_adjustments_on_source_type_and_source_id" ON "spree_adjustments"  ("source_type", "source_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031987"]]
  [1m[35m (10.4ms)[0m  COMMIT
Migrating to UpdateAdjustmentStates (20170531031988)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Order Load (0.2ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE ("spree_orders"."completed_at" IS NOT NULL)  ORDER BY "spree_orders"."id" ASC LIMIT 1000
  [1m[36mSpree::Shipment Load (0.3ms)[0m  [1mSELECT  "spree_shipments".* FROM "spree_shipments" WHERE "spree_shipments"."state" = 'shipped'  ORDER BY "spree_shipments"."id" ASC LIMIT 1000[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_adjustments" SET "state" = 'open' WHERE "spree_adjustments"."state" IS NULL
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031988"]]
  [1m[35m (10.5ms)[0m  COMMIT
Migrating to AddShippingRatesToShipments (20170531031989)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Shipment Load (0.4ms)[0m  SELECT  "spree_shipments".* FROM "spree_shipments"  ORDER BY "spree_shipments"."id" ASC LIMIT 1000
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_shipments" DROP "shipping_method_id"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031989"]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeStockTransfers (20170531031990)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (65.2ms)[0m  [1mCREATE TABLE "spree_stock_transfers" ("id" serial primary key, "type" character varying, "reference_number" character varying, "source_location_id" integer, "destination_location_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (43.1ms)[0m  CREATE  INDEX  "index_spree_stock_transfers_on_source_location_id" ON "spree_stock_transfers"  ("source_location_id")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_stock_transfers_on_destination_location_id" ON "spree_stock_transfers"  ("destination_location_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031990"]]
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
Migrating to DropProductsCountOnHand (20170531031991)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "spree_products" DROP "count_on_hand"[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031991"]]
  [1m[36m (7.1ms)[0m  [1mCOMMIT[0m
Migrating to SetDefaultShippingRateCost (20170531031992)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_shipping_rates" ALTER COLUMN "cost" TYPE decimal(8,2)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipping_rates" ALTER COLUMN "cost" SET DEFAULT 0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531031992"]]
  [1m[35m (7.1ms)[0m  COMMIT
Migrating to AddNumberToStockTransfer (20170531031993)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  DROP INDEX "index_spree_stock_transfers_on_source_location_id"
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_spree_stock_transfers_on_destination_location_id"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_stock_transfers" RENAME COLUMN "reference_number" TO "reference"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_stock_transfers" ADD "number" character varying[0m
  [1m[35mSpree::StockTransfer Load (0.3ms)[0m  SELECT  "spree_stock_transfers".* FROM "spree_stock_transfers"  ORDER BY "spree_stock_transfers"."id" ASC LIMIT 1000
  [1m[36m (33.0ms)[0m  [1mCREATE  INDEX  "index_spree_stock_transfers_on_number" ON "spree_stock_transfers"  ("number")[0m
  [1m[35m (31.4ms)[0m  CREATE  INDEX  "index_spree_stock_transfers_on_source_location_id" ON "spree_stock_transfers"  ("source_location_id")
  [1m[36m (43.2ms)[0m  [1mCREATE  INDEX  "index_spree_stock_transfers_on_destination_location_id" ON "spree_stock_transfers"  ("destination_location_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031993"]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
Migrating to AddSkuIndexToSpreeVariants (20170531031994)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (45.5ms)[0m  [1mCREATE  INDEX  "index_spree_variants_on_sku" ON "spree_variants"  ("sku")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031994"]]
  [1m[36m (5.6ms)[0m  [1mCOMMIT[0m
Migrating to AddBackorderableDefaultToSpreeStockLocation (20170531031995)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (137.0ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "backorderable_default" boolean DEFAULT 't'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031995"]]
  [1m[36m (15.5ms)[0m  [1mCOMMIT[0m
Migrating to AddPropageAllVariantsToSpreeStockLocation (20170531031996)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (104.7ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "propagate_all_variants" boolean DEFAULT 't'[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031996"]]
  [1m[36m (13.5ms)[0m  [1mCOMMIT[0m
Migrating to RenameShippingMethodsZonesToSpreeShippingMethodsZones (20170531031997)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shipping_methods_zones" RENAME TO "spree_shipping_methods_zones"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031997"]]
  [1m[36m (4.7ms)[0m  [1mCOMMIT[0m
Migrating to AddUserIdIndexToSpreeOrders (20170531031998)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (37.3ms)[0m  [1mCREATE  INDEX  "index_spree_orders_on_user_id" ON "spree_orders"  ("user_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031998"]]
  [1m[36m (14.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUpdatedAtToSpreeCountries (20170531031999)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_countries" ADD "updated_at" timestamp[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531031999"]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Migrating to AddUpdatedAtToSpreeStates (20170531032000)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_states" ADD "updated_at" timestamp[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032000"]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
Migrating to AddCvvResultCodeAndCvvResultMessageToSpreePayments (20170531032001)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_payments" ADD "cvv_response_code" character varying[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_payments" ADD "cvv_response_message" character varying
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032001"]]
  [1m[35m (7.9ms)[0m  COMMIT
Migrating to AddUniqueIndexToPermalinkOnSpreeProducts (20170531032002)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (37.7ms)[0m  CREATE UNIQUE INDEX  "permalink_idx_unique" ON "spree_products"  ("permalink")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032002"]]
  [1m[35m (13.8ms)[0m  COMMIT
Migrating to AddUniqueIndexToOrdersShipmentsAndStockTransfers (20170531032003)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032003"]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
Migrating to AddDeletedAtToSpreeTaxRates (20170531032004)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_tax_rates" ADD "deleted_at" timestamp[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032004"]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
Migrating to RemoveLockVersionFromInventoryUnits (20170531032005)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_inventory_units" DROP "lock_version"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032005"]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Migrating to AddCostPriceToLineItem (20170531032006)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_line_items" ADD "cost_price" decimal(8,2)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032006"]]
  [1m[36m (8.0ms)[0m  [1mCOMMIT[0m
Migrating to SetBackorderableToDefaultToFalse (20170531032007)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "spree_stock_items" ALTER COLUMN "backorderable" TYPE boolean[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_items" ALTER COLUMN "backorderable" SET DEFAULT 'f'
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_stock_locations" ALTER COLUMN "backorderable_default" TYPE boolean[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_locations" ALTER COLUMN "backorderable_default" SET DEFAULT 'f'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032007"]]
  [1m[35m (4.4ms)[0m  COMMIT
Migrating to AddCreatedByIdToSpreeOrders (20170531032008)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_orders" ADD "created_by_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032008"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to IndexCompletedAtOnSpreeOrders (20170531032009)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (38.4ms)[0m  CREATE  INDEX  "index_spree_orders_on_completed_at" ON "spree_orders"  ("completed_at")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032009"]]
  [1m[35m (13.2ms)[0m  COMMIT
Migrating to AddTaxCategoryIdToSpreeLineItems (20170531032010)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_line_items" ADD "tax_category_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032010"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to MigrateTaxCategoriesToLineItems (20170531032011)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::LineItem Load (0.5ms)[0m  SELECT  "spree_line_items".* FROM "spree_line_items"  ORDER BY "spree_line_items"."id" ASC LIMIT 1000
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032011"]]
  [1m[35m (13.2ms)[0m  COMMIT
Migrating to DropSpreeMailMethods (20170531032012)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  DROP TABLE "spree_mail_methods"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032012"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to SetDefaultStockLocationOnShipments (20170531032013)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "spree_shipments" WHERE (stock_location_id IS NULL)
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032013"]]
  [1m[35m (6.3ms)[0m  COMMIT
Migrating to UpgradeAdjustments (20170531032014)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Adjustment Load (0.2ms)[0m  SELECT  "spree_adjustments".* FROM "spree_adjustments" WHERE "spree_adjustments"."source_type" = $1  ORDER BY "spree_adjustments"."id" ASC LIMIT 1000  [["source_type", "Spree::Shipment"]]
  [1m[36mSpree::Adjustment Load (0.2ms)[0m  [1mSELECT  "spree_adjustments".* FROM "spree_adjustments" WHERE "spree_adjustments"."originator_type" = $1  ORDER BY "spree_adjustments"."id" ASC LIMIT 1000[0m  [["originator_type", "Spree::TaxRate"]]
  [1m[35mSpree::Adjustment Load (0.2ms)[0m  SELECT  "spree_adjustments".* FROM "spree_adjustments" WHERE "spree_adjustments"."originator_type" = $1  ORDER BY "spree_adjustments"."id" ASC LIMIT 1000  [["originator_type", "Spree::PromotionAction"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032014"]]
  [1m[35m (5.8ms)[0m  COMMIT
Migrating to RenameAdjustmentFields (20170531032015)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_adjustments" DROP "originator_id"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_adjustments" DROP "originator_type"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_adjustments" ADD "order_id" integer
  [1m[36mSpree::Adjustment Load (0.3ms)[0m  [1mSELECT  "spree_adjustments".* FROM "spree_adjustments" WHERE "spree_adjustments"."adjustable_type" = $1  ORDER BY "spree_adjustments"."id" ASC LIMIT 1000[0m  [["adjustable_type", "Spree::Order"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032015"]]
  [1m[36m (4.5ms)[0m  [1mCOMMIT[0m
Migrating to AddAdminNameColumnToSpreeShippingMethods (20170531032016)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "spree_shipping_methods" ADD "admin_name" character varying[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032016"]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAdminNameColumnToSpreeStockLocations (20170531032017)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_stock_locations" ADD "admin_name" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032017"]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
Migrating to AddShipmentTotalToSpreeOrders (20170531032018)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (175.0ms)[0m  [1mALTER TABLE "spree_orders" ADD "shipment_total" decimal(10,2) DEFAULT 0.0 NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032018"]]
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
Migrating to ExpandOrderNumberSize (20170531032019)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "spree_orders" ALTER COLUMN "number" TYPE character varying(32)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032019"]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
Migrating to RenameActivatorsToPromotions (20170531032020)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_activators" RENAME TO "spree_promotions"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "public"."spree_activators_id_seq" RENAME TO "spree_promotions_id_seq"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "spree_activators_pkey" RENAME TO "spree_promotions_pkey"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032020"]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
Migrating to AddAdjustmentTotalToLineItems (20170531032021)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (132.3ms)[0m  [1mALTER TABLE "spree_line_items" ADD "adjustment_total" decimal(10,2) DEFAULT 0.0[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032021"]]
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
Migrating to AddAdjustmentTotalToShipments (20170531032022)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (144.4ms)[0m  [1mALTER TABLE "spree_shipments" ADD "adjustment_total" decimal(10,2) DEFAULT 0.0[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032022"]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
Migrating to AddDepthToSpreeTaxons (20170531032023)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_taxons" ADD "depth" integer[0m
  [1m[35mSpree::Taxon Load (0.4ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032023"]]
  [1m[35m (20.9ms)[0m  COMMIT
Migrating to AddTaxTotalToLineItemsShipmentsAndOrders (20170531032024)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (147.9ms)[0m  ALTER TABLE "spree_line_items" ADD "tax_total" decimal(10,2) DEFAULT 0.0
  [1m[36m (145.1ms)[0m  [1mALTER TABLE "spree_shipments" ADD "tax_total" decimal(10,2) DEFAULT 0.0[0m
  [1m[35m (168.4ms)[0m  ALTER TABLE "spree_orders" ADD "tax_total" decimal(10,2) DEFAULT 0.0
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032024"]]
  [1m[35m (20.9ms)[0m  COMMIT
Migrating to AddShippingCategoryToShippingMethodsAndProducts (20170531032025)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::ShippingCategory Load (1.0ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories"  ORDER BY "spree_shipping_categories"."id" ASC LIMIT 1
  [1m[36mSpree::ShippingCategory Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."name" = 'Default' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "spree_shipping_categories" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Default"], ["created_at", "2017-06-06 16:43:47.072627"], ["updated_at", "2017-06-06 16:43:47.072627"]]
  [1m[36mSpree::ShippingMethod Load (0.3ms)[0m  [1mSELECT "spree_shipping_methods".* FROM "spree_shipping_methods" WHERE "spree_shipping_methods"."deleted_at" IS NULL[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "spree_products" SET "shipping_category_id" = 1 WHERE "spree_products"."deleted_at" IS NULL AND "spree_products"."shipping_category_id" IS NULL
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032025"]]
  [1m[35m (19.0ms)[0m  COMMIT
Migrating to MigrateOldShippingCalculators (20170531032026)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::ShippingMethod Load (0.2ms)[0m  SELECT "spree_shipping_methods".* FROM "spree_shipping_methods" WHERE "spree_shipping_methods"."deleted_at" IS NULL
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032026"]]
  [1m[35m (7.7ms)[0m  COMMIT
Migrating to AddCodeToSpreePromotionRules (20170531032027)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_promotion_rules" ADD "code" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032027"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to ChangeStatesRequiredForCountries (20170531032028)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_countries" ALTER COLUMN "states_required" SET DEFAULT 'f'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032028"]]
  [1m[35m (7.5ms)[0m  COMMIT
Migrating to AddDeletedAtToSpreeStockItems (20170531032029)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_stock_items" ADD "deleted_at" timestamp
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032029"]]
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to RemovePromotionsEventNameField (20170531032030)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_promotions" DROP "event_name"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032030"]]
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to AddPromoTotalToLineItemsAndShipmentsAndOrders (20170531032031)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (142.2ms)[0m  ALTER TABLE "spree_line_items" ADD "promo_total" decimal(10,2) DEFAULT 0.0
  [1m[36m (133.9ms)[0m  [1mALTER TABLE "spree_shipments" ADD "promo_total" decimal(10,2) DEFAULT 0.0[0m
  [1m[35m (179.7ms)[0m  ALTER TABLE "spree_orders" ADD "promo_total" decimal(10,2) DEFAULT 0.0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032031"]]
  [1m[35m (6.4ms)[0m  COMMIT
Migrating to RemoveUnusedCreditCardFields (20170531032032)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_credit_cards" DROP "start_month"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_credit_cards" DROP "start_year"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_credit_cards" DROP "issue_number"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032032"]]
  [1m[35m (3.3ms)[0m  COMMIT
Migrating to AddTrackInventoryToVariant (20170531032033)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (159.2ms)[0m  ALTER TABLE "spree_variants" ADD "track_inventory" boolean DEFAULT 't'
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032033"]]
  [1m[35m (31.0ms)[0m  COMMIT
Migrating to AddTaxCategoryToVariants (20170531032034)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_variants" ADD "tax_category_id" integer
  [1m[36m (42.0ms)[0m  [1mCREATE  INDEX  "index_spree_variants_on_tax_category_id" ON "spree_variants"  ("tax_category_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032034"]]
  [1m[36m (5.0ms)[0m  [1mCOMMIT[0m
Migrating to AddChannelToSpreeOrders (20170531032035)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (180.8ms)[0m  [1mALTER TABLE "spree_orders" ADD "channel" character varying DEFAULT 'spree'[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032035"]]
  [1m[36m (14.1ms)[0m  [1mCOMMIT[0m
Migrating to AddIncludedToAdjustments (20170531032036)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (139.7ms)[0m  [1mALTER TABLE "spree_adjustments" ADD "included" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032036"]]
  [1m[36m (12.4ms)[0m  [1mCOMMIT[0m
Migrating to RenameTaxTotalFields (20170531032037)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_line_items" RENAME COLUMN "tax_total" TO "additional_tax_total"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_shipments" RENAME COLUMN "tax_total" TO "additional_tax_total"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_orders" RENAME COLUMN "tax_total" TO "additional_tax_total"[0m
  [1m[35m (146.7ms)[0m  ALTER TABLE "spree_line_items" ADD "included_tax_total" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36m (133.9ms)[0m  [1mALTER TABLE "spree_shipments" ADD "included_tax_total" decimal(10,2) DEFAULT 0.0 NOT NULL[0m
  [1m[35m (190.7ms)[0m  ALTER TABLE "spree_orders" ADD "included_tax_total" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032037"]]
  [1m[35m (7.2ms)[0m  COMMIT
Migrating to AddLineItemIdToSpreeInventoryUnits (20170531032038)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_inventory_units" ADD "line_item_id" integer
  [1m[36m (42.7ms)[0m  [1mCREATE  INDEX  "index_spree_inventory_units_on_line_item_id" ON "spree_inventory_units"  ("line_item_id")[0m
  [1m[35mSpree::Shipment Load (0.5ms)[0m  SELECT  "spree_shipments".* FROM "spree_shipments"  ORDER BY "spree_shipments"."id" ASC LIMIT 1000
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032038"]]
  [1m[35m (5.1ms)[0m  COMMIT
Migrating to AddUpdatedAtToVariants (20170531032039)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_variants" ADD "updated_at" timestamp
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032039"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to AddPositionToClassifications (20170531032040)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_products_taxons" ADD "position" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032040"]]
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to CreateSpreeOrdersPromotions (20170531032041)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "spree_orders_promotions" ("order_id" integer, "promotion_id" integer) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032041"]]
  [1m[35m (8.2ms)[0m  COMMIT
Migrating to UniqueShippingMethodCategories (20170531032042)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::ShippingMethodCategory Load (0.5ms)[0m  SELECT shipping_category_id,shipping_method_id,COUNT(*) FROM "spree_shipping_method_categories" GROUP BY shipping_category_id,shipping_method_id HAVING COUNT(*) > 1
  [1m[36m (42.0ms)[0m  [1mCREATE UNIQUE INDEX  "unique_spree_shipping_method_categories" ON "spree_shipping_method_categories"  ("shipping_category_id", "shipping_method_id")[0m
  [1m[35m (0.3ms)[0m  DROP INDEX "index_spree_shipping_method_categories_on_shipping_category_id"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032042"]]
  [1m[35m (15.6ms)[0m  COMMIT
Migrating to AddItemCountToSpreeOrders (20170531032043)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (193.3ms)[0m  ALTER TABLE "spree_orders" ADD "item_count" integer DEFAULT 0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032043"]]
  [1m[35m (14.5ms)[0m  COMMIT
Migrating to RemoveValueTypeFromSpreePreferences (20170531032044)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_preferences" DROP "value_type"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032044"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to RenamePermalinkToSlugForProducts (20170531032045)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_products" RENAME COLUMN "permalink" TO "slug"
  [1m[36m (0.2ms)[0m  [1mALTER INDEX "index_spree_products_on_permalink" RENAME TO "index_spree_products_on_slug"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032045"]]
  [1m[36m (4.1ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexToVariantIdAndCurrencyOnPrices (20170531032046)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (37.5ms)[0m  [1mCREATE  INDEX  "index_spree_prices_on_variant_id_and_currency" ON "spree_prices"  ("variant_id", "currency")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032046"]]
  [1m[36m (14.4ms)[0m  [1mCOMMIT[0m
Migrating to RenameActivatorIdInRulesAndActionsToPromotionId (20170531032047)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_promotion_rules" RENAME COLUMN "activator_id" TO "promotion_id"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_promotion_actions" RENAME COLUMN "activator_id" TO "promotion_id"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032047"]]
  [1m[35m (5.8ms)[0m  COMMIT
Migrating to AddDeletedAtToSpreePrices (20170531032048)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_prices" ADD "deleted_at" timestamp
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032048"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to AddApproverIdAndApprovedAtToOrders (20170531032049)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_orders" ADD "approver_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_orders" ADD "approved_at" timestamp[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032049"]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
Migrating to AddConfirmationDeliveredToSpreeOrders (20170531032050)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (173.6ms)[0m  [1mALTER TABLE "spree_orders" ADD "confirmation_delivered" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032050"]]
  [1m[36m (23.2ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCaptureToPaymentMethods (20170531032051)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_payment_methods" ADD "auto_capture" boolean[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032051"]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreePaymentCaptureEvents (20170531032052)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (29.2ms)[0m  [1mCREATE TABLE "spree_payment_capture_events" ("id" serial primary key, "amount" decimal(10,2) DEFAULT 0.0, "payment_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_payment_capture_events_on_payment_id" ON "spree_payment_capture_events"  ("payment_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032052"]]
  [1m[35m (11.6ms)[0m  COMMIT
Migrating to AddUncapturedAmountToPayments (20170531032053)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (98.0ms)[0m  ALTER TABLE "spree_payments" ADD "uncaptured_amount" decimal(10,2) DEFAULT 0.0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032053"]]
  [1m[35m (21.4ms)[0m  COMMIT
Migrating to DefaultVariantWeightToZero (20170531032054)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_variants" SET weight = 0.0 WHERE "spree_variants"."weight" IS NULL
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_variants" ALTER COLUMN "weight" TYPE decimal(8,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_variants" ALTER COLUMN "weight" SET DEFAULT 0.0
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032054"]]
  [1m[35m (16.3ms)[0m  COMMIT
Migrating to AddTaxCategoryIdToShippingMethods (20170531032055)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipping_methods" ADD "tax_category_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032055"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to AddTaxRateIdToShippingRates (20170531032056)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipping_rates" ADD "tax_rate_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032056"]]
  [1m[35m (7.6ms)[0m  COMMIT
Migrating to AddPreTaxAmountToLineItemsAndShipments (20170531032057)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_line_items" ADD "pre_tax_amount" decimal(8,2)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_shipments" ADD "pre_tax_amount" decimal(8,2)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032057"]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
Migrating to AddMoreIndexes (20170531032058)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (30.4ms)[0m  [1mCREATE  INDEX  "index_spree_payment_methods_on_id_and_type" ON "spree_payment_methods"  ("id", "type")[0m
  [1m[35m (33.1ms)[0m  CREATE  INDEX  "index_spree_calculators_on_id_and_type" ON "spree_calculators"  ("id", "type")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_calculators_on_calculable_id_and_calculable_type" ON "spree_calculators"  ("calculable_id", "calculable_type")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_payments_on_payment_method_id" ON "spree_payments"  ("payment_method_id")
  [1m[36m (42.4ms)[0m  [1mCREATE  INDEX  "index_spree_promotion_actions_on_id_and_type" ON "spree_promotion_actions"  ("id", "type")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_promotion_actions_on_promotion_id" ON "spree_promotion_actions"  ("promotion_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_promotions_on_id_and_type" ON "spree_promotions"  ("id", "type")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_option_values_on_option_type_id" ON "spree_option_values"  ("option_type_id")
  [1m[36m (43.1ms)[0m  [1mCREATE  INDEX  "index_spree_shipments_on_stock_location_id" ON "spree_shipments"  ("stock_location_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032058"]]
  [1m[36m (5.5ms)[0m  [1mCOMMIT[0m
Migrating to AddConsideredRiskyToOrders (20170531032059)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (169.7ms)[0m  [1mALTER TABLE "spree_orders" ADD "considered_risky" boolean DEFAULT 'f'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032059"]]
  [1m[36m (14.7ms)[0m  [1mCOMMIT[0m
Migrating to AddPreferenceStoreToEverything (20170531032060)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_calculators" ADD "preferences" text[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_gateways" ADD "preferences" text
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_payment_methods" ADD "preferences" text[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_promotion_rules" ADD "preferences" text
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032060"]]
  [1m[35m (17.6ms)[0m  COMMIT
Migrating to AddUserIdToSpreeCreditCards (20170531032061)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_credit_cards" ADD "user_id" integer
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_credit_cards_on_user_id" ON "spree_credit_cards"  ("user_id")[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_credit_cards" ADD "payment_method_id" integer
  [1m[36m (31.6ms)[0m  [1mCREATE  INDEX  "index_spree_credit_cards_on_payment_method_id" ON "spree_credit_cards"  ("payment_method_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032061"]]
  [1m[36m (13.7ms)[0m  [1mCOMMIT[0m
Migrating to MigrateOldPreferences (20170531032062)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Calculator Load (0.4ms)[0m  [1mSELECT  "spree_calculators".* FROM "spree_calculators"  ORDER BY "spree_calculators"."id" ASC LIMIT 1000[0m
  [1m[35mSpree::PaymentMethod Load (0.5ms)[0m  SELECT  "spree_payment_methods".* FROM "spree_payment_methods" WHERE "spree_payment_methods"."deleted_at" IS NULL  ORDER BY "spree_payment_methods"."id" ASC LIMIT 1000
  [1m[36mSpree::PromotionRule Load (0.5ms)[0m  [1mSELECT  "spree_promotion_rules".* FROM "spree_promotion_rules"  ORDER BY "spree_promotion_rules"."id" ASC LIMIT 1000[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032062"]]
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeStores (20170531032063)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (72.0ms)[0m  [1mCREATE TABLE "spree_stores" ("id" serial primary key, "name" character varying, "url" character varying, "meta_description" text, "meta_keywords" text, "seo_title" character varying, "mail_from_address" character varying, "default_currency" character varying, "code" character varying, "default" boolean DEFAULT 'f' NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032063"]]
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateStoreFromPreferences (20170531032064)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE "spree_stores"."default" = $1  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m  [["default", "t"]]
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/app_configuration/default_meta_description"]]
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/app_configuration/default_meta_keywords"]]
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/app_configuration/default_seo_title"]]
  [1m[36mSpree::Store Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_stores" WHERE "spree_stores"."code" = 'spree' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "spree_stores" WHERE "spree_stores"."default" = $1  [["default", "t"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "spree_stores" ("name", "url", "mail_from_address", "default_currency", "code", "default", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "Spree Demo Site"], ["url", "demo.spreecommerce.com"], ["mail_from_address", "spree@example.com"], ["default_currency", "CLP"], ["code", "spree"], ["default", "t"], ["created_at", "2017-06-06 16:43:50.506408"], ["updated_at", "2017-06-06 16:43:50.506408"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032064"]]
  [1m[36m (20.8ms)[0m  [1mCOMMIT[0m
Migrating to AddTimestampsToSpreeAssets (20170531032065)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_assets" ADD "created_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_assets" ADD "updated_at" timestamp
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032065"]]
  [1m[35m (16.8ms)[0m  COMMIT
Migrating to CreateSpreeTaxonsPromotionRules (20170531032066)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (40.6ms)[0m  CREATE TABLE "spree_taxons_promotion_rules" ("id" serial primary key, "taxon_id" integer, "promotion_rule_id" integer) 
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_taxons_promotion_rules_on_taxon_id" ON "spree_taxons_promotion_rules"  ("taxon_id")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_taxons_promotion_rules_on_promotion_rule_id" ON "spree_taxons_promotion_rules"  ("promotion_rule_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032066"]]
  [1m[35m (22.1ms)[0m  COMMIT
Migrating to AddAdditionalStoreFields (20170531032067)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (38.9ms)[0m  CREATE  INDEX  "index_spree_stores_on_code" ON "spree_stores"  ("code")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_stores_on_default" ON "spree_stores"  ("default")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032067"]]
  [1m[36m (10.2ms)[0m  [1mCOMMIT[0m
Migrating to AddManyMissingIndexes (20170531032068)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_adjustments_on_adjustable_id_and_adjustable_type" ON "spree_adjustments"  ("adjustable_id", "adjustable_type")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_adjustments_on_eligible" ON "spree_adjustments"  ("eligible")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_adjustments_on_order_id" ON "spree_adjustments"  ("order_id")[0m
  [1m[35m (43.4ms)[0m  CREATE  INDEX  "index_spree_promotions_on_code" ON "spree_promotions"  ("code")
  [1m[36m (43.1ms)[0m  [1mCREATE  INDEX  "index_spree_promotions_on_expires_at" ON "spree_promotions"  ("expires_at")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_states_on_country_id" ON "spree_states"  ("country_id")
  [1m[36m (43.2ms)[0m  [1mCREATE  INDEX  "index_spree_stock_items_on_deleted_at" ON "spree_stock_items"  ("deleted_at")[0m
  [1m[35m (43.2ms)[0m  CREATE  INDEX  "index_spree_option_types_on_position" ON "spree_option_types"  ("position")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_option_values_on_position" ON "spree_option_values"  ("position")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_product_option_types_on_option_type_id" ON "spree_product_option_types"  ("option_type_id")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_product_option_types_on_product_id" ON "spree_product_option_types"  ("product_id")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_products_taxons_on_position" ON "spree_products_taxons"  ("position")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_promotions_on_starts_at" ON "spree_promotions"  ("starts_at")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_stores_on_url" ON "spree_stores"  ("url")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032068"]]
  [1m[35m (14.4ms)[0m  COMMIT
Migrating to CorrectSomePolymorphicIndexAndAddMoreMissing (20170531032069)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (37.6ms)[0m  CREATE  INDEX  "index_spree_addresses_on_country_id" ON "spree_addresses"  ("country_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_addresses_on_state_id" ON "spree_addresses"  ("state_id")[0m
  [1m[35m (0.2ms)[0m  DROP INDEX "index_spree_adjustments_on_source_type_and_source_id"
  [1m[36m (30.9ms)[0m  [1mCREATE  INDEX  "index_spree_adjustments_on_source_id_and_source_type" ON "spree_adjustments"  ("source_id", "source_type")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_credit_cards_on_address_id" ON "spree_credit_cards"  ("address_id")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_gateways_on_active" ON "spree_gateways"  ("active")[0m
  [1m[35m (45.7ms)[0m  CREATE  INDEX  "index_spree_gateways_on_test_mode" ON "spree_gateways"  ("test_mode")
  [1m[36m (29.8ms)[0m  [1mCREATE  INDEX  "index_spree_inventory_units_on_return_authorization_id" ON "spree_inventory_units"  ("return_authorization_id")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_line_items_on_tax_category_id" ON "spree_line_items"  ("tax_category_id")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_log_entries_on_source_id_and_source_type" ON "spree_log_entries"  ("source_id", "source_type")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_orders_on_approver_id" ON "spree_orders"  ("approver_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_orders_on_bill_address_id" ON "spree_orders"  ("bill_address_id")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_orders_on_confirmation_delivered" ON "spree_orders"  ("confirmation_delivered")
  [1m[36m (44.5ms)[0m  [1mCREATE  INDEX  "index_spree_orders_on_considered_risky" ON "spree_orders"  ("considered_risky")[0m
  [1m[35m (65.5ms)[0m  CREATE  INDEX  "index_spree_orders_on_created_by_id" ON "spree_orders"  ("created_by_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_orders_on_ship_address_id" ON "spree_orders"  ("ship_address_id")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_orders_on_shipping_method_id" ON "spree_orders"  ("shipping_method_id")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_orders_promotions_on_order_id_and_promotion_id" ON "spree_orders_promotions"  ("order_id", "promotion_id")[0m
  [1m[35m (43.3ms)[0m  CREATE  INDEX  "index_spree_payments_on_source_id_and_source_type" ON "spree_payments"  ("source_id", "source_type")
  [1m[36m (30.8ms)[0m  [1mCREATE  INDEX  "index_spree_prices_on_deleted_at" ON "spree_prices"  ("deleted_at")[0m
  [1m[35m (43.3ms)[0m  CREATE  INDEX  "index_spree_product_option_types_on_position" ON "spree_product_option_types"  ("position")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_product_properties_on_position" ON "spree_product_properties"  ("position")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_product_properties_on_property_id" ON "spree_product_properties"  ("property_id")
  [1m[36m (43.3ms)[0m  [1mCREATE  INDEX  "index_spree_products_on_shipping_category_id" ON "spree_products"  ("shipping_category_id")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_products_on_tax_category_id" ON "spree_products"  ("tax_category_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_promotion_action_line_items_on_promotion_action_id" ON "spree_promotion_action_line_items"  ("promotion_action_id")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_promotion_action_line_items_on_variant_id" ON "spree_promotion_action_line_items"  ("variant_id")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_promotion_rules_on_promotion_id" ON "spree_promotion_rules"  ("promotion_id")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_promotions_on_advertise" ON "spree_promotions"  ("advertise")
  [1m[36m (32.5ms)[0m  [1mCREATE  INDEX  "index_spree_return_authorizations_on_number" ON "spree_return_authorizations"  ("number")[0m
  [1m[35m (43.4ms)[0m  CREATE  INDEX  "index_spree_return_authorizations_on_order_id" ON "spree_return_authorizations"  ("order_id")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_return_authorizations_on_stock_location_id" ON "spree_return_authorizations"  ("stock_location_id")[0m
  [1m[35m (32.4ms)[0m  CREATE  INDEX  "index_spree_shipments_on_address_id" ON "spree_shipments"  ("address_id")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_shipping_methods_on_deleted_at" ON "spree_shipping_methods"  ("deleted_at")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_shipping_methods_on_tax_category_id" ON "spree_shipping_methods"  ("tax_category_id")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_shipping_rates_on_selected" ON "spree_shipping_rates"  ("selected")[0m
  [1m[35m (43.4ms)[0m  CREATE  INDEX  "index_spree_shipping_rates_on_tax_rate_id" ON "spree_shipping_rates"  ("tax_rate_id")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_state_changes_on_stateful_id_and_stateful_type" ON "spree_state_changes"  ("stateful_id", "stateful_type")[0m
  [1m[35m (32.3ms)[0m  CREATE  INDEX  "index_spree_state_changes_on_user_id" ON "spree_state_changes"  ("user_id")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_stock_items_on_backorderable" ON "spree_stock_items"  ("backorderable")[0m
  [1m[35m (33.3ms)[0m  CREATE  INDEX  "index_spree_stock_locations_on_active" ON "spree_stock_locations"  ("active")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_stock_locations_on_backorderable_default" ON "spree_stock_locations"  ("backorderable_default")[0m
  [1m[35m (43.2ms)[0m  CREATE  INDEX  "index_spree_stock_locations_on_country_id" ON "spree_stock_locations"  ("country_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_stock_locations_on_propagate_all_variants" ON "spree_stock_locations"  ("propagate_all_variants")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_stock_locations_on_state_id" ON "spree_stock_locations"  ("state_id")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_tax_categories_on_deleted_at" ON "spree_tax_categories"  ("deleted_at")[0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_tax_categories_on_is_default" ON "spree_tax_categories"  ("is_default")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_tax_rates_on_deleted_at" ON "spree_tax_rates"  ("deleted_at")[0m
  [1m[35m (43.3ms)[0m  CREATE  INDEX  "index_spree_tax_rates_on_included_in_price" ON "spree_tax_rates"  ("included_in_price")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_tax_rates_on_show_rate_in_label" ON "spree_tax_rates"  ("show_rate_in_label")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_tax_rates_on_tax_category_id" ON "spree_tax_rates"  ("tax_category_id")
  [1m[36m (32.1ms)[0m  [1mCREATE  INDEX  "index_spree_tax_rates_on_zone_id" ON "spree_tax_rates"  ("zone_id")[0m
  [1m[35m (31.9ms)[0m  CREATE  INDEX  "index_spree_taxonomies_on_position" ON "spree_taxonomies"  ("position")
  [1m[36m (32.4ms)[0m  [1mCREATE  INDEX  "index_spree_taxons_on_position" ON "spree_taxons"  ("position")[0m
  [1m[35m (43.2ms)[0m  CREATE  INDEX  "index_spree_trackers_on_active" ON "spree_trackers"  ("active")
  [1m[36m (32.0ms)[0m  [1mCREATE  INDEX  "index_spree_variants_on_deleted_at" ON "spree_variants"  ("deleted_at")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_variants_on_is_master" ON "spree_variants"  ("is_master")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_variants_on_position" ON "spree_variants"  ("position")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_variants_on_track_inventory" ON "spree_variants"  ("track_inventory")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_zone_members_on_zone_id" ON "spree_zone_members"  ("zone_id")[0m
  [1m[35m (44.4ms)[0m  CREATE  INDEX  "index_spree_zone_members_on_zoneable_id_and_zoneable_type" ON "spree_zone_members"  ("zoneable_id", "zoneable_type")
  [1m[36m (31.2ms)[0m  [1mCREATE  INDEX  "index_spree_zones_on_default_tax" ON "spree_zones"  ("default_tax")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032069"]]
  [1m[36m (10.4ms)[0m  [1mCOMMIT[0m
Migrating to AddUserIdCreatedByIdIndexToOrder (20170531032070)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (31.1ms)[0m  [1mCREATE  INDEX  "index_spree_orders_on_user_id_and_created_by_id" ON "spree_orders"  ("user_id", "created_by_id")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032070"]]
  [1m[36m (9.4ms)[0m  [1mCOMMIT[0m
Migrating to ChangeSpreePriceAmountPrecision (20170531032071)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_prices" ALTER COLUMN "amount" TYPE decimal(10,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_line_items" ALTER COLUMN "price" TYPE decimal(10,2)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_line_items" ALTER COLUMN "cost_price" TYPE decimal(10,2)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_variants" ALTER COLUMN "cost_price" TYPE decimal(10,2)
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032071"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to AddTokenToSpreeOrders (20170531032072)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_orders" ADD "guest_token" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032072"]]
  [1m[35m (7.0ms)[0m  COMMIT
Migrating to MoveOrderTokenFromTokenizedPermission (20170531032073)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  UPDATE spree_orders
               SET guest_token = spree_tokenized_permissions.token
               FROM spree_tokenized_permissions
               WHERE spree_tokenized_permissions.permissable_id = spree_orders.id
                  AND spree_tokenized_permissions.permissable_type = 'Spree::Order'
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032073"]]
  [1m[35m (7.0ms)[0m  COMMIT
Migrating to SetShipmentTotalForUsersUpgrading (20170531032074)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Order Load (0.6ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE ("spree_orders"."completed_at" IS NOT NULL) AND (shipment_total = 0)  ORDER BY "spree_orders"."id" ASC LIMIT 1000
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032074"]]
  [1m[35m (7.7ms)[0m  COMMIT
Migrating to DropCreditCardFirstNameAndLastName (20170531032075)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "spree_credit_cards" DROP "first_name"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_credit_cards" DROP "last_name"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032075"]]
  [1m[36m (18.2ms)[0m  [1mCOMMIT[0m
Migrating to AddDeletedAtToSpreePromotionActions (20170531032076)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_promotion_actions" ADD "deleted_at" timestamp[0m
  [1m[35m (31.1ms)[0m  CREATE  INDEX  "index_spree_promotion_actions_on_deleted_at" ON "spree_promotion_actions"  ("deleted_at")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032076"]]
  [1m[35m (8.7ms)[0m  COMMIT
Migrating to RemoveUncapturedAmountFromSpreePayments (20170531032077)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_payments" DROP "uncaptured_amount"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032077"]]
  [1m[35m (8.5ms)[0m  COMMIT
Migrating to CreateSpreeRefunds (20170531032078)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (66.6ms)[0m  CREATE TABLE "spree_refunds" ("id" serial primary key, "payment_id" integer, "return_authorization_id" integer, "amount" decimal(10,2) DEFAULT 0.0 NOT NULL, "transaction_id" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032078"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to CreateSpreeReturnAuthorizationInventoryUnit (20170531032079)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (35.1ms)[0m  CREATE TABLE "spree_return_authorization_inventory_units" ("id" serial primary key, "return_authorization_id" integer, "inventory_unit_id" integer, "exchange_variant_id" integer, "received_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032079"]]
  [1m[35m (6.4ms)[0m  COMMIT
Migrating to RenameReturnAuthorizationInventoryUnitToReturnItems (20170531032080)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_return_authorization_inventory_units" RENAME TO "spree_return_items"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "public"."spree_return_authorization_inventory_units_id_seq" RENAME TO "spree_return_items_id_seq"[0m
  [1m[35m (0.2ms)[0m  ALTER INDEX "spree_return_authorization_inventory_units_pkey" RENAME TO "spree_return_items_pkey"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032080"]]
  [1m[35m (5.2ms)[0m  COMMIT
Migrating to BackfillLineItemPreTaxAmount (20170531032081)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m        UPDATE spree_line_items
      SET pre_tax_amount = ((price * quantity) + promo_total) - included_tax_total
      WHERE pre_tax_amount IS NULL;

  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032081"]]
  [1m[35m (8.6ms)[0m  COMMIT
Migrating to RecreateSpreeReturnAuthorizations (20170531032082)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::ReturnAuthorization Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_return_authorizations" LIMIT 1
  [1m[36m (0.7ms)[0m  [1mDROP TABLE "spree_return_authorizations"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_inventory_units" DROP "return_authorization_id"
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "spree_adjustments" SET "source_type" = 'Spree::LegacyReturnAuthorization' WHERE "spree_adjustments"."source_type" = $1[0m  [["source_type", "Spree::ReturnAuthorization"]]
  [1m[35m (75.9ms)[0m  CREATE TABLE "spree_return_authorizations" ("id" serial primary key, "number" character varying, "state" character varying, "amount" decimal(10,2) DEFAULT 0.0 NOT NULL, "order_id" integer, "reason" text, "created_at" timestamp, "updated_at" timestamp, "stock_location_id" integer) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032082"]]
  [1m[35m (6.2ms)[0m  COMMIT
Migrating to AddAmountFieldsToReturnItems (20170531032083)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (58.4ms)[0m  ALTER TABLE "spree_return_items" ADD "pre_tax_amount" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36m (55.3ms)[0m  [1mALTER TABLE "spree_return_items" ADD "included_tax_total" decimal(10,2) DEFAULT 0.0 NOT NULL[0m
  [1m[35m (66.7ms)[0m  ALTER TABLE "spree_return_items" ADD "additional_tax_total" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032083"]]
  [1m[35m (14.4ms)[0m  COMMIT
Migrating to DropReturnAuthorizationAmount (20170531032084)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_return_authorizations" DROP "amount"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032084"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to CreateSpreeReturnAuthorizationReasons (20170531032085)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (82.4ms)[0m  CREATE TABLE "spree_return_authorization_reasons" ("id" serial primary key, "name" character varying, "active" boolean DEFAULT 't', "mutable" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Better price available') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Better price available"], ["created_at", "2017-06-06 16:43:54.256741"], ["updated_at", "2017-06-06 16:43:54.256741"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Missed estimated delivery date') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Missed estimated delivery date"], ["created_at", "2017-06-06 16:43:54.259376"], ["updated_at", "2017-06-06 16:43:54.259376"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Missing parts or accessories') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Missing parts or accessories"], ["created_at", "2017-06-06 16:43:54.262312"], ["updated_at", "2017-06-06 16:43:54.262312"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Damaged/Defective') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Damaged/Defective"], ["created_at", "2017-06-06 16:43:54.264256"], ["updated_at", "2017-06-06 16:43:54.264256"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Different from what was ordered') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Different from what was ordered"], ["created_at", "2017-06-06 16:43:54.265906"], ["updated_at", "2017-06-06 16:43:54.265906"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Different from description') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Different from description"], ["created_at", "2017-06-06 16:43:54.267522"], ["updated_at", "2017-06-06 16:43:54.267522"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('No longer needed/wanted') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "No longer needed/wanted"], ["created_at", "2017-06-06 16:43:54.269173"], ["updated_at", "2017-06-06 16:43:54.269173"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Accidental order') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Accidental order"], ["created_at", "2017-06-06 16:43:54.270758"], ["updated_at", "2017-06-06 16:43:54.270758"]]
  [1m[36mSpree::ReturnAuthorizationReason Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_return_authorization_reasons" WHERE LOWER("spree_return_authorization_reasons"."name") = LOWER('Unauthorized purchase') LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_return_authorization_reasons" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"  [["name", "Unauthorized purchase"], ["created_at", "2017-06-06 16:43:54.272423"], ["updated_at", "2017-06-06 16:43:54.272423"]]
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_return_authorizations" ADD "return_authorization_reason_id" integer[0m
  [1m[35m (28.4ms)[0m  CREATE  INDEX  "index_return_authorizations_on_return_authorization_reason_id" ON "spree_return_authorizations"  ("return_authorization_reason_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032085"]]
  [1m[35m (13.4ms)[0m  COMMIT
Migrating to CreateSpreeRefundReasons (20170531032086)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (83.6ms)[0m  CREATE TABLE "spree_refund_reasons" ("id" serial primary key, "name" character varying, "active" boolean DEFAULT 't', "mutable" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_refunds" ADD "refund_reason_id" integer[0m
  [1m[35m (31.5ms)[0m  CREATE  INDEX  "index_refunds_on_refund_reason_id" ON "spree_refunds"  ("refund_reason_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032086"]]
  [1m[35m (12.3ms)[0m  COMMIT
Migrating to RenameReturnAuthorizationReason (20170531032087)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_return_authorizations" RENAME COLUMN "reason" TO "memo"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032087"]]
  [1m[35m (7.2ms)[0m  COMMIT
Migrating to CreateSpreePromotionCategories (20170531032088)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (63.2ms)[0m  CREATE TABLE "spree_promotion_categories" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_promotions" ADD "promotion_category_id" integer[0m
  [1m[35m (31.2ms)[0m  CREATE  INDEX  "index_spree_promotions_on_promotion_category_id" ON "spree_promotions"  ("promotion_category_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032088"]]
  [1m[35m (11.1ms)[0m  COMMIT
Migrating to DropReceivedAtOnReturnItems (20170531032089)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_return_items" DROP "received_at"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032089"]]
  [1m[35m (8.4ms)[0m  COMMIT
Migrating to AddReceptionAndAcceptanceStatusToReturnItems (20170531032090)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (31.1ms)[0m  ALTER TABLE "spree_return_items" ADD "reception_status" character varying
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_return_items" ADD "acceptance_status" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032090"]]
  [1m[36m (9.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateDefaultRefundReason (20170531032091)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::RefundReason Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_refund_reasons" WHERE LOWER("spree_refund_reasons"."name") = LOWER('Return processing') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "spree_refund_reasons" ("name", "mutable", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Return processing"], ["mutable", "f"], ["created_at", "2017-06-06 16:43:54.637967"], ["updated_at", "2017-06-06 16:43:54.637967"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032091"]]
  [1m[35m (11.1ms)[0m  COMMIT
Migrating to AddDefaultToSpreeStockLocations (20170531032092)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032092"]]
  [1m[36m (7.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeCustomerReturns (20170531032093)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (64.8ms)[0m  [1mCREATE TABLE "spree_customer_returns" ("id" serial primary key, "number" character varying, "stock_location_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032093"]]
  [1m[36m (10.1ms)[0m  [1mCOMMIT[0m
Migrating to AddCustomerReturnIdToReturnItem (20170531032094)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_return_items" ADD "customer_return_id" integer[0m
  [1m[35m (29.6ms)[0m  CREATE  INDEX  "index_return_items_on_customer_return_id" ON "spree_return_items"  ("customer_return_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032094"]]
  [1m[35m (9.5ms)[0m  COMMIT
Migrating to CreateFriendlyIdSlugs (20170531032095)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (89.5ms)[0m  CREATE TABLE "friendly_id_slugs" ("id" serial primary key, "slug" character varying NOT NULL, "sluggable_id" integer NOT NULL, "sluggable_type" character varying(50), "scope" character varying, "created_at" timestamp) 
  [1m[36m (30.6ms)[0m  [1mCREATE  INDEX  "index_friendly_id_slugs_on_sluggable_id" ON "friendly_id_slugs"  ("sluggable_id")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_friendly_id_slugs_on_slug_and_sluggable_type" ON "friendly_id_slugs"  ("slug", "sluggable_type")
  [1m[36m (31.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope" ON "friendly_id_slugs"  ("slug", "sluggable_type", "scope")[0m
  [1m[35m (43.4ms)[0m  CREATE  INDEX  "index_friendly_id_slugs_on_sluggable_type" ON "friendly_id_slugs"  ("sluggable_type")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032095"]]
  [1m[35m (6.3ms)[0m  COMMIT
Migrating to RenameSpreeRefundReturnAuthorizationId (20170531032096)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_refunds" RENAME COLUMN "return_authorization_id" TO "customer_return_id"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032096"]]
  [1m[35m (17.5ms)[0m  COMMIT
Migrating to IncreaseReturnItemPreTaxAmountPrecision (20170531032097)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (103.5ms)[0m  ALTER TABLE "spree_return_items" ALTER COLUMN "pre_tax_amount" TYPE decimal(12,4)
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "spree_return_items" ALTER COLUMN "pre_tax_amount" SET DEFAULT 0.0[0m
  [1m[35m (0.7ms)[0m  UPDATE "spree_return_items" SET "pre_tax_amount"=0.0 WHERE "pre_tax_amount" IS NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_return_items" ALTER "pre_tax_amount" SET NOT NULL[0m
  [1m[35m (115.2ms)[0m  ALTER TABLE "spree_return_items" ALTER COLUMN "included_tax_total" TYPE decimal(12,4)
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_return_items" ALTER COLUMN "included_tax_total" SET DEFAULT 0.0[0m
  [1m[35m (0.2ms)[0m  UPDATE "spree_return_items" SET "included_tax_total"=0.0 WHERE "included_tax_total" IS NULL
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_return_items" ALTER "included_tax_total" SET NOT NULL[0m
  [1m[35m (98.5ms)[0m  ALTER TABLE "spree_return_items" ALTER COLUMN "additional_tax_total" TYPE decimal(12,4)
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_return_items" ALTER COLUMN "additional_tax_total" SET DEFAULT 0.0[0m
  [1m[35m (0.3ms)[0m  UPDATE "spree_return_items" SET "additional_tax_total"=0.0 WHERE "additional_tax_total" IS NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_return_items" ALTER "additional_tax_total" SET NOT NULL[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032097"]]
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
Migrating to CopyProductSlugsToSlugHistory (20170531032098)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mINSERT INTO friendly_id_slugs (slug, sluggable_id, sluggable_type, created_at)
  SELECT slug, id, 'Spree::Product', '2017-06-06 16:43:55.397143' 
  FROM spree_products
  WHERE slug IS NOT NULL
  ORDER BY id
[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032098"]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeReimbursements (20170531032099)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (73.0ms)[0m  [1mCREATE TABLE "spree_reimbursements" ("id" serial primary key, "number" character varying, "reimbursement_status" character varying, "customer_return_id" integer, "order_id" integer, "total" decimal(10,2), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_reimbursements_on_customer_return_id" ON "spree_reimbursements"  ("customer_return_id")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_reimbursements_on_order_id" ON "spree_reimbursements"  ("order_id")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_refunds" DROP "customer_return_id"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_refunds" ADD "reimbursement_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_return_items" ADD "reimbursement_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032099"]]
  [1m[35m (11.6ms)[0m  COMMIT
Migrating to AddPromotionableToSpreeProducts (20170531032100)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (355.9ms)[0m  ALTER TABLE "spree_products" ADD "promotionable" boolean DEFAULT 't'
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032100"]]
  [1m[35m (8.0ms)[0m  COMMIT
Migrating to AddExchangeInventoryUnitForeignKeys (20170531032101)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "spree_return_items" ADD "exchange_inventory_unit_id" integer
  [1m[36m (74.8ms)[0m  [1mCREATE  INDEX  "index_spree_return_items_on_exchange_inventory_unit_id" ON "spree_return_items"  ("exchange_inventory_unit_id")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032101"]]
  [1m[36m (15.6ms)[0m  [1mCOMMIT[0m
Migrating to AddAcceptanceStatusErrorsToReturnItem (20170531032102)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_return_items" ADD "acceptance_status_errors" text[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032102"]]
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeReimbursementTypes (20170531032103)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (76.2ms)[0m  [1mCREATE TABLE "spree_reimbursement_types" ("id" serial primary key, "name" character varying, "active" boolean DEFAULT 't', "mutable" boolean DEFAULT 't', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSpree::ReimbursementType Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_reimbursement_types" WHERE LOWER("spree_reimbursement_types"."name") = LOWER('original') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "spree_reimbursement_types" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "original"], ["created_at", "2017-06-06 16:43:56.123156"], ["updated_at", "2017-06-06 16:43:56.123156"]]
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_return_items" ADD "preferred_reimbursement_type_id" integer
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_return_items" ADD "override_reimbursement_type_id" integer[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032103"]]
  [1m[36m (10.8ms)[0m  [1mCOMMIT[0m
Migrating to AddDefaultToShipmentCost (20170531032104)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_shipments" ALTER COLUMN "cost" TYPE decimal(10,2)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_shipments" ALTER COLUMN "cost" SET DEFAULT 0.0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_shipments" SET "cost" = 0 WHERE "spree_shipments"."cost" IS NULL[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032104"]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
Migrating to AddDefaultToSpreeCreditCards (20170531032105)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (171.1ms)[0m  [1mALTER TABLE "spree_credit_cards" ADD "default" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032105"]]
  [1m[36m (13.8ms)[0m  [1mCOMMIT[0m
Migrating to MakeExistingCreditCardsDefault (20170531032106)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "spree_credit_cards" SET "default" = 't' WHERE "spree_credit_cards"."id" IN (SELECT "spree_credit_cards"."id" FROM "spree_credit_cards" LEFT OUTER JOIN spree_credit_cards cc2 ON cc2.user_id = spree_credit_cards.user_id AND spree_credit_cards.created_at < cc2.created_at WHERE ("spree_credit_cards"."user_id" IS NOT NULL) AND (cc2.user_id IS NULL))[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032106"]]
  [1m[36m (6.5ms)[0m  [1mCOMMIT[0m
Migrating to AddTypeToReimbursementType (20170531032107)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_reimbursement_types" ADD "type" character varying[0m
  [1m[35m (36.3ms)[0m  CREATE  INDEX  "index_spree_reimbursement_types_on_type" ON "spree_reimbursement_types"  ("type")
  [1m[36mSpree::ReimbursementType Load (0.2ms)[0m  [1mSELECT  "spree_reimbursement_types".* FROM "spree_reimbursement_types" WHERE "spree_reimbursement_types"."name" = $1  ORDER BY LOWER(spree_reimbursement_types.name) LIMIT 1[0m  [["name", "original"]]
  [1m[35mSpree::ReimbursementType Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_reimbursement_types" WHERE (LOWER("spree_reimbursement_types"."name") = LOWER('original') AND "spree_reimbursement_types"."id" != 1) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_reimbursement_types" SET "type" = $1, "updated_at" = $2 WHERE "spree_reimbursement_types"."id" = $3[0m  [["type", "Spree::ReimbursementType::OriginalPayment"], ["updated_at", "2017-06-06 16:43:56.403795"], ["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032107"]]
  [1m[36m (19.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeReimbursementCredits (20170531032108)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (71.5ms)[0m  [1mCREATE TABLE "spree_reimbursement_credits" ("id" serial primary key, "amount" decimal(10,2) DEFAULT 0.0 NOT NULL, "reimbursement_id" integer, "creditable_id" integer, "creditable_type" character varying) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032108"]]
  [1m[36m (14.1ms)[0m  [1mCOMMIT[0m
Migrating to AddMetaTitleToSpreeProducts (20170531032109)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_products" ADD "meta_title" character varying[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032109"]]
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
Migrating to AddKindToZone (20170531032110)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_zones" ADD "kind" character varying[0m
  [1m[35m (47.0ms)[0m  CREATE  INDEX  "index_spree_zones_on_kind" ON "spree_zones"  ("kind")
  [1m[36mSpree::Zone Load (0.4ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones"  ORDER BY "spree_zones"."id" ASC LIMIT 1000[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032110"]]
  [1m[36m (31.8ms)[0m  [1mCOMMIT[0m
Migrating to AddCodeToSpreeTaxCategories (20170531032111)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_tax_categories" ADD "tax_code" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032111"]]
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
Migrating to DefaultPreTaxAmountShouldBeZero (20170531032112)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_line_items" ALTER COLUMN "pre_tax_amount" TYPE decimal(8,2)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_line_items" ALTER COLUMN "pre_tax_amount" SET DEFAULT 0
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_shipments" ALTER COLUMN "pre_tax_amount" TYPE decimal(8,2)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipments" ALTER COLUMN "pre_tax_amount" SET DEFAULT 0
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032112"]]
  [1m[35m (4.9ms)[0m  COMMIT
Migrating to AddCodeToSpreeShippingMethods (20170531032113)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_shipping_methods" ADD "code" character varying
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032113"]]
  [1m[35m (8.3ms)[0m  COMMIT
Migrating to AddCancelAuditFieldsToSpreeOrders (20170531032114)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_orders" ADD "canceled_at" timestamp
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_orders" ADD "canceler_id" integer[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032114"]]
  [1m[36m (7.7ms)[0m  [1mCOMMIT[0m
Migrating to AddStoreIdToOrders (20170531032115)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_orders" ADD "store_id" integer[0m
  [1m[35mSpree::Store Load (0.3ms)[0m  SELECT  "spree_stores".* FROM "spree_stores" WHERE "spree_stores"."default" = $1  ORDER BY "spree_stores"."id" ASC LIMIT 1  [["default", "t"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_orders" SET "store_id" = 1 WHERE "spree_orders"."store_id" IS NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032115"]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeTaxonsPrototypes (20170531032116)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (54.2ms)[0m  [1mCREATE TABLE "spree_taxons_prototypes" ("id" serial primary key, "taxon_id" integer, "prototype_id" integer) [0m
  [1m[35m (29.1ms)[0m  CREATE  INDEX  "index_spree_taxons_prototypes_on_taxon_id" ON "spree_taxons_prototypes"  ("taxon_id")
  [1m[36m (32.2ms)[0m  [1mCREATE  INDEX  "index_spree_taxons_prototypes_on_prototype_id" ON "spree_taxons_prototypes"  ("prototype_id")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032116"]]
  [1m[36m (11.6ms)[0m  [1mCOMMIT[0m
Migrating to AddStateLockVersionToOrder (20170531032117)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (445.3ms)[0m  [1mALTER TABLE "spree_orders" ADD "state_lock_version" integer DEFAULT 0 NOT NULL[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032117"]]
  [1m[36m (16.8ms)[0m  [1mCOMMIT[0m
Migrating to AddCounterCacheFromSpreeVariantsToSpreeStockItems (20170531032118)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (314.4ms)[0m  [1mALTER TABLE "spree_variants" ADD "stock_items_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35mSpree::Variant Load (0.7ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL  ORDER BY "spree_variants"."id" ASC LIMIT 1000
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032118"]]
  [1m[35m (11.2ms)[0m  COMMIT
Migrating to FixAdjustmentOrderPresence (20170531032119)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Adjustment Load (0.3ms)[0m  SELECT  "spree_adjustments".* FROM "spree_adjustments" WHERE "spree_adjustments"."order_id" IS NULL  ORDER BY "spree_adjustments"."id" ASC LIMIT 1000
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032119"]]
  [1m[35m (7.5ms)[0m  COMMIT
Migrating to UpdateClassificationsPositions (20170531032120)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Taxon Load (0.4ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032120"]]
  [1m[35m (7.7ms)[0m  COMMIT
Migrating to AddGuestTokenIndexToSpreeOrders (20170531032121)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (37.3ms)[0m  CREATE  INDEX  "index_spree_orders_on_guest_token" ON "spree_orders"  ("guest_token")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032121"]]
  [1m[35m (14.5ms)[0m  COMMIT
Migrating to RemoveTokenPermissionsTable (20170531032122)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  DROP TABLE "spree_tokenized_permissions"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032122"]]
  [1m[35m (7.8ms)[0m  COMMIT
Migrating to RemoveExtraProductsSlugIndex (20170531032123)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  DROP INDEX "permalink_idx_unique"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032123"]]
  [1m[35m (7.4ms)[0m  COMMIT
Migrating to UpdateProductSlugIndex (20170531032124)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  DROP INDEX "index_spree_products_on_slug"
  [1m[36m (56.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_spree_products_on_slug" ON "spree_products"  ("slug")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032124"]]
  [1m[36m (14.0ms)[0m  [1mCOMMIT[0m
Migrating to RenameIdentifierToNumberForPayment (20170531032125)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_payments" RENAME COLUMN "identifier" TO "number"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032125"]]
  [1m[36m (17.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeStoreCredits (20170531032126)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (172.7ms)[0m  [1mCREATE TABLE "spree_store_credits" ("id" serial primary key, "user_id" integer, "category_id" integer, "created_by_id" integer, "amount" decimal(8,2) DEFAULT 0.0 NOT NULL, "amount_used" decimal(8,2) DEFAULT 0.0 NOT NULL, "memo" text, "deleted_at" timestamp, "currency" character varying, "amount_authorized" decimal(8,2) DEFAULT 0.0 NOT NULL, "originator_id" integer, "originator_type" character varying, "type_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (76.3ms)[0m  CREATE  INDEX  "index_spree_store_credits_on_deleted_at" ON "spree_store_credits"  ("deleted_at")
  [1m[36m (76.9ms)[0m  [1mCREATE  INDEX  "index_spree_store_credits_on_user_id" ON "spree_store_credits"  ("user_id")[0m
  [1m[35m (33.2ms)[0m  CREATE  INDEX  "index_spree_store_credits_on_type_id" ON "spree_store_credits"  ("type_id")
  [1m[36m (43.1ms)[0m  [1mCREATE  INDEX  "spree_store_credits_originator" ON "spree_store_credits"  ("originator_id", "originator_type")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032126"]]
  [1m[36m (9.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeStoreCreditCategories (20170531032127)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (109.6ms)[0m  [1mCREATE TABLE "spree_store_credit_categories" ("id" serial primary key, "name" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032127"]]
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeStoreCreditEvents (20170531032128)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (77.1ms)[0m  [1mCREATE TABLE "spree_store_credit_events" ("id" serial primary key, "store_credit_id" integer NOT NULL, "action" character varying NOT NULL, "amount" decimal(8,2), "authorization_code" character varying NOT NULL, "user_total_amount" decimal(8,2) DEFAULT 0.0 NOT NULL, "originator_id" integer, "originator_type" character varying, "deleted_at" timestamp, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (31.3ms)[0m  CREATE  INDEX  "index_spree_store_credit_events_on_store_credit_id" ON "spree_store_credit_events"  ("store_credit_id")
  [1m[36m (165.2ms)[0m  [1mCREATE  INDEX  "spree_store_credit_events_originator" ON "spree_store_credit_events"  ("originator_id", "originator_type")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032128"]]
  [1m[36m (6.0ms)[0m  [1mCOMMIT[0m
Migrating to CreateSpreeStoreCreditTypes (20170531032129)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (69.6ms)[0m  [1mCREATE TABLE "spree_store_credit_types" ("id" serial primary key, "name" character varying, "priority" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.0ms)[0m  CREATE  INDEX  "index_spree_store_credit_types_on_priority" ON "spree_store_credit_types"  ("priority")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032129"]]
  [1m[35m (5.1ms)[0m  COMMIT
Migrating to RemoveEnvironmentFromPaymentMethod (20170531032130)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_payment_methods" SET "active" = 'f' WHERE "spree_payment_methods"."deleted_at" IS NULL AND (environment != 'development')
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_payment_methods" DROP "environment"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032130"]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
Migrating to AddResellableToReturnItems (20170531032131)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (137.9ms)[0m  [1mALTER TABLE "spree_return_items" ADD "resellable" boolean DEFAULT 't' NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032131"]]
  [1m[36m (14.5ms)[0m  [1mCOMMIT[0m
Migrating to AddCodeToSpreePromotionCategories (20170531032132)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_promotion_categories" ADD "code" character varying[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032132"]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
Migrating to RemoveEnvironmentFromTracker (20170531032133)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_trackers" SET "active" = 'f' WHERE (environment != 'development')[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_trackers" DROP "environment"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032133"]]
  [1m[35m (17.5ms)[0m  COMMIT
Migrating to RemoveSpreeConfigurations (20170531032134)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  DROP TABLE "spree_configurations"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032134"]]
  [1m[35m (7.5ms)[0m  COMMIT
Migrating to AddIndexToSpreeStockItemsVariantId (20170531032135)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (45.8ms)[0m  CREATE  INDEX  "index_spree_stock_items_on_variant_id" ON "spree_stock_items"  ("variant_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032135"]]
  [1m[35m (13.8ms)[0m  COMMIT
Migrating to EnsurePaymentsHaveNumbers (20170531032136)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (36.2ms)[0m  CREATE  INDEX  "index_spree_payments_on_number" ON "spree_payments"  ("number")
Scoped order and limit are ignored, it's forced to be batch order and batch size
  [1m[36mSpree::Payment Load (0.4ms)[0m  [1mSELECT  "spree_payments".* FROM "spree_payments" WHERE "spree_payments"."number" IS NULL  ORDER BY "spree_payments"."id" ASC LIMIT 1000[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032136"]]
  [1m[36m (19.7ms)[0m  [1mCOMMIT[0m
Migrating to AddMissingIndexesOnSpreeTables (20170531032137)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (36.4ms)[0m  [1mCREATE  INDEX  "index_promotion_rules_users_on_user_id_and_promotion_rule_id" ON "spree_promotion_rules_users"  ("user_id", "promotion_rule_id")[0m
  [1m[35m (30.0ms)[0m  CREATE  INDEX  "index_products_promotion_rules_on_promotion_rule_and_product" ON "spree_products_promotion_rules"  ("promotion_rule_id", "product_id")
  [1m[36m (27.6ms)[0m  [1mCREATE  INDEX  "index_spree_orders_on_canceler_id" ON "spree_orders"  ("canceler_id")[0m
  [1m[35m (39.8ms)[0m  CREATE  INDEX  "index_spree_orders_on_store_id" ON "spree_orders"  ("store_id")
  [1m[36m (30.4ms)[0m  [1mCREATE  INDEX  "index_spree_orders_promotions_on_promotion_id_and_order_id" ON "spree_orders_promotions"  ("promotion_id", "order_id")[0m
  [1m[35m (30.6ms)[0m  CREATE  INDEX  "index_spree_properties_prototypes_on_prototype_id" ON "spree_properties_prototypes"  ("prototype_id")
  [1m[36m (31.4ms)[0m  [1mCREATE  INDEX  "index_properties_prototypes_on_prototype_and_property" ON "spree_properties_prototypes"  ("prototype_id", "property_id")[0m
  [1m[35m (29.5ms)[0m  CREATE  INDEX  "index_spree_taxons_prototypes_on_prototype_id_and_taxon_id" ON "spree_taxons_prototypes"  ("prototype_id", "taxon_id")
  [1m[36m (30.1ms)[0m  [1mCREATE  INDEX  "index_spree_option_types_prototypes_on_prototype_id" ON "spree_option_types_prototypes"  ("prototype_id")[0m
  [1m[35m (40.4ms)[0m  CREATE  INDEX  "index_option_types_prototypes_on_prototype_and_option_type" ON "spree_option_types_prototypes"  ("prototype_id", "option_type_id")
  [1m[36m (30.2ms)[0m  [1mCREATE  INDEX  "index_option_values_variants_on_option_value_and_variant" ON "spree_option_values_variants"  ("option_value_id", "variant_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032137"]]
  [1m[36m (8.1ms)[0m  [1mCOMMIT[0m
Migrating to RemoveDuplicatedIndexesFromMultiColumns (20170531032138)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_adjustments_on_order_id"[0m
  [1m[35m (0.2ms)[0m  DROP INDEX "index_spree_option_types_prototypes_on_prototype_id"
  [1m[36m (41.5ms)[0m  [1mCREATE  INDEX  "index_spree_option_types_prototypes_on_option_type_id" ON "spree_option_types_prototypes"  ("option_type_id")[0m
  [1m[35m (0.2ms)[0m  DROP INDEX "index_option_values_variants_on_option_value_and_variant"
  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_spree_option_values_variants_on_variant_id"[0m
  [1m[35m (30.5ms)[0m  CREATE  INDEX  "index_spree_option_values_variants_on_option_value_id" ON "spree_option_values_variants"  ("option_value_id")
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_spree_orders_on_user_id"[0m
  [1m[35m (0.1ms)[0m  DROP INDEX "index_spree_orders_promotions_on_order_id_and_promotion_id"
  [1m[36m (30.4ms)[0m  [1mCREATE  INDEX  "index_spree_orders_promotions_on_order_id" ON "spree_orders_promotions"  ("order_id")[0m
  [1m[35m (0.2ms)[0m  DROP INDEX "index_products_promotion_rules_on_promotion_rule_id"
  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_promotion_rules_users_on_user_id"[0m
  [1m[35m (0.1ms)[0m  DROP INDEX "index_spree_properties_prototypes_on_prototype_id"
  [1m[36m (0.2ms)[0m  [1mDROP INDEX "index_spree_stock_items_on_stock_location_id"[0m
  [1m[35m (0.1ms)[0m  DROP INDEX "index_spree_taxons_prototypes_on_prototype_id"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032138"]]
  [1m[35m (14.2ms)[0m  COMMIT
Migrating to RemoveUserIndexFromSpreeStateChanges (20170531032139)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  DROP INDEX "index_spree_state_changes_on_user_id"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032139"]]
  [1m[35m (4.2ms)[0m  COMMIT
Migrating to FixAdjustmentOrderId (20170531032140)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  UPDATE spree_adjustments SET order_id = adjustable_id WHERE adjustable_type = 'Spree::Order' ;
  [1m[36m (0.3ms)[0m  [1mUPDATE spree_adjustments SET order_id = (SELECT order_id FROM spree_line_items WHERE spree_line_items.id = spree_adjustments.adjustable_id) WHERE adjustable_type = 'Spree::LineItem'[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "spree_adjustments" ALTER COLUMN "order_id" TYPE integer
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_adjustments" ALTER "order_id" SET NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032140"]]
  [1m[36m (6.2ms)[0m  [1mCOMMIT[0m
Migrating to AddPositionToSpreePaymentMethods (20170531032141)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (136.4ms)[0m  [1mALTER TABLE "spree_payment_methods" ADD "position" integer DEFAULT 0[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032141"]]
  [1m[36m (15.8ms)[0m  [1mCOMMIT[0m
Migrating to AddDeletedAtToFriendlyIdSlugs (20170531032142)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "friendly_id_slugs" ADD "deleted_at" timestamp[0m
  [1m[35m (35.1ms)[0m  CREATE  INDEX  "index_friendly_id_slugs_on_deleted_at" ON "friendly_id_slugs"  ("deleted_at")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032142"]]
  [1m[35m (15.4ms)[0m  COMMIT
Migrating to IncreaseScaleOnPreTaxAmounts (20170531032143)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m        UPDATE spree_shipments
      SET pre_tax_amount = (cost + promo_total) - included_tax_total
      WHERE pre_tax_amount IS NULL;

  [1m[36m (171.9ms)[0m  [1mALTER TABLE "spree_line_items" ALTER COLUMN "pre_tax_amount" TYPE decimal(12,4)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_line_items" ALTER COLUMN "pre_tax_amount" SET DEFAULT 0.0
  [1m[36m (0.3ms)[0m  [1mUPDATE "spree_line_items" SET "pre_tax_amount"=0.0 WHERE "pre_tax_amount" IS NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_line_items" ALTER "pre_tax_amount" SET NOT NULL
  [1m[36m (209.4ms)[0m  [1mALTER TABLE "spree_shipments" ALTER COLUMN "pre_tax_amount" TYPE decimal(12,4)[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_shipments" ALTER COLUMN "pre_tax_amount" SET DEFAULT 0.0
  [1m[36m (0.3ms)[0m  [1mUPDATE "spree_shipments" SET "pre_tax_amount"=0.0 WHERE "pre_tax_amount" IS NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_shipments" ALTER "pre_tax_amount" SET NOT NULL
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032143"]]
  [1m[35m (19.5ms)[0m  COMMIT
Migrating to AddTaxableAdjustmentTotalToLineItem (20170531032144)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (185.7ms)[0m  ALTER TABLE "spree_line_items" ADD "taxable_adjustment_total" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36m (178.5ms)[0m  [1mALTER TABLE "spree_line_items" ADD "non_taxable_adjustment_total" decimal(10,2) DEFAULT 0.0 NOT NULL[0m
  [1m[35m (212.6ms)[0m  ALTER TABLE "spree_shipments" ADD "taxable_adjustment_total" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36m (211.1ms)[0m  [1mALTER TABLE "spree_shipments" ADD "non_taxable_adjustment_total" decimal(10,2) DEFAULT 0.0 NOT NULL[0m
  [1m[35m (515.0ms)[0m  ALTER TABLE "spree_orders" ADD "taxable_adjustment_total" decimal(10,2) DEFAULT 0.0 NOT NULL
  [1m[36m (618.2ms)[0m  [1mALTER TABLE "spree_orders" ADD "non_taxable_adjustment_total" decimal(10,2) DEFAULT 0.0 NOT NULL[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032144"]]
  [1m[36m (12.8ms)[0m  [1mCOMMIT[0m
Migrating to MigratePaymentMethodsDisplay (20170531032145)
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36mSpree::PaymentMethod Load (0.7ms)[0m  [1mSELECT "spree_payment_methods".* FROM "spree_payment_methods" WHERE "spree_payment_methods"."deleted_at" IS NULL[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "spree_payment_methods" ALTER COLUMN "display_on" TYPE character varying
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_payment_methods" ALTER COLUMN "display_on" SET DEFAULT 'both'[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032145"]]
  [1m[36m (8.6ms)[0m  [1mCOMMIT[0m
Migrating to EnableActsAsParanoidOnCalculators (20170531032146)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_calculators" ADD "deleted_at" timestamp[0m
  [1m[35m (38.4ms)[0m  CREATE  INDEX  "index_spree_calculators_on_deleted_at" ON "spree_calculators"  ("deleted_at")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032146"]]
  [1m[35m (12.5ms)[0m  COMMIT
Migrating to SpreePaymentMethodStoreCredits (20170531032147)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::PaymentMethod::StoreCredit Load (0.2ms)[0m  SELECT  "spree_payment_methods".* FROM "spree_payment_methods" WHERE "spree_payment_methods"."type" IN ('Spree::PaymentMethod::StoreCredit') AND "spree_payment_methods"."deleted_at" IS NULL AND "spree_payment_methods"."name" = $1 AND "spree_payment_methods"."description" = $2 AND "spree_payment_methods"."active" = $3 AND "spree_payment_methods"."display_on" = $4 LIMIT 1  [["name", "Store Credit"], ["description", "Store Credit"], ["active", "t"], ["display_on", "back_end"]]
  [1m[36mSpree::PaymentMethod Load (0.4ms)[0m  [1mSELECT  "spree_payment_methods".* FROM "spree_payment_methods" WHERE (spree_payment_methods.position IS NOT NULL) AND (1 = 1)  ORDER BY spree_payment_methods.position DESC LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "spree_payment_methods" ("type", "name", "description", "display_on", "created_at", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["type", "Spree::PaymentMethod::StoreCredit"], ["name", "Store Credit"], ["description", "Store Credit"], ["display_on", "back_end"], ["created_at", "2017-06-06 16:44:02.393146"], ["updated_at", "2017-06-06 16:44:02.393146"], ["position", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032147"]]
  [1m[35m (13.2ms)[0m  COMMIT
Migrating to RenameHasAndBelongsToAssociationsToModelNames (20170531032148)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_option_types_prototypes" RENAME TO "spree_option_type_prototypes"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "index_spree_option_types_prototypes_on_option_type_id" RENAME TO "index_spree_option_type_prototypes_on_option_type_id"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_option_values_variants" RENAME TO "spree_option_value_variants"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "index_spree_option_values_variants_on_option_value_id" RENAME TO "index_spree_option_value_variants_on_option_value_id"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_orders_promotions" RENAME TO "spree_order_promotions"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "index_spree_orders_promotions_on_order_id" RENAME TO "index_spree_order_promotions_on_order_id"[0m
  [1m[35m (0.1ms)[0m  ALTER INDEX "index_spree_orders_promotions_on_promotion_id_and_order_id" RENAME TO "index_spree_order_promotions_on_promotion_id_and_order_id"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_products_promotion_rules" RENAME TO "spree_product_promotion_rules"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_taxons_promotion_rules" RENAME TO "spree_promotion_rule_taxons"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "public"."spree_taxons_promotion_rules_id_seq" RENAME TO "spree_promotion_rule_taxons_id_seq"[0m
  [1m[35m (0.1ms)[0m  ALTER INDEX "spree_taxons_promotion_rules_pkey" RENAME TO "spree_promotion_rule_taxons_pkey"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "index_spree_taxons_promotion_rules_on_promotion_rule_id" RENAME TO "index_spree_promotion_rule_taxons_on_promotion_rule_id"[0m
  [1m[35m (0.1ms)[0m  ALTER INDEX "index_spree_taxons_promotion_rules_on_taxon_id" RENAME TO "index_spree_promotion_rule_taxons_on_taxon_id"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_promotion_rules_users" RENAME TO "spree_promotion_rule_users"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_properties_prototypes" RENAME TO "spree_property_prototypes"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_taxons_prototypes" RENAME TO "spree_prototype_taxons"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "public"."spree_taxons_prototypes_id_seq" RENAME TO "spree_prototype_taxons_id_seq"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "spree_taxons_prototypes_pkey" RENAME TO "spree_prototype_taxons_pkey"[0m
  [1m[35m (0.1ms)[0m  ALTER INDEX "index_spree_taxons_prototypes_on_prototype_id_and_taxon_id" RENAME TO "index_spree_prototype_taxons_on_prototype_id_and_taxon_id"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "index_spree_taxons_prototypes_on_taxon_id" RENAME TO "index_spree_prototype_taxons_on_taxon_id"[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "spree_roles_users" RENAME TO "spree_role_users"
  [1m[36m (0.1ms)[0m  [1mALTER INDEX "index_spree_roles_users_on_role_id" RENAME TO "index_spree_role_users_on_role_id"[0m
  [1m[35m (0.1ms)[0m  ALTER INDEX "index_spree_roles_users_on_user_id" RENAME TO "index_spree_role_users_on_user_id"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "spree_shipping_methods_zones" RENAME TO "spree_shipping_method_zones"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032148"]]
  [1m[36m (6.6ms)[0m  [1mCOMMIT[0m
Migrating to SpreeStoreCreditTypes (20170531032149)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::StoreCreditType Load (0.3ms)[0m  [1mSELECT  "spree_store_credit_types".* FROM "spree_store_credit_types" WHERE "spree_store_credit_types"."name" = $1 AND "spree_store_credit_types"."priority" = $2 LIMIT 1[0m  [["name", "Expiring"], ["priority", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "spree_store_credit_types" ("name", "priority", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Expiring"], ["priority", 1], ["created_at", "2017-06-06 16:44:02.463798"], ["updated_at", "2017-06-06 16:44:02.463798"]]
  [1m[36mSpree::StoreCreditType Load (0.3ms)[0m  [1mSELECT  "spree_store_credit_types".* FROM "spree_store_credit_types" WHERE "spree_store_credit_types"."name" = $1 AND "spree_store_credit_types"."priority" = $2 LIMIT 1[0m  [["name", "Non-expiring"], ["priority", 2]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "spree_store_credit_types" ("name", "priority", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["name", "Non-expiring"], ["priority", 2], ["created_at", "2017-06-06 16:44:02.466739"], ["updated_at", "2017-06-06 16:44:02.466739"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032149"]]
  [1m[35m (6.7ms)[0m  COMMIT
Migrating to AddDiscontinuedToProductsAndVariants (20170531032150)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_products" ADD "discontinue_on" timestamp
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_variants" ADD "discontinue_on" timestamp[0m
  [1m[35m (25.8ms)[0m  CREATE  INDEX  "index_spree_products_on_discontinue_on" ON "spree_products"  ("discontinue_on")
  [1m[36m (31.0ms)[0m  [1mCREATE  INDEX  "index_spree_variants_on_discontinue_on" ON "spree_variants"  ("discontinue_on")[0m
  [1m[35mSpree::Product Load (0.6ms)[0m  SELECT "spree_products".* FROM "spree_products" WHERE ("spree_products"."deleted_at" IS NOT NULL)
  [1m[36mSpree::Variant Load (0.5ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE ("spree_variants"."deleted_at" IS NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032150"]]
  [1m[36m (8.2ms)[0m  [1mCOMMIT[0m
Migrating to RemoveShippingMethodIdFromSpreeOrders (20170531032151)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "spree_orders" DROP "shipping_method_id"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032151"]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
Migrating to AddIdColumnToEarlierHabtmTables (20170531032152)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (220.4ms)[0m  [1mALTER TABLE "spree_option_type_prototypes" ADD "id" serial primary key[0m
  [1m[35m (133.7ms)[0m  ALTER TABLE "spree_option_value_variants" ADD "id" serial primary key
  [1m[36m (200.4ms)[0m  [1mALTER TABLE "spree_order_promotions" ADD "id" serial primary key[0m
  [1m[35m (167.2ms)[0m  ALTER TABLE "spree_product_promotion_rules" ADD "id" serial primary key
  [1m[36m (122.9ms)[0m  [1mALTER TABLE "spree_promotion_rule_users" ADD "id" serial primary key[0m
  [1m[35m (89.4ms)[0m  ALTER TABLE "spree_property_prototypes" ADD "id" serial primary key
  [1m[36m (137.8ms)[0m  [1mALTER TABLE "spree_role_users" ADD "id" serial primary key[0m
  [1m[35m (52.1ms)[0m  ALTER TABLE "spree_shipping_method_zones" ADD "id" serial primary key
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032152"]]
  [1m[35m (13.2ms)[0m  COMMIT
Migrating to AddIndexes (20170531032153)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (39.3ms)[0m  CREATE  INDEX  "index_spree_assets_on_position" ON "spree_assets"  ("position")
  [1m[36m (33.4ms)[0m  [1mCREATE  INDEX  "index_spree_option_types_on_name" ON "spree_option_types"  ("name")[0m
  [1m[35m (54.5ms)[0m  CREATE  INDEX  "index_spree_option_values_on_name" ON "spree_option_values"  ("name")
  [1m[36m (43.6ms)[0m  [1mCREATE  INDEX  "index_spree_prices_on_variant_id" ON "spree_prices"  ("variant_id")[0m
  [1m[35m (32.2ms)[0m  CREATE  INDEX  "index_spree_properties_on_name" ON "spree_properties"  ("name")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_roles_on_name" ON "spree_roles"  ("name")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_shipping_categories_on_name" ON "spree_shipping_categories"  ("name")
  [1m[36m (32.3ms)[0m  [1mCREATE  INDEX  "index_spree_taxons_on_lft" ON "spree_taxons"  ("lft")[0m
  [1m[35m (32.1ms)[0m  CREATE  INDEX  "index_spree_taxons_on_rgt" ON "spree_taxons"  ("rgt")
  [1m[36m (43.3ms)[0m  [1mCREATE  INDEX  "index_spree_taxons_on_name" ON "spree_taxons"  ("name")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032153"]]
  [1m[36m (7.0ms)[0m  [1mCOMMIT[0m
Migrating to AddApiKeyToSpreeUsers (20170531032154)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_users" ADD "api_key" character varying(40)[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032154"]]
  [1m[36m (18.1ms)[0m  [1mCOMMIT[0m
Migrating to ResizeApiKeyField (20170531032155)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_users" ALTER COLUMN "api_key" TYPE character varying(48)[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032155"]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
Migrating to RenameApiKeyToSpreeApiKey (20170531032156)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_users" RENAME COLUMN "api_key" TO "spree_api_key"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032156"]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
Migrating to AddIndexToUserSpreeApiKey (20170531032157)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (34.3ms)[0m  [1mCREATE  INDEX  "index_spree_users_on_spree_api_key" ON "spree_users"  ("spree_api_key")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032157"]]
  [1m[36m (6.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateUsers (20170531032158)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032158"]]
  [1m[35m (8.1ms)[0m  COMMIT
Migrating to RenameColumnsForDevise (20170531032159)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032159"]]
  [1m[36m (7.3ms)[0m  [1mCOMMIT[0m
Migrating to ConvertUserRememberField (20170531032160)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "spree_users" DROP "remember_created_at"[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "spree_users" ADD "remember_created_at" timestamp
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032160"]]
  [1m[35m (7.6ms)[0m  COMMIT
Migrating to AddResetPasswordSentAtToSpreeUsers (20170531032161)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032161"]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
Migrating to MakeUsersEmailIndexUnique (20170531032162)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (46.2ms)[0m  [1mCREATE UNIQUE INDEX  "email_idx_unique" ON "spree_users"  ("email")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032162"]]
  [1m[36m (5.9ms)[0m  [1mCOMMIT[0m
Migrating to AddDeletedAtToUsers (20170531032163)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_users" ADD "deleted_at" timestamp[0m
  [1m[35m (34.8ms)[0m  CREATE  INDEX  "index_spree_users_on_deleted_at" ON "spree_users"  ("deleted_at")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032163"]]
  [1m[35m (5.3ms)[0m  COMMIT
Migrating to AddConfirmableToUsers (20170531032164)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "spree_users" ADD "confirmation_token" character varying
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "spree_users" ADD "confirmed_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "spree_users" ADD "confirmation_sent_at" timestamp
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20170531032164"]]
  [1m[35m (7.2ms)[0m  COMMIT
Migrating to AddMissingIndicesOnUser (20170531032165)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (33.8ms)[0m  CREATE  INDEX  "index_spree_users_on_bill_address_id" ON "spree_users"  ("bill_address_id")
  [1m[36m (29.9ms)[0m  [1mCREATE  INDEX  "index_spree_users_on_ship_address_id" ON "spree_users"  ("ship_address_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032165"]]
  [1m[36m (4.6ms)[0m  [1mCOMMIT[0m
Migrating to CreateSkrillTransactions (20170531032166)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (70.5ms)[0m  [1mCREATE TABLE "spree_skrill_transactions" ("id" serial primary key, "email" character varying, "amount" float, "currency" character varying, "transaction_id" integer, "customer_id" integer, "payment_type" character varying, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032166"]]
  [1m[36m (14.8ms)[0m  [1mCOMMIT[0m
Migrating to UpdateBraintreePaymentMethodType (20170531032167)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_payment_methods" SET "type" = 'Spree::Gateway::BraintreeGateway' WHERE "spree_payment_methods"."deleted_at" IS NULL AND "spree_payment_methods"."type" = $1[0m  [["type", "Spree::Gateway::Braintree"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032167"]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
Migrating to UpdateStripePaymentMethodType (20170531032168)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_payment_methods" SET "type" = 'Spree::Gateway::StripeGateway' WHERE "spree_payment_methods"."deleted_at" IS NULL AND "spree_payment_methods"."type" = $1[0m  [["type", "Spree::Gateway::Stripe"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032168"]]
  [1m[36m (6.9ms)[0m  [1mCOMMIT[0m
Migrating to UpdateBalancedPaymentMethodType (20170531032169)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_payment_methods" SET "type" = 'Spree::Gateway::BalancedGateway' WHERE "spree_payment_methods"."deleted_at" IS NULL AND "spree_payment_methods"."type" = $1[0m  [["type", "Spree::Gateway::Balanced"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032169"]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
Migrating to UpdatePaypalPaymentMethodType (20170531032170)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_payment_methods" SET "type" = 'Spree::Gateway::PayPalGateway' WHERE "spree_payment_methods"."deleted_at" IS NULL AND "spree_payment_methods"."type" = $1[0m  [["type", "Spree::Gateway::PayPal"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032170"]]
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
Migrating to MigrateStripePreferences (20170531032171)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Load (0.6ms)[0m  [1mSELECT "spree_preferences".* FROM "spree_preferences" WHERE ("key" LIKE 'spree/gateway/stripe_gateway/login%')[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20170531032171"]]
  [1m[36m (6.8ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (1.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'friendly_id_slugs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_addresses'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_adjustments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_assets'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_calculators'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_countries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_credit_cards'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_customer_returns'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_gateways'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_inventory_units'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_line_items'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_log_entries'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_option_type_prototypes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_option_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_option_value_variants'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_option_values'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_order_promotions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_orders'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_payment_capture_events'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_payment_methods'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_payments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_preferences'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_prices'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_product_option_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_product_promotion_rules'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_product_properties'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_products'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_products_taxons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotion_action_line_items'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotion_actions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotion_categories'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotion_rule_taxons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotion_rule_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotion_rules'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_promotions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_properties'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_property_prototypes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_prototype_taxons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_prototypes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_refund_reasons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_refunds'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_reimbursement_credits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_reimbursement_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_reimbursements'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_return_authorization_reasons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_return_authorizations'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_return_items'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_role_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_roles'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_shipments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_shipping_categories'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_shipping_method_categories'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_shipping_method_zones'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_shipping_methods'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_shipping_rates'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_skrill_transactions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_state_changes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_states'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_stock_items'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_stock_locations'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_stock_movements'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_stock_transfers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_store_credit_categories'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_store_credit_events'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_store_credit_types'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_store_credits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_stores'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_tax_categories'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_tax_rates'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_taxonomies'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_taxons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_trackers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_variants'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_zone_members'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'spree_zones'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE "spree_preferences"."key" = 'spree/app_configuration/currency' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "spree_preferences" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["key", "spree/app_configuration/currency"], ["value", "--- CLP\n...\n"], ["created_at", "2017-06-06 16:44:11.848196"], ["updated_at", "2017-06-06 16:44:11.848196"]]
  [1m[36m (55.2ms)[0m  [1mCOMMIT[0m
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)


Started GET "/" for 127.0.0.1 at 2017-06-06 12:44:19 -0400
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Spree::HomeController#index as HTML
  [1m[36mSpree::Preference Load (0.2ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Taxonomy Load (0.7ms)[0m  SELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at
  Rendered spree/shared/_taxonomies.html.erb (14.4ms)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614781') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614990') AND ("spree_products".available_on <= '2017-06-06 16:44:19.614979') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", "t"]]
  [1m[35mSQL (1.5ms)[0m  SELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:44:19.765217') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:44:19.765397') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614781') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614990') AND ("spree_products".available_on <= '2017-06-06 16:44:19.614979') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.8ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.9ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614781') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614990') AND ("spree_products".available_on <= '2017-06-06 16:44:19.614979') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614781') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614990') AND ("spree_products".available_on <= '2017-06-06 16:44:19.614979') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614781') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:19.614990') AND ("spree_products".available_on <= '2017-06-06 16:44:19.614979') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  Rendered spree/shared/_products.html.erb (56.0ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spree_frontend-3.1.5/app/views/spree/home/index.html.erb within spree/layouts/spree_application (200.0ms)
  Rendered spree/shared/_head.html.erb (3308.8ms)
  Rendered spree/shared/_google_analytics.js.erb (13.3ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[36m (0.8ms)[0m  [1mSELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL[0m
  [1m[35mSpree::Taxon Load (0.4ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"
  Rendered spree/shared/_search.html.erb (40.1ms)
  Rendered spree/shared/_nav_bar.html.erb (42.2ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.9ms)
  Rendered spree/shared/_header.html.erb (86.4ms)
  Rendered spree/shared/_sidebar.html.erb (0.3ms)
Completed 200 OK in 3828ms (Views: 3680.2ms | ActiveRecord: 17.1ms)


Started GET "/assets/spree/frontend/frontend_bootstrap.self-3ac6d7c7a52356a5255b0194db21408db5630eeb182621eefd3d2034c91bd27c.css?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend.self-e73dc9de72274c38c22893ab23f2a409bb2001bd63595499790b46cf2f0c3c4a.css?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/all.self-33fc4a513acb9a5f3fd4ba26b89c94184e5d028c4bd40eee6736d3ccfea5c140.css?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/jquery_ujs.self-784a997f6726036b1993eb2217c9cb558e1cbb801c6da88105588c56f13b466a.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8b42e4c0073393abee.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/transition.self-6ad2488465135ab731a045a8ebbe3ea2fc501aed286042496eda1664fdd07ba9.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/alert.self-742145c5bb847aafdadc6e339be795628f8bc25f177e851f03a8c42278eb0312.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/button.self-126ac9bf0e7f2d8568f8da3a00fd5f0fac6eae0946331003370161fbf8d7975e.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/carousel.self-e47323f363ceb3dc0bdbce05e36e709ed428e339833a41140a85cb0af24b8127.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/collapse.self-2eb697f62b587bb786ff940d82dd4be88cdeeaf13ca128e3da3850c5fcaec301.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/dropdown.self-561cca1cbaf67474e01e9536f106bad541594860a6df997004591c1c1957a147.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/modal.self-3e78617ade5663314b7ee0ea10375a5b34d59ffbade44939e3f2a4e4ef2019b3.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/tab.self-5bf7078b682f8b131332eefa46b45fa5eff2eca745fc0d03e2991450888f7c28.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/affix.self-6d6f1a7fc5c8aabf3547fa1b794fab6268f54bc55ad815e55873c71f52513517.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/scrollspy.self-969f3c5f48cdf1e439c7fa1154c13b948715f5c689f87837c0b64521d3b46ef6.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/tooltip.self-05afb177e08f98997ccfc84fa08a215e4b27d48d5fe4d049080675e9dffd8199.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap/popover.self-0aa93860b59fe7393f1dd490f54b3cb994f9d6155adffce034d4e14ae361b041.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/bootstrap-sprockets.self-fbfa5ad7d9aa0afe439ec4ff3883acc4cb92b62cb67c40d674320c9aa1d4642d.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/jquery.payment.self-38d1c43bb5a79a62bce3ec642fe216db420582062f0990bb7ce095fe9698a834.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/jquery.validate/jquery.validate.min.self-ff387f76d0c68bc92a0a0a6167be0413ebd547db067eaf64a95d066e61655518.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/jsuri.self-090126b483ac28538a8bd132dce89500493c079744010067a5e79b94f57c0122.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree.self-3537dd0d44b5a6a3e36dc3ddff0668075ec7688b84ef1d78f3d5df3b0880f28b.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/cart.self-5907be3c192d3104648886d27735864e4fefb1b56db406173d69a5dc2bbc22c3.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/checkout.self-d127b3baa6b2f6f6585dc009dcff30bfdc6c6c019fae9a6441c2ed2aab4a6b16.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/checkout/address.self-8b5f80cd1f217bd71389d6fc6b82efc71e9c81d73b46e19a572a9f3377cb769e.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/checkout/payment.self-712ba3fa8424885a09e537de9921037f5be414366cb6109832d7822798441821.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/product.self-8e623f7f108f76febb02c47c1d58b5cabf59ab5183893b647375f27398f42f13.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend.self-1e135afb54bf948ed616b7e518ea9f59c8edad95a2d1dfbae8adc60b167c5f6c.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/account.self-701baa9147339958eb4ccc4bd8e4f199d8b9258dc02a0acf1790c746b0b43b8b.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/spree_auth.self-75a11da44c802486bc6f65640aa48a730f0f684c5c07a42ba3cd1735eb3fb070.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:23 -0400


Started GET "/assets/spree/frontend/all.self-cb715ade8208ca614adcefe484df803bed6d65b27b52ba06264930b4627dcfd7.js?body=1" for 127.0.0.1 at 2017-06-06 12:44:24 -0400


Started GET "/assets/favicon-92e86d463e909754599d66730477622cd3dd0b9bff58c47c9c38bebceb8073e5.ico" for 127.0.0.1 at 2017-06-06 12:44:24 -0400


Started GET "/assets/logo/spree_50-1c7335be355d4672a35c5023956d0c883f254831f3e3dae3f2ca05976ceb5e50.png" for 127.0.0.1 at 2017-06-06 12:44:24 -0400


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:44:24 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[36mSpree::Preference Load (0.6ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Store Load (0.3ms)[0m  SELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1
  [1m[36mSpree::Order Load (0.4ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (22.9ms)
  Couldn't find template for digesting: store/cart_link
Completed 200 OK in 88ms (Views: 65.8ms | ActiveRecord: 2.1ms)


Started GET "/assets/spree_header-198b754a34f1428c25f64303be8ac2aae84a076433af18ca55b65d7cbf1a0e13.jpg" for 127.0.0.1 at 2017-06-06 12:44:24 -0400


Started GET "/assets/bootstrap/glyphicons-halflings-regular-fe185d11a49676890d47bb783312a0cda5a44c4039214094e7957b4c040ef11c.woff2" for 127.0.0.1 at 2017-06-06 12:44:24 -0400
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "spree_products" WHERE "spree_products"."deleted_at" IS NULL
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::TaxCategory Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "spree_tax_categories" WHERE (LOWER("spree_tax_categories"."name") = LOWER('IVA') AND "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSpree::TaxCategory Load (0.2ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."is_default" = $1 AND ("spree_tax_categories"."id" IS NOT NULL)  ORDER BY "spree_tax_categories"."id" ASC LIMIT 1  [["is_default", "t"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "spree_tax_categories" ("name", "is_default", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "IVA"], ["is_default", "t"], ["created_at", "2017-06-06 16:44:37.616250"], ["updated_at", "2017-06-06 16:44:37.616250"]]
  [1m[35m (11.0ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::TaxCategory Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_tax_categories" WHERE (LOWER("spree_tax_categories"."name") = LOWER('IVA') AND "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" != 1 AND "spree_tax_categories"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSpree::TaxCategory Load (0.1ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."is_default" = $1 AND ("spree_tax_categories"."id" != $2)  ORDER BY "spree_tax_categories"."id" ASC LIMIT 1[0m  [["is_default", "t"], ["id", 1]]
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::TaxCategory Load (0.2ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Product Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'yogurt' LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'yogurt') LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '/5' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::ShippingCategory Load (0.2ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'yogurt' AND "spree_products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", "Yogurt"], ["description", "Yogurt del sur. La magia está en el color"], ["available_on", "2017-06-06 16:44:37.723983"], ["meta_keywords", "Yogur"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "yogurt"], ["created_at", "2017-06-06 16:44:37.783464"], ["updated_at", "2017-06-06 16:44:37.783464"]]
  [1m[36mSpree::Variant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '/5' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1  [["product_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["is_master", "t"], ["sku", "/5"], ["cost_currency", "CLP"], ["product_id", 1], ["updated_at", "2017-06-06 16:44:37.786150"], ["position", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"  [["currency", "CLP"], ["amount", "445.0"], ["variant_id", 1]]
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:37.792561' WHERE "spree_variants"."id" = $1  [["id", 1]]
  [1m[36mSpree::Product Load (0.2ms)[0m  [1mSELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.794567' WHERE "spree_products"."id" = $1  [["id", 1]]
  [1m[36mSpree::Taxon Load (0.6ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.843519' WHERE 1=0
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.846770' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSpree::StockLocation Load (0.3ms)[0m  SELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1  [["propagate_all_variants", "t"]]
  [1m[36mSpree::StockItem Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["variant_id", 1], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:37.875357"], ["updated_at", "2017-06-06 16:44:37.875357"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:37.878107' WHERE "spree_variants"."id" = $1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.879065' WHERE "spree_products"."id" = $1[0m  [["id", 1]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.881012' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.881746' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.883031' WHERE "spree_products"."id" = $1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.883907' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.884533' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 1], ["sluggable_type", "Spree::Product"]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3[0m  [["sluggable_id", 1], ["sluggable_type", "Spree::Product"], ["slug", "yogurt"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["sluggable_id", 1], ["sluggable_type", "Spree::Product"], ["slug", "yogurt"], ["created_at", "2017-06-06 16:44:37.901362"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.902993' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.903788' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36m (11.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '/5' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 1) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'yogurt' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 1) LIMIT 1
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 1], ["sluggable_type", "Spree::Product"]]
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'margarina' LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'margarina') LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Variant Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '11' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::ShippingCategory Load (0.1ms)[0m  [1mSELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSpree::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'margarina' AND "spree_products"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Margarina"], ["description", "Esta es la mejor Margarina, excelente para el pan"], ["available_on", "2017-06-06 16:44:37.921427"], ["meta_keywords", "Margarina"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "margarina"], ["created_at", "2017-06-06 16:44:37.930593"], ["updated_at", "2017-06-06 16:44:37.930593"]]
  [1m[35mSpree::Variant Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '11' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1[0m  [["product_id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["is_master", "t"], ["sku", "11"], ["cost_currency", "CLP"], ["product_id", 2], ["updated_at", "2017-06-06 16:44:37.932769"], ["position", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["currency", "CLP"], ["amount", "255.0"], ["variant_id", 2]]
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:37.935995' WHERE "spree_variants"."id" = $1[0m  [["id", 2]]
  [1m[35mSpree::Product Load (0.1ms)[0m  SELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.937725' WHERE "spree_products"."id" = $1[0m  [["id", 2]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.939550' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.940330' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSpree::StockLocation Load (0.1ms)[0m  [1mSELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1[0m  [["propagate_all_variants", "t"]]
  [1m[35mSpree::StockItem Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 2 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["variant_id", 2], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:37.944314"], ["updated_at", "2017-06-06 16:44:37.944314"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:37.946263' WHERE "spree_variants"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.947101' WHERE "spree_products"."id" = $1  [["id", 2]]
  [1m[36mSpree::Taxon Load (0.2ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.948865' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.949565' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.950829' WHERE "spree_products"."id" = $1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.951719' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.952525' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mFriendlyId::Slug Load (0.3ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 2], ["sluggable_type", "Spree::Product"]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3  [["sluggable_id", 2], ["sluggable_type", "Spree::Product"], ["slug", "margarina"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sluggable_id", 2], ["sluggable_type", "Spree::Product"], ["slug", "margarina"], ["created_at", "2017-06-06 16:44:37.956959"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.958420' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.959235' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35m (11.6ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '11' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 2) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'margarina' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 2) LIMIT 1[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 2], ["sluggable_type", "Spree::Product"]]
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'cereal-de-arroz' LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'cereal-de-arroz') LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Variant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '17' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::ShippingCategory Load (0.1ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSpree::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'cereal-de-arroz' AND "spree_products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", "Cereal de Arroz"], ["description", "Un cereal muy nutritivo. Made in China"], ["available_on", "2017-06-06 16:44:37.977009"], ["meta_keywords", "Cereal de Arroz"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "cereal-de-arroz"], ["created_at", "2017-06-06 16:44:37.986027"], ["updated_at", "2017-06-06 16:44:37.986027"]]
  [1m[36mSpree::Variant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '17' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1  [["product_id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["is_master", "t"], ["sku", "17"], ["cost_currency", "CLP"], ["product_id", 3], ["updated_at", "2017-06-06 16:44:37.988166"], ["position", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"  [["currency", "CLP"], ["amount", "830.0"], ["variant_id", 3]]
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:37.991546' WHERE "spree_variants"."id" = $1  [["id", 3]]
  [1m[36mSpree::Product Load (0.1ms)[0m  [1mSELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:37.993307' WHERE "spree_products"."id" = $1  [["id", 3]]
  [1m[36mSpree::Taxon Load (0.2ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:37.995036' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:37.995776' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSpree::StockLocation Load (0.1ms)[0m  SELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1  [["propagate_all_variants", "t"]]
  [1m[36mSpree::StockItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 3 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["variant_id", 3], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:37.999497"], ["updated_at", "2017-06-06 16:44:37.999497"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.001518' WHERE "spree_variants"."id" = $1  [["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.002526' WHERE "spree_products"."id" = $1[0m  [["id", 3]]
  [1m[35mSpree::Taxon Load (0.4ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.004588' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.005454' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.007032' WHERE "spree_products"."id" = $1[0m  [["id", 3]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.008039' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.008777' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mFriendlyId::Slug Load (0.3ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 3], ["sluggable_type", "Spree::Product"]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3[0m  [["sluggable_id", 3], ["sluggable_type", "Spree::Product"], ["slug", "cereal-de-arroz"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["sluggable_id", 3], ["sluggable_type", "Spree::Product"], ["slug", "cereal-de-arroz"], ["created_at", "2017-06-06 16:44:38.013175"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.014397' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.015123' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '17' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 3) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'cereal-de-arroz' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 3) LIMIT 1
  [1m[36mFriendlyId::Slug Load (0.3ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 3], ["sluggable_type", "Spree::Product"]]
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'hamburguesa-de-pollo' LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Product Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'hamburguesa-de-pollo') LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Variant Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '56' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::ShippingCategory Load (0.2ms)[0m  [1mSELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'hamburguesa-de-pollo' AND "spree_products"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Hamburguesa de Pollo"], ["description", "No se recomienda, mejor la de carne."], ["available_on", "2017-06-06 16:44:38.032551"], ["meta_keywords", "Hamburguesa"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "hamburguesa-de-pollo"], ["created_at", "2017-06-06 16:44:38.042986"], ["updated_at", "2017-06-06 16:44:38.042986"]]
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '56' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1[0m  [["product_id", 4]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["is_master", "t"], ["sku", "56"], ["cost_currency", "CLP"], ["product_id", 4], ["updated_at", "2017-06-06 16:44:38.045558"], ["position", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["currency", "CLP"], ["amount", "500.0"], ["variant_id", 4]]
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.049365' WHERE "spree_variants"."id" = $1[0m  [["id", 4]]
  [1m[35mSpree::Product Load (0.2ms)[0m  SELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.051379' WHERE "spree_products"."id" = $1[0m  [["id", 4]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 4]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.053347' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.054169' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSpree::StockLocation Load (0.2ms)[0m  [1mSELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1[0m  [["propagate_all_variants", "t"]]
  [1m[35mSpree::StockItem Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 4 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["variant_id", 4], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.058363"], ["updated_at", "2017-06-06 16:44:38.058363"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1  [["id", 4]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.060348' WHERE "spree_variants"."id" = $1[0m  [["id", 4]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.061375' WHERE "spree_products"."id" = $1  [["id", 4]]
  [1m[36mSpree::Taxon Load (0.2ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 4]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.063250' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.063960' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.065354' WHERE "spree_products"."id" = $1  [["id", 4]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.066344' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.067014' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 4], ["sluggable_type", "Spree::Product"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3  [["sluggable_id", 4], ["sluggable_type", "Spree::Product"], ["slug", "hamburguesa-de-pollo"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sluggable_id", 4], ["sluggable_type", "Spree::Product"], ["slug", "hamburguesa-de-pollo"], ["created_at", "2017-06-06 16:44:38.070967"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.072198' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.072957' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35m (8.7ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '56' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 4) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'hamburguesa-de-pollo' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 4) LIMIT 1[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 4], ["sluggable_type", "Spree::Product"]]
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Product Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'maiz' LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'maiz') LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Variant Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '3' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::ShippingCategory Load (0.2ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSpree::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'maiz' AND "spree_products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", "Maiz"], ["description", "Pío Pío. MMmmmhhhh"], ["available_on", "2017-06-06 16:44:38.088007"], ["meta_keywords", "Maiz"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "maiz"], ["created_at", "2017-06-06 16:44:38.097840"], ["updated_at", "2017-06-06 16:44:38.097840"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '3' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1  [["product_id", 5]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["is_master", "t"], ["sku", "3"], ["cost_currency", "CLP"], ["product_id", 5], ["updated_at", "2017-06-06 16:44:38.100180"], ["position", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"  [["currency", "CLP"], ["amount", "120.0"], ["variant_id", 5]]
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.103838' WHERE "spree_variants"."id" = $1  [["id", 5]]
  [1m[36mSpree::Product Load (0.2ms)[0m  [1mSELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.105823' WHERE "spree_products"."id" = $1  [["id", 5]]
  [1m[36mSpree::Taxon Load (0.2ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 5]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.107776' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.108580' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSpree::StockLocation Load (0.2ms)[0m  SELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1  [["propagate_all_variants", "t"]]
  [1m[36mSpree::StockItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 5 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["variant_id", 5], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.112821"], ["updated_at", "2017-06-06 16:44:38.112821"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.114855' WHERE "spree_variants"."id" = $1  [["id", 5]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.115853' WHERE "spree_products"."id" = $1[0m  [["id", 5]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 5]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.117720' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.118538' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.120090' WHERE "spree_products"."id" = $1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.121080' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.121799' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 5], ["sluggable_type", "Spree::Product"]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3[0m  [["sluggable_id", 5], ["sluggable_type", "Spree::Product"], ["slug", "maiz"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["sluggable_id", 5], ["sluggable_type", "Spree::Product"], ["slug", "maiz"], ["created_at", "2017-06-06 16:44:38.125665"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.126948' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.127747' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Variant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '3' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 5) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'maiz' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 5) LIMIT 1
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 5], ["sluggable_type", "Spree::Product"]]
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'leche' LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'leche') LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '7' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::ShippingCategory Load (0.2ms)[0m  [1mSELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSpree::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'leche' AND "spree_products"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Leche"], ["description", "Yo tomo leche"], ["available_on", "2017-06-06 16:44:38.143388"], ["meta_keywords", "Leche"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "leche"], ["created_at", "2017-06-06 16:44:38.153395"], ["updated_at", "2017-06-06 16:44:38.153395"]]
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '7' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1[0m  [["product_id", 6]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["is_master", "t"], ["sku", "7"], ["cost_currency", "CLP"], ["product_id", 6], ["updated_at", "2017-06-06 16:44:38.155851"], ["position", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["currency", "CLP"], ["amount", "295.0"], ["variant_id", 6]]
  [1m[35mSpree::Variant Load (0.3ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1  [["id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.159777' WHERE "spree_variants"."id" = $1[0m  [["id", 6]]
  [1m[35mSpree::Product Load (0.2ms)[0m  SELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1  [["id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.162344' WHERE "spree_products"."id" = $1[0m  [["id", 6]]
  [1m[35mSpree::Taxon Load (0.1ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.164008' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.164671' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSpree::StockLocation Load (0.1ms)[0m  [1mSELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1[0m  [["propagate_all_variants", "t"]]
  [1m[35mSpree::StockItem Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 6 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["variant_id", 6], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.168413"], ["updated_at", "2017-06-06 16:44:38.168413"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1  [["id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.170176' WHERE "spree_variants"."id" = $1[0m  [["id", 6]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.171017' WHERE "spree_products"."id" = $1  [["id", 6]]
  [1m[36mSpree::Taxon Load (0.1ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 6]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.172581' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.173266' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.174505' WHERE "spree_products"."id" = $1  [["id", 6]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.175317' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.176005' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mFriendlyId::Slug Load (0.1ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 6], ["sluggable_type", "Spree::Product"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3  [["sluggable_id", 6], ["sluggable_type", "Spree::Product"], ["slug", "leche"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sluggable_id", 6], ["sluggable_type", "Spree::Product"], ["slug", "leche"], ["created_at", "2017-06-06 16:44:38.179508"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.180722' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.181419' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35m (22.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '7' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 6) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'leche' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 6) LIMIT 1[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 6], ["sluggable_type", "Spree::Product"]]
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Product Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'carne' LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'carne') LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '9' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::ShippingCategory Load (0.2ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSpree::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'carne' AND "spree_products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", " Carne"], ["description", "Asado"], ["available_on", "2017-06-06 16:44:38.209989"], ["meta_keywords", "Carne"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "carne"], ["created_at", "2017-06-06 16:44:38.221671"], ["updated_at", "2017-06-06 16:44:38.221671"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '9' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1  [["product_id", 7]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["is_master", "t"], ["sku", "9"], ["cost_currency", "CLP"], ["product_id", 7], ["updated_at", "2017-06-06 16:44:38.224146"], ["position", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"  [["currency", "CLP"], ["amount", "355.0"], ["variant_id", 7]]
  [1m[36mSpree::Variant Load (0.1ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.227514' WHERE "spree_variants"."id" = $1  [["id", 7]]
  [1m[36mSpree::Product Load (0.1ms)[0m  [1mSELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.229374' WHERE "spree_products"."id" = $1  [["id", 7]]
  [1m[36mSpree::Taxon Load (0.1ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 7]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.231052' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.231752' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSpree::StockLocation Load (0.2ms)[0m  SELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1  [["propagate_all_variants", "t"]]
  [1m[36mSpree::StockItem Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 7 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["variant_id", 7], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.235843"], ["updated_at", "2017-06-06 16:44:38.235843"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.237691' WHERE "spree_variants"."id" = $1  [["id", 7]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.238634' WHERE "spree_products"."id" = $1[0m  [["id", 7]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 7]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.240605' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.241398' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.242833' WHERE "spree_products"."id" = $1[0m  [["id", 7]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.243802' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.244562' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mFriendlyId::Slug Load (0.1ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 7], ["sluggable_type", "Spree::Product"]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3[0m  [["sluggable_id", 7], ["sluggable_type", "Spree::Product"], ["slug", "carne"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["sluggable_id", 7], ["sluggable_type", "Spree::Product"], ["slug", "carne"], ["created_at", "2017-06-06 16:44:38.248296"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.249506' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.250226' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '9' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 7) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'carne' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 7) LIMIT 1
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 7], ["sluggable_type", "Spree::Product"]]
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'avena' LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'avena') LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '15' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::ShippingCategory Load (0.2ms)[0m  [1mSELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSpree::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'avena' AND "spree_products"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Avena"], ["description", "Esto comen los niños malos"], ["available_on", "2017-06-06 16:44:38.264957"], ["meta_keywords", "Avena"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "avena"], ["created_at", "2017-06-06 16:44:38.274739"], ["updated_at", "2017-06-06 16:44:38.274739"]]
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '15' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1[0m  [["product_id", 8]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["is_master", "t"], ["sku", "15"], ["cost_currency", "CLP"], ["product_id", 8], ["updated_at", "2017-06-06 16:44:38.276955"], ["position", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["currency", "CLP"], ["amount", "285.0"], ["variant_id", 8]]
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.280253' WHERE "spree_variants"."id" = $1[0m  [["id", 8]]
  [1m[35mSpree::Product Load (0.1ms)[0m  SELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.281968' WHERE "spree_products"."id" = $1[0m  [["id", 8]]
  [1m[35mSpree::Taxon Load (0.1ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 8]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.283729' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.284442' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSpree::StockLocation Load (0.2ms)[0m  [1mSELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1[0m  [["propagate_all_variants", "t"]]
  [1m[35mSpree::StockItem Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 8 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["variant_id", 8], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.288514"], ["updated_at", "2017-06-06 16:44:38.288514"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1  [["id", 8]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.290421' WHERE "spree_variants"."id" = $1[0m  [["id", 8]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.291377' WHERE "spree_products"."id" = $1  [["id", 8]]
  [1m[36mSpree::Taxon Load (0.2ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 8]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.293314' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.294163' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.295590' WHERE "spree_products"."id" = $1  [["id", 8]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.296626' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.297344' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 8], ["sluggable_type", "Spree::Product"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3  [["sluggable_id", 8], ["sluggable_type", "Spree::Product"], ["slug", "avena"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sluggable_id", 8], ["sluggable_type", "Spree::Product"], ["slug", "avena"], ["created_at", "2017-06-06 16:44:38.301058"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.302220' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.302909' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35m (11.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '15' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 8) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'avena' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 8) LIMIT 1[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 8], ["sluggable_type", "Spree::Product"]]
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'mantequilla' LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'mantequilla') LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '22' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::ShippingCategory Load (0.1ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'mantequilla' AND "spree_products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", "Mantequilla"], ["description", "Pan para esto no hay?"], ["available_on", "2017-06-06 16:44:38.320440"], ["meta_keywords", "Mantequilla"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "mantequilla"], ["created_at", "2017-06-06 16:44:38.330244"], ["updated_at", "2017-06-06 16:44:38.330244"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '22' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1  [["product_id", 9]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["is_master", "t"], ["sku", "22"], ["cost_currency", "CLP"], ["product_id", 9], ["updated_at", "2017-06-06 16:44:38.332624"], ["position", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"  [["currency", "CLP"], ["amount", "345.0"], ["variant_id", 9]]
  [1m[36mSpree::Variant Load (0.1ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.335951' WHERE "spree_variants"."id" = $1  [["id", 9]]
  [1m[36mSpree::Product Load (0.2ms)[0m  [1mSELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.337821' WHERE "spree_products"."id" = $1  [["id", 9]]
  [1m[36mSpree::Taxon Load (0.2ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 9]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.339753' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.340515' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSpree::StockLocation Load (0.2ms)[0m  SELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1  [["propagate_all_variants", "t"]]
  [1m[36mSpree::StockItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 9 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["variant_id", 9], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.344702"], ["updated_at", "2017-06-06 16:44:38.344702"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.346490' WHERE "spree_variants"."id" = $1  [["id", 9]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.347448' WHERE "spree_products"."id" = $1[0m  [["id", 9]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 9]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.349312' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.350117' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.351587' WHERE "spree_products"."id" = $1[0m  [["id", 9]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.352618' WHERE 1=0
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.353328' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mFriendlyId::Slug Load (0.1ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 9], ["sluggable_type", "Spree::Product"]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3[0m  [["sluggable_id", 9], ["sluggable_type", "Spree::Product"], ["slug", "mantequilla"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["sluggable_id", 9], ["sluggable_type", "Spree::Product"], ["slug", "mantequilla"], ["created_at", "2017-06-06 16:44:38.357082"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.358262' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.358968' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36m (11.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '22' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 9) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'mantequilla' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 9) LIMIT 1
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 9], ["sluggable_type", "Spree::Product"]]
  [1m[35m (0.2ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'azucar' LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'azucar') LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Variant Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '25' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::ShippingCategory Load (0.2ms)[0m  [1mSELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mSpree::Product Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'azucar' AND "spree_products"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "Azucar"], ["description", "Manjar Colún"], ["available_on", "2017-06-06 16:44:38.377042"], ["meta_keywords", "Azucar"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "azucar"], ["created_at", "2017-06-06 16:44:38.386849"], ["updated_at", "2017-06-06 16:44:38.386849"]]
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '25' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1[0m  [["product_id", 10]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["is_master", "t"], ["sku", "25"], ["cost_currency", "CLP"], ["product_id", 10], ["updated_at", "2017-06-06 16:44:38.389077"], ["position", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["currency", "CLP"], ["amount", "95.0"], ["variant_id", 10]]
  [1m[35mSpree::Variant Load (0.2ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1  [["id", 10]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.392433' WHERE "spree_variants"."id" = $1[0m  [["id", 10]]
  [1m[35mSpree::Product Load (0.2ms)[0m  SELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1  [["id", 10]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.394276' WHERE "spree_products"."id" = $1[0m  [["id", 10]]
  [1m[35mSpree::Taxon Load (0.1ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 10]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.395936' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.396603' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSpree::StockLocation Load (0.2ms)[0m  [1mSELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1[0m  [["propagate_all_variants", "t"]]
  [1m[35mSpree::StockItem Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 10 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["variant_id", 10], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.400636"], ["updated_at", "2017-06-06 16:44:38.400636"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1  [["id", 10]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.402366' WHERE "spree_variants"."id" = $1[0m  [["id", 10]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.403287' WHERE "spree_products"."id" = $1  [["id", 10]]
  [1m[36mSpree::Taxon Load (0.1ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 10]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.405026' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.405739' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.407128' WHERE "spree_products"."id" = $1  [["id", 10]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.408150' WHERE 1=0[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.408928' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 10], ["sluggable_type", "Spree::Product"]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3  [["sluggable_id", 10], ["sluggable_type", "Spree::Product"], ["slug", "azucar"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["sluggable_id", 10], ["sluggable_type", "Spree::Product"], ["slug", "azucar"], ["created_at", "2017-06-06 16:44:38.412835"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.413995' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.414666' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35m (11.4ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSpree::Variant Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '25' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 10) AND "spree_variants"."deleted_at" IS NULL LIMIT 1
  [1m[36mSpree::Product Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'azucar' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 10) LIMIT 1[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 10], ["sluggable_type", "Spree::Product"]]
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Product Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND "spree_products"."slug" = 'harina-integral' LIMIT 1[0m  [["sluggable_type", "Spree::Product"]]
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" INNER JOIN "friendly_id_slugs" ON "friendly_id_slugs"."sluggable_id" = "spree_products"."id" AND "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_type" = $1 WHERE ("spree_products"."id" IS NOT NULL) AND ("friendly_id_slugs"."sluggable_type" = 'Spree::Product' AND "friendly_id_slugs"."slug" = 'harina-integral') LIMIT 1  [["sluggable_type", "Spree::Product"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '52' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::ShippingCategory Load (0.1ms)[0m  SELECT  "spree_shipping_categories".* FROM "spree_shipping_categories" WHERE "spree_shipping_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSpree::Product Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'harina-integral' AND "spree_products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_products" ("name", "description", "available_on", "meta_keywords", "tax_category_id", "shipping_category_id", "promotionable", "slug", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", "Harina Integral"], ["description", "Comida para pajaros"], ["available_on", "2017-06-06 16:44:38.431918"], ["meta_keywords", "Harina Integral"], ["tax_category_id", 1], ["shipping_category_id", 1], ["promotionable", "f"], ["slug", "harina-integral"], ["created_at", "2017-06-06 16:44:38.441817"], ["updated_at", "2017-06-06 16:44:38.441817"]]
  [1m[36mSpree::Variant Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '52' AND "spree_variants"."deleted_at" IS NULL) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Variant Load (0.1ms)[0m  SELECT  "spree_variants".* FROM "spree_variants" WHERE (spree_variants.position IS NOT NULL) AND "spree_variants"."product_id" = $1  ORDER BY spree_variants.position DESC LIMIT 1  [["product_id", 11]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "spree_variants" ("is_master", "sku", "cost_currency", "product_id", "updated_at", "position") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["is_master", "t"], ["sku", "52"], ["cost_currency", "CLP"], ["product_id", 11], ["updated_at", "2017-06-06 16:44:38.444107"], ["position", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_prices" ("currency", "amount", "variant_id") VALUES ($1, $2, $3) RETURNING "id"  [["currency", "CLP"], ["amount", "460.0"], ["variant_id", 11]]
  [1m[36mSpree::Variant Load (0.1ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.447423' WHERE "spree_variants"."id" = $1  [["id", 11]]
  [1m[36mSpree::Product Load (0.2ms)[0m  [1mSELECT  "spree_products".* FROM "spree_products" WHERE "spree_products"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.449355' WHERE "spree_products"."id" = $1  [["id", 11]]
  [1m[36mSpree::Taxon Load (0.1ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 11]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.451877' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.452849' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mSpree::StockLocation Load (0.1ms)[0m  SELECT "spree_stock_locations".* FROM "spree_stock_locations" WHERE "spree_stock_locations"."propagate_all_variants" = $1  [["propagate_all_variants", "t"]]
  [1m[36mSpree::StockItem Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_stock_items" WHERE ("spree_stock_items"."variant_id" = 11 AND "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."stock_location_id" = 1 AND "spree_stock_items"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "spree_stock_items" ("variant_id", "backorderable", "stock_location_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["variant_id", 11], ["backorderable", "t"], ["stock_location_id", 1], ["created_at", "2017-06-06 16:44:38.457256"], ["updated_at", "2017-06-06 16:44:38.457256"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "spree_variants" SET "stock_items_count" = COALESCE("stock_items_count", 0) + 1 WHERE "spree_variants"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_variants" SET "updated_at" = '2017-06-06 16:44:38.459138' WHERE "spree_variants"."id" = $1  [["id", 11]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.460174' WHERE "spree_products"."id" = $1[0m  [["id", 11]]
  [1m[35mSpree::Taxon Load (0.2ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  [["product_id", 11]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.462145' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.462930' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_products" SET "updated_at" = '2017-06-06 16:44:38.464496' WHERE "spree_products"."id" = $1[0m  [["id", 11]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.465506' WHERE 1=0
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.466272' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)[0m
  [1m[35mFriendlyId::Slug Load (0.2ms)[0m  SELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1  [["sluggable_id", 11], ["sluggable_type", "Spree::Product"]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2 AND "friendly_id_slugs"."slug" = $3[0m  [["sluggable_id", 11], ["sluggable_type", "Spree::Product"], ["slug", "harina-integral"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "friendly_id_slugs" ("sluggable_id", "sluggable_type", "slug", "created_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["sluggable_id", 11], ["sluggable_type", "Spree::Product"], ["slug", "harina-integral"], ["created_at", "2017-06-06 16:44:38.470262"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "spree_taxons" SET "updated_at" = '2017-06-06 16:44:38.471463' WHERE 1=0[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "spree_taxonomies" SET "updated_at" = '2017-06-06 16:44:38.472253' WHERE "spree_taxonomies"."id" IN (SELECT "spree_taxonomies"."id" FROM "spree_taxonomies" WHERE 1=0  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at)
  [1m[36m (9.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Variant Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_variants" WHERE ("spree_variants"."sku" = '52' AND "spree_variants"."deleted_at" IS NULL AND "spree_variants"."id" != 11) AND "spree_variants"."deleted_at" IS NULL LIMIT 1[0m
  [1m[35mSpree::Product Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_products" WHERE ("spree_products"."slug" = 'harina-integral' AND "spree_products"."deleted_at" IS NULL AND "spree_products"."id" != 11) LIMIT 1
  [1m[36mFriendlyId::Slug Load (0.2ms)[0m  [1mSELECT  "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."deleted_at" IS NULL AND "friendly_id_slugs"."sluggable_id" = $1 AND "friendly_id_slugs"."sluggable_type" = $2  ORDER BY "friendly_id_slugs".id DESC LIMIT 1[0m  [["sluggable_id", 11], ["sluggable_type", "Spree::Product"]]
  [1m[35m (0.1ms)[0m  COMMIT
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)


Started GET "/" for 127.0.0.1 at 2017-06-06 12:44:49 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Spree::HomeController#index as HTML
  [1m[35mSpree::Preference Load (0.4ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Taxonomy Load (0.6ms)[0m  [1mSELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at[0m
  Rendered spree/shared/_taxonomies.html.erb (2.4ms)
  [1m[35m (1.7ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", "t"]]
  [1m[36mSQL (1.3ms)[0m  [1mSELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:44:49.353365') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:44:49.353543') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35m (1.0ms)[0m  SELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:44:49.357805') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:44:49.357929') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (1.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.7ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mSpree::Product Load (0.9ms)[0m  [1mSELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285034') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:44:49.285261') AND ("spree_products".available_on <= '2017-06-06 16:44:49.285249') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"]]
  [1m[35mSpree::Variant Load (0.4ms)[0m  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  [["is_master", "t"]]
  [1m[36mSpree::Price Load (0.4ms)[0m  [1mSELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)[0m
  [1m[35mSpree::Image Load (0.6ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC
  [1m[36mSpree::ProductPromotionRule Load (0.3ms)[0m  [1mSELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::TaxCategory Load (0.4ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered spree/shared/_products.html.erb (1177.1ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spree_frontend-3.1.5/app/views/spree/home/index.html.erb within spree/layouts/spree_application (1283.2ms)
  Rendered spree/shared/_head.html.erb (88.5ms)
  Rendered spree/shared/_google_analytics.js.erb (1.9ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.6ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (40.0ms)
  Rendered spree/shared/_nav_bar.html.erb (41.9ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.6ms)
  Rendered spree/shared/_header.html.erb (50.5ms)
  Rendered spree/shared/_sidebar.html.erb (0.3ms)
Completed 200 OK in 1540ms (Views: 1416.0ms | ActiveRecord: 28.1ms)


Started GET "/assets/noimage/small-1eaf254c069b00a8a692912bddd1660da5f1f80ac202c6bdc4d81b40fd2e0792.png" for 127.0.0.1 at 2017-06-06 12:44:50 -0400


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:44:51 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (23.1ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 42ms (Views: 30.2ms | ActiveRecord: 1.3ms)


Started GET "/products/hamburguesa-de-pollo" for 127.0.0.1 at 2017-06-06 12:45:02 -0400
Processing by Spree::ProductsController#show as HTML
  Parameters: {"id"=>"hamburguesa-de-pollo"}
  [1m[36mSpree::Preference Load (0.2ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Product Load (0.6ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:45:02.363090') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:45:02.363503') AND ("spree_products".available_on <= '2017-06-06 16:45:02.363490') AND "spree_products"."slug" = $2  ORDER BY "spree_products"."id" ASC LIMIT 1  [["is_master", "t"], ["slug", "hamburguesa-de-pollo"]]
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" IN (4)  ORDER BY "spree_variants"."position" ASC[0m
  [1m[35mSpree::Taxon Load (0.5ms)[0m  SELECT  "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  ORDER BY "spree_taxons"."id" ASC LIMIT 1  [["product_id", 4]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.2ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35mSpree::Promotion Load (0.5ms)[0m  SELECT "spree_promotions".* FROM "spree_promotions" INNER JOIN "spree_promotion_rules" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" INNER JOIN "spree_product_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" WHERE "spree_product_promotion_rules"."product_id" = $1 AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:45:02.425482') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:45:02.425613')  [["product_id", 4], ["advertise", "t"]]
  [1m[36mSpree::Variant Load (0.2ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 LIMIT 1[0m  [["product_id", 4], ["is_master", "t"]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["viewable_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_image.html.erb (9.5ms)
  [1m[35mSpree::Image Load (0.3ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC  [["viewable_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Load (0.5ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC, "spree_variants"."position" ASC[0m  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_thumbnails.html.erb (3.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "spree_product_properties" WHERE "spree_product_properties"."product_id" = $1  [["product_id", 4]]
  Rendered spree/products/_properties.html.erb (1.8ms)
  Rendered spree/products/_promotions.html.erb (0.6ms)
  [1m[36mSpree::Variant Load (0.7ms)[0m  [1mSELECT DISTINCT "spree_variants".* FROM "spree_variants" INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 AND ("spree_variants".discontinue_on IS NULL OR "spree_variants".discontinue_on >= '2017-06-06 16:45:02.478515') AND ("spree_variants".deleted_at IS NULL) AND (spree_prices.currency = 'CLP') AND (spree_prices.amount IS NOT NULL)  ORDER BY "spree_variants"."position" ASC[0m  [["product_id", 4], ["is_master", "f"]]
  [1m[35mSpree::Price Load (0.2ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" = $1  [["variant_id", 4]]
  [1m[36mSpree::Price Load (0.5ms)[0m  [1mSELECT  "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."variant_id" = $1 AND "spree_prices"."currency" = $2 LIMIT 1[0m  [["variant_id", 4], ["currency", "CLP"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.4ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered spree/products/_cart_form.html.erb (192614.3ms)
  Rendered spree/products/show.html.erb within spree/layouts/spree_application (192666.5ms)
Completed 401 Unauthorized in 192728ms (ActiveRecord: 8.3ms)
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)


Started GET "/" for 127.0.0.1 at 2017-06-06 12:48:43 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Spree::HomeController#index as HTML
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Taxonomy Load (0.6ms)[0m  [1mSELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at[0m
  Rendered spree/shared/_taxonomies.html.erb (2.4ms)
  [1m[35m (1.8ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", "t"]]
  [1m[36mSQL (1.3ms)[0m  [1mSELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:48:44.244532') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:48:44.244710') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35m (0.9ms)[0m  SELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:48:44.248253') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:48:44.248368') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.6ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.7ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mSpree::Product Load (0.7ms)[0m  [1mSELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179460') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:44.179807') AND ("spree_products".available_on <= '2017-06-06 16:48:44.179794') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"]]
  [1m[35mSpree::Variant Load (0.4ms)[0m  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  [["is_master", "t"]]
  [1m[36mSpree::Price Load (0.3ms)[0m  [1mSELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)[0m
  [1m[35mSpree::Image Load (0.5ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC
  [1m[36mSpree::ProductPromotionRule Load (0.3ms)[0m  [1mSELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::TaxCategory Load (0.4ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.5ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered spree/shared/_products.html.erb (1073.1ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spree_frontend-3.1.5/app/views/spree/home/index.html.erb within spree/layouts/spree_application (1177.4ms)
  Rendered spree/shared/_head.html.erb (86.8ms)
  Rendered spree/shared/_google_analytics.js.erb (1.7ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.7ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (39.2ms)
  Rendered spree/shared/_nav_bar.html.erb (40.8ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.6ms)
  Rendered spree/shared/_header.html.erb (49.8ms)
  Rendered spree/shared/_sidebar.html.erb (0.3ms)
Completed 200 OK in 1432ms (Views: 1307.6ms | ActiveRecord: 27.9ms)


Started GET "/assets/spree/frontend/frontend_bootstrap.self-3ac6d7c7a52356a5255b0194db21408db5630eeb182621eefd3d2034c91bd27c.css?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/jquery_ujs.self-784a997f6726036b1993eb2217c9cb558e1cbb801c6da88105588c56f13b466a.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/jquery.self-bd7ddd393353a8d2480a622e80342adf488fb6006d667e8b42e4c0073393abee.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/transition.self-6ad2488465135ab731a045a8ebbe3ea2fc501aed286042496eda1664fdd07ba9.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/spree/frontend.self-e73dc9de72274c38c22893ab23f2a409bb2001bd63595499790b46cf2f0c3c4a.css?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/spree/frontend/all.self-33fc4a513acb9a5f3fd4ba26b89c94184e5d028c4bd40eee6736d3ccfea5c140.css?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/alert.self-742145c5bb847aafdadc6e339be795628f8bc25f177e851f03a8c42278eb0312.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/button.self-126ac9bf0e7f2d8568f8da3a00fd5f0fac6eae0946331003370161fbf8d7975e.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/carousel.self-e47323f363ceb3dc0bdbce05e36e709ed428e339833a41140a85cb0af24b8127.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/dropdown.self-561cca1cbaf67474e01e9536f106bad541594860a6df997004591c1c1957a147.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/collapse.self-2eb697f62b587bb786ff940d82dd4be88cdeeaf13ca128e3da3850c5fcaec301.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/modal.self-3e78617ade5663314b7ee0ea10375a5b34d59ffbade44939e3f2a4e4ef2019b3.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/tab.self-5bf7078b682f8b131332eefa46b45fa5eff2eca745fc0d03e2991450888f7c28.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/affix.self-6d6f1a7fc5c8aabf3547fa1b794fab6268f54bc55ad815e55873c71f52513517.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/scrollspy.self-969f3c5f48cdf1e439c7fa1154c13b948715f5c689f87837c0b64521d3b46ef6.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/tooltip.self-05afb177e08f98997ccfc84fa08a215e4b27d48d5fe4d049080675e9dffd8199.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap/popover.self-0aa93860b59fe7393f1dd490f54b3cb994f9d6155adffce034d4e14ae361b041.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/bootstrap-sprockets.self-fbfa5ad7d9aa0afe439ec4ff3883acc4cb92b62cb67c40d674320c9aa1d4642d.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/jquery.payment.self-38d1c43bb5a79a62bce3ec642fe216db420582062f0990bb7ce095fe9698a834.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/jquery.validate/jquery.validate.min.self-ff387f76d0c68bc92a0a0a6167be0413ebd547db067eaf64a95d066e61655518.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/jsuri.self-090126b483ac28538a8bd132dce89500493c079744010067a5e79b94f57c0122.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/spree.self-3537dd0d44b5a6a3e36dc3ddff0668075ec7688b84ef1d78f3d5df3b0880f28b.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:45 -0400


Started GET "/assets/spree/frontend/cart.self-5907be3c192d3104648886d27735864e4fefb1b56db406173d69a5dc2bbc22c3.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/checkout.self-d127b3baa6b2f6f6585dc009dcff30bfdc6c6c019fae9a6441c2ed2aab4a6b16.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/checkout/address.self-8b5f80cd1f217bd71389d6fc6b82efc71e9c81d73b46e19a572a9f3377cb769e.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/checkout/payment.self-712ba3fa8424885a09e537de9921037f5be414366cb6109832d7822798441821.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/product.self-8e623f7f108f76febb02c47c1d58b5cabf59ab5183893b647375f27398f42f13.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend.self-1e135afb54bf948ed616b7e518ea9f59c8edad95a2d1dfbae8adc60b167c5f6c.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/account.self-701baa9147339958eb4ccc4bd8e4f199d8b9258dc02a0acf1790c746b0b43b8b.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/spree_auth.self-75a11da44c802486bc6f65640aa48a730f0f684c5c07a42ba3cd1735eb3fb070.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/spree/frontend/all.self-cb715ade8208ca614adcefe484df803bed6d65b27b52ba06264930b4627dcfd7.js?body=1" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/logo/spree_50-1c7335be355d4672a35c5023956d0c883f254831f3e3dae3f2ca05976ceb5e50.png" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/noimage/small-1eaf254c069b00a8a692912bddd1660da5f1f80ac202c6bdc4d81b40fd2e0792.png" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:48:46 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.3ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (26.1ms)
  Couldn't find template for digesting: store/cart_link
Completed 200 OK in 47ms (Views: 34.2ms | ActiveRecord: 1.3ms)


Started GET "/assets/spree_header-198b754a34f1428c25f64303be8ac2aae84a076433af18ca55b65d7cbf1a0e13.jpg" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/bootstrap/glyphicons-halflings-regular-fe185d11a49676890d47bb783312a0cda5a44c4039214094e7957b4c040ef11c.woff2" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/assets/favicon-92e86d463e909754599d66730477622cd3dd0b9bff58c47c9c38bebceb8073e5.ico" for 127.0.0.1 at 2017-06-06 12:48:46 -0400


Started GET "/products/harina-integral" for 127.0.0.1 at 2017-06-06 12:48:48 -0400
Processing by Spree::ProductsController#show as HTML
  Parameters: {"id"=>"harina-integral"}
  [1m[36mSpree::Preference Load (0.2ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Product Load (1.0ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:48.576982') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:48:48.577546') AND ("spree_products".available_on <= '2017-06-06 16:48:48.577525') AND "spree_products"."slug" = $2  ORDER BY "spree_products"."id" ASC LIMIT 1  [["is_master", "t"], ["slug", "harina-integral"]]
  [1m[36mSpree::Variant Load (0.4ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" IN (11)  ORDER BY "spree_variants"."position" ASC[0m
  [1m[35mSpree::Taxon Load (0.6ms)[0m  SELECT  "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  ORDER BY "spree_taxons"."id" ASC LIMIT 1  [["product_id", 11]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.3ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.2ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35mSpree::Promotion Load (0.4ms)[0m  SELECT "spree_promotions".* FROM "spree_promotions" INNER JOIN "spree_promotion_rules" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" INNER JOIN "spree_product_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" WHERE "spree_product_promotion_rules"."product_id" = $1 AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:48:48.622769') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:48:48.622885')  [["product_id", 11], ["advertise", "t"]]
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 LIMIT 1[0m  [["product_id", 11], ["is_master", "t"]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_image.html.erb (8.6ms)
  [1m[35mSpree::Image Load (0.3ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Load (0.4ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC, "spree_variants"."position" ASC[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_thumbnails.html.erb (4.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "spree_product_properties" WHERE "spree_product_properties"."product_id" = $1  [["product_id", 11]]
  Rendered spree/products/_properties.html.erb (2.2ms)
  Rendered spree/products/_promotions.html.erb (0.6ms)
  [1m[36mSpree::Variant Load (0.7ms)[0m  [1mSELECT DISTINCT "spree_variants".* FROM "spree_variants" INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 AND ("spree_variants".discontinue_on IS NULL OR "spree_variants".discontinue_on >= '2017-06-06 16:48:48.649533') AND ("spree_variants".deleted_at IS NULL) AND (spree_prices.currency = 'CLP') AND (spree_prices.amount IS NOT NULL)  ORDER BY "spree_variants"."position" ASC[0m  [["product_id", 11], ["is_master", "f"]]
  [1m[35mSpree::Price Load (0.2ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" = $1  [["variant_id", 11]]
  [1m[36mSpree::Price Load (0.2ms)[0m  [1mSELECT  "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."variant_id" = $1 AND "spree_prices"."currency" = $2 LIMIT 1[0m  [["variant_id", 11], ["currency", "CLP"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.3ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mSELECT SUM("spree_stock_items"."count_on_hand") FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2[0m  [["variant_id", 11], ["active", "t"]]
  [1m[35mSpree::StockItem Load (0.4ms)[0m  SELECT "spree_stock_items".* FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2  [["variant_id", 11], ["active", "t"]]
  Rendered spree/products/_cart_form.html.erb (19004.8ms)
  [1m[36mSpree::Taxon Load (0.4ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 11]]
  Rendered spree/products/_taxons.html.erb (2.4ms)
  Rendered spree/products/show.html.erb within spree/layouts/spree_application (19134.3ms)
  Rendered spree/shared/_head.html.erb (69.6ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.5ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.6ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (3.7ms)
  Rendered spree/shared/_nav_bar.html.erb (5.6ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (12.6ms)
Completed 200 OK in 19263ms (Views: 19217.8ms | ActiveRecord: 13.1ms)


Started GET "/assets/noimage/product-fe154e843e2b66339f5460ae669c9a6307224a451ed6ba86479c8bf9837ede96.png" for 127.0.0.1 at 2017-06-06 12:49:07 -0400


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:49:08 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.6ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (4.1ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 19ms (Views: 8.7ms | ActiveRecord: 1.3ms)
  [1m[36mSpree::Preference Load (0.4ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)


Started GET "/" for 127.0.0.1 at 2017-06-06 12:57:34 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Spree::HomeController#index as HTML
  [1m[35mSpree::Preference Load (0.4ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Taxonomy Load (0.5ms)[0m  [1mSELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at[0m
  Rendered spree/shared/_taxonomies.html.erb (2.4ms)
  [1m[35m (1.9ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", "t"]]
  [1m[36mSQL (1.3ms)[0m  [1mSELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:57:35.294205') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:57:35.294383') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35m (1.2ms)[0m  SELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:57:35.297893') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:57:35.298008') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.8ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.6ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mSpree::Product Load (0.8ms)[0m  [1mSELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226219') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:35.226442') AND ("spree_products".available_on <= '2017-06-06 16:57:35.226430') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"]]
  [1m[35mSpree::Variant Load (0.3ms)[0m  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  [["is_master", "t"]]
  [1m[36mSpree::Price Load (0.3ms)[0m  [1mSELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)[0m
  [1m[35mSpree::Image Load (0.7ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC
  [1m[36mSpree::ProductPromotionRule Load (0.3ms)[0m  [1mSELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::TaxCategory Load (0.3ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.5ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.7ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered spree/shared/_products.html.erb (1174.6ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spree_frontend-3.1.5/app/views/spree/home/index.html.erb within spree/layouts/spree_application (1280.1ms)
  Rendered spree/shared/_head.html.erb (87.9ms)
  Rendered spree/shared/_google_analytics.js.erb (1.6ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.5ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (37.3ms)
  Rendered spree/shared/_nav_bar.html.erb (38.8ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.6ms)
  Rendered spree/shared/_header.html.erb (48.7ms)
  Rendered spree/shared/_sidebar.html.erb (0.3ms)
Completed 200 OK in 1534ms (Views: 1409.8ms | ActiveRecord: 27.0ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:57:36 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.5ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (22.3ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 46ms (Views: 32.1ms | ActiveRecord: 1.7ms)


Started GET "/products/harina-integral" for 127.0.0.1 at 2017-06-06 12:57:42 -0400
Processing by Spree::ProductsController#show as HTML
  Parameters: {"id"=>"harina-integral"}
  [1m[36mSpree::Preference Load (0.2ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Product Load (0.8ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:42.617347') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:57:42.617750') AND ("spree_products".available_on <= '2017-06-06 16:57:42.617738') AND "spree_products"."slug" = $2  ORDER BY "spree_products"."id" ASC LIMIT 1  [["is_master", "t"], ["slug", "harina-integral"]]
  [1m[36mSpree::Variant Load (0.5ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" IN (11)  ORDER BY "spree_variants"."position" ASC[0m
  [1m[35mSpree::Taxon Load (0.4ms)[0m  SELECT  "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  ORDER BY "spree_taxons"."id" ASC LIMIT 1  [["product_id", 11]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35mSpree::Promotion Load (0.5ms)[0m  SELECT "spree_promotions".* FROM "spree_promotions" INNER JOIN "spree_promotion_rules" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" INNER JOIN "spree_product_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" WHERE "spree_product_promotion_rules"."product_id" = $1 AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:57:42.652480') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:57:42.652631')  [["product_id", 11], ["advertise", "t"]]
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 LIMIT 1[0m  [["product_id", 11], ["is_master", "t"]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_image.html.erb (8.7ms)
  [1m[35mSpree::Image Load (0.3ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Load (0.4ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC, "spree_variants"."position" ASC[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_thumbnails.html.erb (3.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "spree_product_properties" WHERE "spree_product_properties"."product_id" = $1  [["product_id", 11]]
  Rendered spree/products/_properties.html.erb (1.8ms)
  Rendered spree/products/_promotions.html.erb (0.6ms)
  [1m[36mSpree::Variant Load (0.6ms)[0m  [1mSELECT DISTINCT "spree_variants".* FROM "spree_variants" INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 AND ("spree_variants".discontinue_on IS NULL OR "spree_variants".discontinue_on >= '2017-06-06 16:57:42.677964') AND ("spree_variants".deleted_at IS NULL) AND (spree_prices.currency = 'CLP') AND (spree_prices.amount IS NOT NULL)  ORDER BY "spree_variants"."position" ASC[0m  [["product_id", 11], ["is_master", "f"]]
  [1m[35mSpree::Price Load (0.2ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" = $1  [["variant_id", 11]]
  [1m[36mSpree::Price Load (0.3ms)[0m  [1mSELECT  "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."variant_id" = $1 AND "spree_prices"."currency" = $2 LIMIT 1[0m  [["variant_id", 11], ["currency", "CLP"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.3ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT SUM("spree_stock_items"."count_on_hand") FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2[0m  [["variant_id", 11], ["active", "t"]]
  [1m[35mSpree::StockItem Load (0.4ms)[0m  SELECT "spree_stock_items".* FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2  [["variant_id", 11], ["active", "t"]]
  Rendered spree/products/_cart_form.html.erb (13471.5ms)
  [1m[36mSpree::Taxon Load (0.5ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 11]]
  Rendered spree/products/_taxons.html.erb (3.0ms)
  Rendered spree/products/show.html.erb within spree/layouts/spree_application (13502.1ms)
  Rendered spree/shared/_head.html.erb (78.5ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.4ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (2.4ms)
  Rendered spree/shared/_nav_bar.html.erb (3.8ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (10.8ms)
Completed 200 OK in 13626ms (Views: 13591.8ms | ActiveRecord: 13.3ms)


Started GET "/assets/noimage/product-fe154e843e2b66339f5460ae669c9a6307224a451ed6ba86479c8bf9837ede96.png" for 127.0.0.1 at 2017-06-06 12:57:56 -0400


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:57:56 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (4.8ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 19ms (Views: 8.9ms | ActiveRecord: 1.1ms)


Started GET "/" for 127.0.0.1 at 2017-06-06 12:58:10 -0400
Processing by Spree::HomeController#index as HTML
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Taxonomy Load (0.2ms)[0m  SELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at
  Rendered spree/shared/_taxonomies.html.erb (0.8ms)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", "t"]]
  [1m[35mSQL (1.0ms)[0m  SELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:58:10.864775') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:58:10.864935') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0  [["is_master", "t"], ["advertise", "t"]]
  [1m[36m (1.0ms)[0m  [1mSELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 16:58:10.868109') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 16:58:10.868243') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35mSpree::Store Load (0.3ms)[0m  SELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1
  [1m[36mSpree::Order Load (0.3ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mSpree::Zone Load (0.2ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", "t"]]
  [1m[36m (0.7ms)[0m  [1mSELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'[0m  [["is_master", "t"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mSpree::Product Load (0.9ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849179') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 16:58:10.849329') AND ("spree_products".available_on <= '2017-06-06 16:58:10.849320') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0  [["is_master", "t"]]
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m  [["is_master", "t"]]
  [1m[35mSpree::Price Load (0.3ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)
  [1m[36mSpree::Image Load (0.5ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC[0m
  [1m[35mSpree::ProductPromotionRule Load (0.4ms)[0m  SELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.3ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered spree/shared/_products.html.erb (148.2ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spree_frontend-3.1.5/app/views/spree/home/index.html.erb within spree/layouts/spree_application (166.0ms)
  Rendered spree/shared/_head.html.erb (78.0ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[36m (0.4ms)[0m  [1mSELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL[0m
  [1m[35mSpree::Taxon Load (0.3ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"
  Rendered spree/shared/_search.html.erb (2.2ms)
  Rendered spree/shared/_nav_bar.html.erb (3.6ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (10.7ms)
  Rendered spree/shared/_sidebar.html.erb (0.1ms)
Completed 200 OK in 269ms (Views: 252.3ms | ActiveRecord: 12.9ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 12:58:11 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[36mSpree::Preference Load (0.4ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Store Load (0.5ms)[0m  SELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1
  [1m[36mSpree::Order Load (0.5ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (4.5ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 19ms (Views: 8.8ms | ActiveRecord: 1.3ms)  [1m[36mSpree::Preference Load (0.4ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in tsort_each at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/2.3.0/tsort.rb:228)


Started GET "/" for 127.0.0.1 at 2017-06-06 13:44:30 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Spree::HomeController#index as HTML
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Taxonomy Load (0.5ms)[0m  [1mSELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at[0m
  Rendered spree/shared/_taxonomies.html.erb (2.3ms)
  [1m[35m (1.9ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", "t"]]
  [1m[36mSQL (1.2ms)[0m  [1mSELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 17:44:30.728956') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 17:44:30.729133') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35m (0.8ms)[0m  SELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 17:44:30.732563') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 17:44:30.732682') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.9ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.4ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.6ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mSpree::Product Load (0.8ms)[0m  [1mSELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660522') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:30.660738') AND ("spree_products".available_on <= '2017-06-06 17:44:30.660726') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"]]
  [1m[35mSpree::Variant Load (0.3ms)[0m  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  [["is_master", "t"]]
  [1m[36mSpree::Price Load (0.4ms)[0m  [1mSELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)[0m
  [1m[35mSpree::Image Load (0.5ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC
  [1m[36mSpree::ProductPromotionRule Load (0.4ms)[0m  [1mSELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::TaxCategory Load (0.4ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered spree/shared/_products.html.erb (1215.0ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/spree_frontend-3.1.5/app/views/spree/home/index.html.erb within spree/layouts/spree_application (1324.6ms)
  Rendered spree/shared/_head.html.erb (89.8ms)
  Rendered spree/shared/_google_analytics.js.erb (1.7ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.7ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (39.7ms)
  Rendered spree/shared/_nav_bar.html.erb (41.3ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.6ms)
  Rendered spree/shared/_header.html.erb (49.9ms)
  Rendered spree/shared/_sidebar.html.erb (0.3ms)
Completed 200 OK in 1583ms (Views: 1458.2ms | ActiveRecord: 27.2ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 13:44:32 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (1.6ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.5ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (31.9ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 52ms (Views: 36.9ms | ActiveRecord: 2.8ms)


Started GET "/products/harina-integral" for 127.0.0.1 at 2017-06-06 13:44:35 -0400
Processing by Spree::ProductsController#show as HTML
  Parameters: {"id"=>"harina-integral"}
  [1m[36mSpree::Preference Load (0.2ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Product Load (0.9ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:35.363806') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:44:35.364261') AND ("spree_products".available_on <= '2017-06-06 17:44:35.364249') AND "spree_products"."slug" = $2  ORDER BY "spree_products"."id" ASC LIMIT 1  [["is_master", "t"], ["slug", "harina-integral"]]
  [1m[36mSpree::Variant Load (1.0ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" IN (11)  ORDER BY "spree_variants"."position" ASC[0m
  [1m[35mSpree::Taxon Load (0.5ms)[0m  SELECT  "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  ORDER BY "spree_taxons"."id" ASC LIMIT 1  [["product_id", 11]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.2ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35mSpree::Promotion Load (0.5ms)[0m  SELECT "spree_promotions".* FROM "spree_promotions" INNER JOIN "spree_promotion_rules" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" INNER JOIN "spree_product_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" WHERE "spree_product_promotion_rules"."product_id" = $1 AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 17:44:35.401265') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 17:44:35.401506')  [["product_id", 11], ["advertise", "t"]]
  [1m[36mSpree::Variant Load (0.6ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 LIMIT 1[0m  [["product_id", 11], ["is_master", "t"]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_image.html.erb (9.6ms)
  [1m[35mSpree::Image Load (0.2ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Load (0.5ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC, "spree_variants"."position" ASC[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_thumbnails.html.erb (3.8ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "spree_product_properties" WHERE "spree_product_properties"."product_id" = $1  [["product_id", 11]]
  Rendered spree/products/_properties.html.erb (1.7ms)
  Rendered spree/products/_promotions.html.erb (0.6ms)
  [1m[36mSpree::Variant Load (0.5ms)[0m  [1mSELECT DISTINCT "spree_variants".* FROM "spree_variants" INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 AND ("spree_variants".discontinue_on IS NULL OR "spree_variants".discontinue_on >= '2017-06-06 17:44:35.428459') AND ("spree_variants".deleted_at IS NULL) AND (spree_prices.currency = 'CLP') AND (spree_prices.amount IS NOT NULL)  ORDER BY "spree_variants"."position" ASC[0m  [["product_id", 11], ["is_master", "f"]]
  [1m[35mSpree::Price Load (0.2ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" = $1  [["variant_id", 11]]
  [1m[36mSpree::Price Load (0.4ms)[0m  [1mSELECT  "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."variant_id" = $1 AND "spree_prices"."currency" = $2 LIMIT 1[0m  [["variant_id", 11], ["currency", "CLP"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.3ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT SUM("spree_stock_items"."count_on_hand") FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2[0m  [["variant_id", 11], ["active", "t"]]
  [1m[35mSpree::StockItem Load (0.5ms)[0m  SELECT "spree_stock_items".* FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2  [["variant_id", 11], ["active", "t"]]
  Rendered spree/products/_cart_form.html.erb (17913.2ms)
  [1m[36mSpree::Taxon Load (0.4ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 11]]
  Rendered spree/products/_taxons.html.erb (2.2ms)
  Rendered spree/products/show.html.erb within spree/layouts/spree_application (17944.2ms)
  Rendered spree/shared/_head.html.erb (82.2ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.4ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (2.2ms)
  Rendered spree/shared/_nav_bar.html.erb (3.6ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.4ms)
  Rendered spree/shared/_header.html.erb (10.7ms)
Completed 200 OK in 18075ms (Views: 18037.0ms | ActiveRecord: 13.9ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 13:44:54 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.3ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (3.8ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 16ms (Views: 8.2ms | ActiveRecord: 1.1ms)
  [1m[36mSpree::Preference Load (0.4ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in <top (required)> at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree-5384ab6e8318/core/config/initializers/user_class_extensions.rb:7)


Started GET "/" for 127.0.0.1 at 2017-06-06 13:51:50 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Spree::HomeController#index as HTML
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Taxonomy Load (0.6ms)[0m  [1mSELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at[0m
  Rendered spree/shared/_taxonomies.html.erb (2.4ms)
  [1m[35m (1.7ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", "t"]]
  [1m[36mSQL (1.3ms)[0m  [1mSELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 17:51:50.702218') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 17:51:50.702398') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35m (1.0ms)[0m  SELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 17:51:50.706041') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 17:51:50.706180') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.7ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.8ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mSpree::Product Load (0.9ms)[0m  [1mSELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628543') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:51:50.628765') AND ("spree_products".available_on <= '2017-06-06 17:51:50.628753') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"]]
  [1m[35mSpree::Variant Load (0.3ms)[0m  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  [["is_master", "t"]]
  [1m[36mSpree::Price Load (0.3ms)[0m  [1mSELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)[0m
  [1m[35mSpree::Image Load (0.5ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC
  [1m[36mSpree::ProductPromotionRule Load (0.3ms)[0m  [1mSELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::TaxCategory Load (0.3ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.5ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (1.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.5ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (1.0ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.6ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (2.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered spree/shared/_products.html.erb (11370.5ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree-5384ab6e8318/frontend/app/views/spree/home/index.html.erb within spree/layouts/spree_application (11480.2ms)
  Rendered spree/shared/_head.html.erb (162.0ms)
  Rendered spree/shared/_google_analytics.js.erb (1.5ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.5ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (35.0ms)
  Rendered spree/shared/_nav_bar.html.erb (36.4ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.6ms)
  Rendered spree/shared/_header.html.erb (44.3ms)
  Rendered spree/shared/_sidebar.html.erb (0.2ms)
Completed 200 OK in 11805ms (Views: 11675.5ms | ActiveRecord: 31.9ms)


Started GET "/assets/spree/frontend/frontend_bootstrap.self-a9728b422e2999db389a80e96c0eac028362da71537778d0adb61f0c4aab3ced.css?body=1" for 127.0.0.1 at 2017-06-06 13:52:02 -0400


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 13:52:02 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.3ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (29.2ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 55ms (Views: 40.2ms | ActiveRecord: 1.4ms)


Started GET "/products/harina-integral" for 127.0.0.1 at 2017-06-06 13:52:04 -0400
Processing by Spree::ProductsController#show as HTML
  Parameters: {"id"=>"harina-integral"}
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Product Load (0.7ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:52:04.441965') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 17:52:04.442365') AND ("spree_products".available_on <= '2017-06-06 17:52:04.442354') AND "spree_products"."slug" = $2  ORDER BY "spree_products"."id" ASC LIMIT 1  [["is_master", "t"], ["slug", "harina-integral"]]
  [1m[36mSpree::Variant Load (0.4ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" IN (11)  ORDER BY "spree_variants"."position" ASC[0m
  [1m[35mSpree::Taxon Load (0.5ms)[0m  SELECT  "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  ORDER BY "spree_taxons"."id" ASC LIMIT 1  [["product_id", 11]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.2ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35mSpree::Promotion Load (0.6ms)[0m  SELECT "spree_promotions".* FROM "spree_promotions" INNER JOIN "spree_promotion_rules" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" INNER JOIN "spree_product_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" WHERE "spree_product_promotion_rules"."product_id" = $1 AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 17:52:04.477520') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 17:52:04.477662')  [["product_id", 11], ["advertise", "t"]]
  [1m[36mSpree::Variant Load (0.3ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 LIMIT 1[0m  [["product_id", 11], ["is_master", "t"]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_image.html.erb (9.9ms)
  [1m[35mSpree::Image Load (0.3ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Load (0.5ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC, "spree_variants"."position" ASC[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_thumbnails.html.erb (4.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "spree_product_properties" WHERE "spree_product_properties"."product_id" = $1  [["product_id", 11]]
  Rendered spree/products/_properties.html.erb (2.2ms)
  Rendered spree/products/_promotions.html.erb (0.8ms)
  [1m[36mSpree::Variant Load (0.7ms)[0m  [1mSELECT DISTINCT "spree_variants".* FROM "spree_variants" INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 AND ("spree_variants".discontinue_on IS NULL OR "spree_variants".discontinue_on >= '2017-06-06 17:52:04.508765') AND ("spree_variants".deleted_at IS NULL) AND (spree_prices.currency = 'CLP') AND (spree_prices.amount IS NOT NULL)  ORDER BY "spree_variants"."position" ASC[0m  [["product_id", 11], ["is_master", "f"]]
  [1m[35mSpree::Price Load (0.2ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" = $1  [["variant_id", 11]]
  [1m[36mSpree::Price Load (0.2ms)[0m  [1mSELECT  "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."variant_id" = $1 AND "spree_prices"."currency" = $2 LIMIT 1[0m  [["variant_id", 11], ["currency", "CLP"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.3ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT SUM("spree_stock_items"."count_on_hand") FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2[0m  [["variant_id", 11], ["active", "t"]]
  [1m[35mSpree::StockItem Load (0.4ms)[0m  SELECT "spree_stock_items".* FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2  [["variant_id", 11], ["active", "t"]]
  Rendered spree/products/_cart_form.html.erb (17555.8ms)
  [1m[36mSpree::Taxon Load (0.7ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 11]]
  Rendered spree/products/_taxons.html.erb (4.3ms)
  Rendered spree/products/show.html.erb within spree/layouts/spree_application (17592.3ms)
  Rendered spree/shared/_head.html.erb (95.6ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.4ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (2.4ms)
  Rendered spree/shared/_nav_bar.html.erb (3.9ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (11.3ms)
Completed 200 OK in 17735ms (Views: 17699.8ms | ActiveRecord: 14.3ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 13:52:22 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.5ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.5ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (4.5ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 21ms (Views: 8.5ms | ActiveRecord: 1.3ms)
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in <top (required)> at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree-5384ab6e8318/core/config/initializers/user_class_extensions.rb:7)
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1  ORDER BY "spree_preferences"."id" ASC LIMIT 1[0m  [["key", "spree/app_configuration/currency"]]
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSpree::Preference Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "spree_preferences" WHERE ("spree_preferences"."key" = 'spree/app_configuration/currency' AND "spree_preferences"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  COMMIT
DEPRECATION WARNING: Spree::User must include Spree::UserMethods. (called from block in <top (required)> at /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree-5384ab6e8318/core/config/initializers/user_class_extensions.rb:7)


Started GET "/" for 127.0.0.1 at 2017-06-06 16:01:53 -0400
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Spree::HomeController#index as HTML
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Taxonomy Load (0.5ms)[0m  [1mSELECT "spree_taxonomies".* FROM "spree_taxonomies"  ORDER BY spree_taxonomies.position, spree_taxonomies.created_at[0m
  Rendered spree/shared/_taxonomies.html.erb (2.1ms)
  [1m[35m (1.2ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", "t"]]
  [1m[36mSQL (1.0ms)[0m  [1mSELECT  DISTINCT "spree_products"."id" FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 20:01:53.911872') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 20:01:53.912027') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"], ["advertise", "t"]]
  [1m[35m (0.8ms)[0m  SELECT DISTINCT MAX("spree_products"."updated_at") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL LEFT OUTER JOIN "spree_product_promotion_rules" ON "spree_product_promotion_rules"."product_id" = "spree_products"."id" LEFT OUTER JOIN "spree_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" LEFT OUTER JOIN "spree_promotions" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 20:01:53.915205') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 20:01:53.915325') WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' AND "spree_products"."id" IN (6, 4, 8, 5, 9, 2, 1, 10, 7, 3, 11)  [["is_master", "t"], ["advertise", "t"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.5ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.3ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35m (0.8ms)[0m  SELECT DISTINCT COUNT(DISTINCT "spree_products"."id") FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP'  [["is_master", "t"]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count[0m  [["is_master", true]]
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(DISTINCT count_column) FROM (SELECT  DISTINCT "spree_products"."id" AS count_column FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0) subquery_for_count  [["is_master", true]]
  [1m[36mSpree::Product Load (0.9ms)[0m  [1mSELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842514') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:01:53.842809') AND ("spree_products".available_on <= '2017-06-06 20:01:53.842795') AND (spree_prices.amount IS NOT NULL) AND "spree_prices"."currency" = 'CLP' LIMIT 12 OFFSET 0[0m  [["is_master", "t"]]
  [1m[35mSpree::Variant Load (0.3ms)[0m  SELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."is_master" = $1 AND "spree_variants"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  [["is_master", "t"]]
  [1m[36mSpree::Price Load (0.3ms)[0m  [1mSELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)[0m
  [1m[35mSpree::Image Load (0.5ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_type" = 'Spree::Variant' AND "spree_assets"."viewable_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)  ORDER BY "spree_assets"."position" ASC
  [1m[36mSpree::ProductPromotionRule Load (0.2ms)[0m  [1mSELECT "spree_product_promotion_rules".* FROM "spree_product_promotion_rules" WHERE "spree_product_promotion_rules"."product_id" IN (4, 11, 6, 10, 8, 5, 9, 3, 2, 1, 7)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 4], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mSpree::TaxCategory Load (0.3ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 6], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 10], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.8ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 8], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.4ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 5], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 9], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 3], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.2ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 2], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 1], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::Image Exists (0.3ms)[0m  SELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["product_id", 7], ["viewable_type", "Spree::Variant"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1  [["default_tax", true]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered spree/shared/_products.html.erb (1344.3ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree-5384ab6e8318/frontend/app/views/spree/home/index.html.erb within spree/layouts/spree_application (1448.0ms)
  Rendered spree/shared/_head.html.erb (150.0ms)
  Rendered spree/shared/_google_analytics.js.erb (2.1ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.5ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (47.1ms)
  Rendered spree/shared/_nav_bar.html.erb (49.5ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.8ms)
  Rendered spree/shared/_header.html.erb (61.0ms)
  Rendered spree/shared/_sidebar.html.erb (0.5ms)
Completed 200 OK in 1783ms (Views: 1655.9ms | ActiveRecord: 24.9ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 16:01:55 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.3ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (36.3ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 62ms (Views: 45.0ms | ActiveRecord: 1.7ms)


Started GET "/products/harina-integral" for 127.0.0.1 at 2017-06-06 16:02:14 -0400
Processing by Spree::ProductsController#show as HTML
  Parameters: {"id"=>"harina-integral"}
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Product Load (0.7ms)[0m  SELECT  DISTINCT "spree_products".* FROM "spree_products" INNER JOIN "spree_variants" ON "spree_variants"."product_id" = "spree_products"."id" AND "spree_variants"."is_master" = $1 AND "spree_variants"."deleted_at" IS NULL INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_products"."deleted_at" IS NULL AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:02:14.822133') AND ("spree_products".discontinue_on IS NULL or "spree_products".discontinue_on >= '2017-06-06 20:02:14.822517') AND ("spree_products".available_on <= '2017-06-06 20:02:14.822506') AND "spree_products"."slug" = $2  ORDER BY "spree_products"."id" ASC LIMIT 1  [["is_master", "t"], ["slug", "harina-integral"]]
  [1m[36mSpree::Variant Load (0.5ms)[0m  [1mSELECT "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" IN (11)  ORDER BY "spree_variants"."position" ASC[0m
  [1m[35mSpree::Taxon Load (0.5ms)[0m  SELECT  "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1  ORDER BY "spree_taxons"."id" ASC LIMIT 1  [["product_id", 11]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.4ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mSpree::Zone Load (0.2ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", "t"]]
  [1m[35mSpree::Promotion Load (0.9ms)[0m  SELECT "spree_promotions".* FROM "spree_promotions" INNER JOIN "spree_promotion_rules" ON "spree_promotions"."id" = "spree_promotion_rules"."promotion_id" INNER JOIN "spree_product_promotion_rules" ON "spree_promotion_rules"."id" = "spree_product_promotion_rules"."promotion_rule_id" WHERE "spree_product_promotion_rules"."product_id" = $1 AND "spree_promotions"."advertise" = $2 AND (spree_promotions.starts_at IS NULL OR spree_promotions.starts_at < '2017-06-06 20:02:14.863827') AND (spree_promotions.expires_at IS NULL OR spree_promotions.expires_at > '2017-06-06 20:02:14.864032')  [["product_id", 11], ["advertise", "t"]]
  [1m[36mSpree::Variant Load (0.4ms)[0m  [1mSELECT  "spree_variants".* FROM "spree_variants" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 LIMIT 1[0m  [["product_id", 11], ["is_master", "t"]]
  [1m[35mSpree::Image Exists (0.5ms)[0m  SELECT  1 AS one FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image') LIMIT 1[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_image.html.erb (10.4ms)
  [1m[35mSpree::Image Load (0.3ms)[0m  SELECT "spree_assets".* FROM "spree_assets" WHERE "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."viewable_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC  [["viewable_id", 11], ["viewable_type", "Spree::Variant"]]
  [1m[36mSpree::Image Load (0.5ms)[0m  [1mSELECT "spree_assets".* FROM "spree_assets" INNER JOIN "spree_variants" ON "spree_assets"."viewable_id" = "spree_variants"."id" WHERE "spree_variants"."deleted_at" IS NULL AND "spree_assets"."type" IN ('Spree::Image') AND "spree_variants"."product_id" = $1 AND "spree_assets"."viewable_type" = $2 AND "spree_assets"."type" IN ('Spree::Image') AND "spree_assets"."type" IN ('Spree::Image')  ORDER BY "spree_assets"."position" ASC, "spree_variants"."position" ASC[0m  [["product_id", 11], ["viewable_type", "Spree::Variant"]]
  Rendered spree/products/_thumbnails.html.erb (5.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "spree_product_properties" WHERE "spree_product_properties"."product_id" = $1  [["product_id", 11]]
  Rendered spree/products/_properties.html.erb (2.1ms)
  Rendered spree/products/_promotions.html.erb (0.7ms)
  [1m[36mSpree::Variant Load (0.6ms)[0m  [1mSELECT DISTINCT "spree_variants".* FROM "spree_variants" INNER JOIN "spree_prices" ON "spree_prices"."variant_id" = "spree_variants"."id" AND "spree_prices"."deleted_at" IS NULL WHERE "spree_variants"."deleted_at" IS NULL AND "spree_variants"."product_id" = $1 AND "spree_variants"."is_master" = $2 AND ("spree_variants".discontinue_on IS NULL OR "spree_variants".discontinue_on >= '2017-06-06 20:02:14.894539') AND ("spree_variants".deleted_at IS NULL) AND (spree_prices.currency = 'CLP') AND (spree_prices.amount IS NOT NULL)  ORDER BY "spree_variants"."position" ASC[0m  [["product_id", 11], ["is_master", "f"]]
  [1m[35mSpree::Price Load (0.3ms)[0m  SELECT "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."deleted_at" IS NULL AND "spree_prices"."variant_id" = $1  [["variant_id", 11]]
  [1m[36mSpree::Price Load (0.3ms)[0m  [1mSELECT  "spree_prices".* FROM "spree_prices" WHERE "spree_prices"."variant_id" = $1 AND "spree_prices"."currency" = $2 LIMIT 1[0m  [["variant_id", 11], ["currency", "CLP"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "spree_zones".* FROM "spree_zones" WHERE "spree_zones"."default_tax" = $1 LIMIT 1[0m  [["default_tax", true]]
  [1m[35mSpree::TaxCategory Load (0.3ms)[0m  SELECT  "spree_tax_categories".* FROM "spree_tax_categories" WHERE "spree_tax_categories"."deleted_at" IS NULL AND "spree_tax_categories"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT SUM("spree_stock_items"."count_on_hand") FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2[0m  [["variant_id", 11], ["active", "t"]]
  [1m[35mSpree::StockItem Load (0.4ms)[0m  SELECT "spree_stock_items".* FROM "spree_stock_items" INNER JOIN "spree_stock_locations" ON "spree_stock_locations"."id" = "spree_stock_items"."stock_location_id" WHERE "spree_stock_items"."deleted_at" IS NULL AND "spree_stock_items"."variant_id" = $1 AND "spree_stock_locations"."active" = $2  [["variant_id", 11], ["active", "t"]]
  Rendered spree/products/_cart_form.html.erb (22413.6ms)
  [1m[36mSpree::Taxon Load (1.0ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" INNER JOIN "spree_products_taxons" ON "spree_taxons"."id" = "spree_products_taxons"."taxon_id" WHERE "spree_products_taxons"."product_id" = $1[0m  [["product_id", 11]]
  Rendered spree/products/_taxons.html.erb (5.7ms)
  Rendered spree/products/show.html.erb within spree/layouts/spree_application (22454.2ms)
  Rendered spree/shared/_head.html.erb (77.1ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.4ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (2.3ms)
  Rendered spree/shared/_nav_bar.html.erb (3.7ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.5ms)
  Rendered spree/shared/_header.html.erb (10.9ms)
Completed 200 OK in 22584ms (Views: 22542.2ms | ActiveRecord: 15.5ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 16:02:37 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.6ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.5ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (4.2ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 20ms (Views: 8.3ms | ActiveRecord: 1.4ms)


Started GET "/login" for 127.0.0.1 at 2017-06-06 16:02:41 -0400
Processing by Spree::UserSessionsController#new as HTML
  Rendered spree/shared/_login.html.erb (28.2ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree_auth_devise-c67f50eb317c/lib/views/frontend/spree/user_sessions/new.html.erb within spree/layouts/spree_application (31.4ms)
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  Rendered spree/shared/_head.html.erb (77.4ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.3ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.3ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (2.2ms)
  Rendered spree/shared/_nav_bar.html.erb (3.6ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (11.0ms)
Completed 200 OK in 171ms (Views: 149.7ms | ActiveRecord: 2.5ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 16:02:42 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.6ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.5ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (9.7ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 27ms (Views: 15.3ms | ActiveRecord: 1.4ms)


Started POST "/login" for 127.0.0.1 at 2017-06-06 16:02:54 -0400
Processing by Spree::UserSessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"GdmvQv+OFjclAQrAZ7y7eO8OsRsu3hJ6braXIrPeGghVvz4vuqPcIvpKUOenNBSzwgh3TZM1IaVxMys3r7IYXQ==", "spree_user"=>{"email"=>"trencoret@uc.cl", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Login"}
  [1m[36mSpree::User Load (1.9ms)[0m  [1mSELECT  "spree_users".* FROM "spree_users" WHERE "spree_users"."deleted_at" IS NULL AND "spree_users"."email" = $1  ORDER BY "spree_users"."id" ASC LIMIT 1[0m  [["email", "trencoret@uc.cl"]]
  Rendered spree/shared/_login.html.erb (1.3ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree_auth_devise-c67f50eb317c/lib/views/frontend/spree/user_sessions/new.html.erb within spree/layouts/spree_application (2.7ms)
  [1m[35mSpree::Store Load (0.4ms)[0m  SELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1
  Rendered spree/shared/_head.html.erb (78.7ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[36m (0.4ms)[0m  [1mSELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL[0m
  [1m[35mSpree::Taxon Load (0.3ms)[0m  SELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"
  Rendered spree/shared/_search.html.erb (2.5ms)
  Rendered spree/shared/_nav_bar.html.erb (4.1ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (11.2ms)
Completed 200 OK in 124ms (Views: 101.8ms | ActiveRecord: 3.0ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 16:02:54 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[36mSpree::Preference Load (0.3ms)[0m  [1mSELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1[0m  [["key", "spree/frontend_configuration/locale"]]
  [1m[35mSpree::Store Load (1.4ms)[0m  SELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1
  [1m[36mSpree::Order Load (0.5ms)[0m  [1mSELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1[0m  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (9.6ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 27ms (Views: 13.9ms | ActiveRecord: 2.2ms)


Started POST "/login" for 127.0.0.1 at 2017-06-06 16:03:05 -0400
Processing by Spree::UserSessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"nL7dqMc9q+RpKEuIl5OhjBp1xO0IW6WeZHm9dWqlawrQ2EzFghBh8bZjEa9XGw5HN3MCu7WwlkF7/AFgdslpXw==", "spree_user"=>{"email"=>"spree@example.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Login"}
  [1m[35mSpree::User Load (0.4ms)[0m  SELECT  "spree_users".* FROM "spree_users" WHERE "spree_users"."deleted_at" IS NULL AND "spree_users"."email" = $1  ORDER BY "spree_users"."id" ASC LIMIT 1  [["email", "spree@example.com"]]
  Rendered spree/shared/_login.html.erb (1.4ms)
  Rendered /home/zuri/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/bundler/gems/spree_auth_devise-c67f50eb317c/lib/views/frontend/spree/user_sessions/new.html.erb within spree/layouts/spree_application (3.4ms)
  [1m[36mSpree::Store Load (0.5ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  Rendered spree/shared/_head.html.erb (95.0ms)
  Rendered spree/shared/_google_analytics.js.erb (0.2ms)
[1;32mDeface:[0m 1 overrides found for 'spree/shared/_nav_bar'
[1;32mDeface:[0m 'auth_shared_login_bar' matched 1 times with 'li#search-bar'
  [1m[35m (0.4ms)[0m  SELECT MAX("spree_taxons"."updated_at") FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL
  [1m[36mSpree::Taxon Load (0.4ms)[0m  [1mSELECT "spree_taxons".* FROM "spree_taxons" WHERE "spree_taxons"."parent_id" IS NULL  ORDER BY "spree_taxons"."lft"[0m
  Rendered spree/shared/_search.html.erb (2.6ms)
  Rendered spree/shared/_nav_bar.html.erb (4.0ms)
  Rendered spree/shared/_main_nav_bar.html.erb (0.3ms)
  Rendered spree/shared/_header.html.erb (12.5ms)
Completed 200 OK in 148ms (Views: 122.8ms | ActiveRecord: 1.6ms)


Started GET "/cart_link" for 127.0.0.1 at 2017-06-06 16:03:06 -0400
Processing by Spree::StoreController#cart_link as */*
  [1m[35mSpree::Preference Load (0.2ms)[0m  SELECT  "spree_preferences".* FROM "spree_preferences" WHERE "spree_preferences"."key" = $1 LIMIT 1  [["key", "spree/frontend_configuration/locale"]]
  [1m[36mSpree::Store Load (0.4ms)[0m  [1mSELECT  "spree_stores".* FROM "spree_stores" WHERE (url like '%localhost%')  ORDER BY "spree_stores"."id" ASC LIMIT 1[0m
  [1m[35mSpree::Order Load (0.2ms)[0m  SELECT  "spree_orders".* FROM "spree_orders" WHERE "spree_orders"."completed_at" IS NULL AND "spree_orders"."currency" = $1 AND "spree_orders"."guest_token" = $2 AND "spree_orders"."store_id" = $3 LIMIT 1  [["currency", "CLP"], ["guest_token", "HMTycHjVAmNUoQJZyxhx_g1496351751559"], ["store_id", 1]]
  Rendered spree/shared/_link_to_cart.html.erb (3.8ms)
  Couldn't find template for digesting: store/cart_link
Completed 304 Not Modified in 18ms (Views: 9.0ms | ActiveRecord: 0.8ms)
